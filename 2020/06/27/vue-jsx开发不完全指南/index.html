<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/niuxinyublog/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/niuxinyublog/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/niuxinyublog/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/niuxinyublog/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/niuxinyublog/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/niuxinyublog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/niuxinyublog/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Vue中jsx不完全应用指南vue cli3.x 以上的版本自带 jsx 解析配置 在使用Vue开发项目时绝大多数情况下都是使用模板来写HTML，但是有些时候页面复杂又存在各种条件判断来显示/隐藏和拼凑页面内容，或者页面中很多部分存在部分DOM结构一样的时候就略显捉襟见肘，会写大量重复的代码，会出现单个.vue文件过长的情况，这个时候我们就需要更多的代码控制，这时候可以使用渲染函数。 渲染函数想必">
<meta name="keywords" content="Vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vue jsx开发不完全指南">
<meta property="og:url" content="https://niuxinyu.github.io/niuxinyublog/2020/06/27/vue-jsx开发不完全指南/index.html">
<meta property="og:site_name" content="niu的blog">
<meta property="og:description" content="Vue中jsx不完全应用指南vue cli3.x 以上的版本自带 jsx 解析配置 在使用Vue开发项目时绝大多数情况下都是使用模板来写HTML，但是有些时候页面复杂又存在各种条件判断来显示/隐藏和拼凑页面内容，或者页面中很多部分存在部分DOM结构一样的时候就略显捉襟见肘，会写大量重复的代码，会出现单个.vue文件过长的情况，这个时候我们就需要更多的代码控制，这时候可以使用渲染函数。 渲染函数想必">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-06-27T14:30:38.620Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue jsx开发不完全指南">
<meta name="twitter:description" content="Vue中jsx不完全应用指南vue cli3.x 以上的版本自带 jsx 解析配置 在使用Vue开发项目时绝大多数情况下都是使用模板来写HTML，但是有些时候页面复杂又存在各种条件判断来显示/隐藏和拼凑页面内容，或者页面中很多部分存在部分DOM结构一样的时候就略显捉襟见肘，会写大量重复的代码，会出现单个.vue文件过长的情况，这个时候我们就需要更多的代码控制，这时候可以使用渲染函数。 渲染函数想必">
  <link rel="canonical" href="https://niuxinyu.github.io/niuxinyublog/2020/06/27/vue-jsx开发不完全指南/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>vue jsx开发不完全指南 | niu的blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/niuxinyublog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">niu的blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/niuxinyublog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/niuxinyublog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2020/06/27/vue-jsx开发不完全指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">vue jsx开发不完全指南

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-06-27 19:20:26 / 修改时间：22:30:38" itemprop="dateCreated datePublished" datetime="2020-06-27T19:20:26+08:00">2020-06-27</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Vue中jsx不完全应用指南"><a href="#Vue中jsx不完全应用指南" class="headerlink" title="Vue中jsx不完全应用指南"></a>Vue中jsx不完全应用指南</h1><p><strong><code>vue cli3.x</code> 以上的版本自带 <code>jsx</code> 解析配置</strong></p>
<p>在使用Vue开发项目时绝大多数情况下都是使用模板来写HTML，但是有些时候页面复杂又存在各种条件判断来显示/隐藏和拼凑页面内容，或者页面中很多部分存在部分DOM结构一样的时候就略显捉襟见肘，会写大量重复的代码，会出现单个<code>.vue</code>文件过长的情况，这个时候我们就需要更多的代码控制，这时候可以使用<strong>渲染函数</strong>。</p>
<p>渲染函数想必平时几乎没有人去写，因为写起来很痛苦（本人也没有写过）。更多的是在Vue中使用JSX语法。写法上和在React中差不多，但是功能上还是没有React中那么完善。</p>
<p>在写JSX的过程中不得考虑一个样式的问题，虽然可以直接在<code>.vue</code>文件中不写<code>部分，只写</code>和``部分，而不用担心样式作用域问题。但是更多的时候还是推荐直接使用<code>.js</code>的方式来写组件，这个时候就涉及到样式作用域的问题了。</p>
<p>在React的生态中，有很多<strong>CSS-IN-JS</strong>的解决方案，比如<strong>styled-jsx</strong>、<strong>emotion</strong>、<strong>styled-components</strong>等，目前最活跃和用户量最多的是styled-components，目前已经拥有良好的生态圈子。如果需要在样式中作一些像Sass/Less中的颜色计算，可以使用<a href="https://github.com/styled-components/polished" target="_blank" rel="noopener">polished</a>来实现，当然不止这么简单的功能。但是在Vue中可使用的方案就太少了，因为Vue使用模板来写HTML本身是开箱即用的样式<code>scoped</code>，在使用JSX写组件的时候就面临着样式问题，一种方案是在组件包裹``中取一个特殊的名字，然后样式都嵌套写在这个class下面，但是难免会遇到命名冲突的情况，而且每次还得变着花样取名称。此外，就是引入CSS-IN-JS在Vue对应的实现，但目前来看Styled-components官方提供了一个Vue版本的叫<a href="https://github.com/styled-components/vue-styled-components" target="_blank" rel="noopener">vue-styled-components</a>和emotion的<a href="https://github.com/sky-foundry/vue-emotion" target="_blank" rel="noopener">vue-emotion</a>，但是用的人实在太少。像styled-components进行了重大更新和变化，但是Vue版本的还是最初的版本，而且有时候还出现样式不生效的情况。</p>
<p>接下来进入正题，从简单语法到经验分享（大牛请绕行）</p>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>首先需要约定一下，使用JSX组件命名采用首字母大写的驼峰命名方式，样式可以少的可以直接基于vue-styled-components写在同一个文件中，复杂的建议放在单独的_Styles.js_文件中，当然也可以不采用CSS-IN-JS的方式，使用Less/Sass来写，然后在文件中import进来。</p>
<p>下面是一个通用的骨架：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">'vue-styled-components'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Container = styled.div<span class="string">`</span></span><br><span class="line"><span class="string">    heigth: 100%;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Dashboard = &#123;</span><br><span class="line">  name: <span class="string">'Dashboard'</span>,</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Container&gt;内容&lt;<span class="regexp">/Container&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Dashboard</span></span><br></pre></td></tr></table></figure>

<p><strong>在<code>vue.cli 3.x</code>中不需要这样，直接将样式文件命名为 <code>xxx.module.css</code>就可以解决样式作用域问题了</strong></p>
<h3 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h3><p>在JSX中使用单个括号来绑定文本插值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Message: &#123;<span class="keyword">this</span>.messsage&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;!-- 类似于v-html --&gt;</span></span><br><span class="line"><span class="regexp">&lt;div domPropsInnerHTML=&#123;this.dangerHtml&#125;/</span>&gt;</span><br><span class="line">&lt;!-- v-model --&gt;</span><br><span class="line">&lt;el-input v-model=&#123;<span class="keyword">this</span>.vm.name&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>jsx</code>中不需要把<code>v-model</code>分成事件绑定和赋值二部分分开来写，因为有相应的babel插件来专门处理。</p>
<p><strong>实际上在使用过程中，<code>v-model</code> 不可以直接使用，需要查分开来写</strong></p>
<p>简单的 <code>v-model</code> 实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nInput = &#123;</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;input @input='handleInputChange' /&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        value: <span class="built_in">String</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleInputChange (e) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$emit(<span class="string">'input'</span>, e.target.value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class='App'&gt;</span></span><br><span class="line"><span class="string">            &lt;h1&gt;App&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;n-input v-model='val'&gt;&lt;/n-input&gt;</span></span><br><span class="line"><span class="string">            &#123;&#123;val&#125;&#125;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">        nInput</span><br><span class="line">    &#125;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            val: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h3><p>在JSX中可以直接使用<code>class=&quot;xx&quot;</code>来指定样式类，内联样式可以直接写成<code>style=&quot;xxx&quot;</code></p>
<p>在<code>vue</code> 中类名和 <code>react</code> 中的类名定义是不同的，<code>vue</code> 中是直接写为 <code>class=&#39;xxx&#39;</code>, <code>react</code> 中的写法是 <code>className=&#39;xxx&#39;</code> </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span> style=<span class="string">"font-size: 12px;"</span>&gt;Button&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!-- 动态指定 --&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class=&#123;`btn btn-$&#123;this.isDefault ? 'default' : ''&#125;`&#125;&gt;&lt;/</span>div&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=&#123;&#123;<span class="string">'btn-default'</span>: <span class="keyword">this</span>.isDefault, <span class="string">'btn-primary'</span>: <span class="keyword">this</span>.isPrimary&#125;&#125;&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div style=&#123;&#123;color: 'red', fontSize: '14px'&#125;&#125;&gt;&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>在JSX中没有<code>v-for</code>和<code>v-if</code>等指令的存在，这些全部需要采用Js的方式来实现</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/* 类似于v-if */</span>&#125;</span><br><span class="line">&#123;<span class="keyword">this</span>.withTitle &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Title</span> /&gt;</span></span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 类似于v-if 加 v-else */</span>&#125;</span><br><span class="line">&#123;<span class="keyword">this</span>.isSubTitle ? <span class="xml"><span class="tag">&lt;<span class="name">SubTitle</span> /&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">Title</span> /&gt;</span></span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 类似于v-for */</span>&#125;</span><br><span class="line">&#123;<span class="keyword">this</span>.options.map(<span class="function"><span class="params">option</span> =&gt;</span> &#123;</span><br><span class="line">  &lt;div&gt;&#123;option.title&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&#125;)&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><p>事件绑定需要在事件名称前端加上<code>on</code>前缀，原生事件添加<code>nativeOn</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 对应@click --&gt;</span><br><span class="line">&lt;el-buton onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;Click me&lt;<span class="regexp">/el-buton&gt;</span></span><br><span class="line"><span class="regexp">&lt;!-- 对应@click.native --&gt;</span></span><br><span class="line"><span class="regexp">&lt;el-button nativeOnClick=&#123;this.handleClick&#125;&gt;Native click&lt;/</span>el-button&gt;</span><br><span class="line">&lt;!-- 传递参数 --&gt;</span><br><span class="line">&lt;el-button onClick=&#123;e =&gt; <span class="keyword">this</span>.handleClick(<span class="keyword">this</span>.id)&#125;&gt;Click and pass data&lt;<span class="regexp">/el-button&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：如果需要给事件处理函数传参数，需要使用箭头函数来实现。如果不使用箭头函数那么接收的将会是事件的对象<code>event</code>属性。</p>
<h2 id="高级部分"><a href="#高级部分" class="headerlink" title="高级部分"></a>高级部分</h2><p>在Vue中基于jsx也可以把组件拆分成一个个小的函数式组件，但是有一个限制是必需有一个外层的包裹元素，不能直接写类似：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;li&gt;One&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;Two&lt;/</span>li&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>必需写成：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;li&gt;One&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;Two&lt;/</span>li&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>而在React中可以使用空标签<code>&lt;&gt;</code>和``来实现包裹元素，这里的空标签其实只是<code>react.Fragment</code>的一个语法糖。同时在React 16中直接支持返回数组的形式：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">  &lt;li&gt;One&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;Two&lt;/</span>li&gt;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>那么在Vue中就只能通过遍历来实现类似的功能，大体思路就是把数据先定义好数据然后直接一个<code>map</code>生成，当然如果说元素的标签是不同类型的那就需要额外添加标识来判断了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      options: [<span class="string">'one'</span>, <span class="string">'two'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">    <span class="keyword">const</span> LiItem = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.options.map(<span class="function"><span class="params">option</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;option&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>)</span><br><span class="line">                                          </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;LiItem /&gt;</span><br><span class="line">          &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">         &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h3><p>在基础部分简单介绍了事件的绑定用法，这里主要是补充一下事件修饰符的写法。</p>
<p>在模板语法中Vue提供了很多事件修饰符来快速处理事件的冒泡、捕获、事件触发频率、按键识别等。可以直接查看官方文档的<a href="https://cn.vuejs.org/v2/guide/render-function.html#事件-amp-按键修饰符" target="_blank" rel="noopener">事件&amp;按键修饰符</a>部分，这里把相关内容原样搬运过来：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>前缀</th>
</tr>
</thead>
<tbody><tr>
<td><code>.passive</code></td>
<td><code>&amp;</code></td>
</tr>
<tr>
<td><code>.capture</code></td>
<td><code>!</code></td>
</tr>
<tr>
<td><code>.once</code></td>
<td><code>~</code></td>
</tr>
<tr>
<td><code>.capture.once</code>或<code>.once.capture</code></td>
<td><code>~!</code></td>
</tr>
</tbody></table>
<p>使用方式如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button &#123;...&#123;</span><br><span class="line">    <span class="string">'!click'</span>: <span class="keyword">this</span>.doThisInCapturingMode,</span><br><span class="line">  <span class="string">'!keyup'</span>: <span class="keyword">this</span>.doThisOnce,</span><br><span class="line">  <span class="string">'~!mouseover'</span>: <span class="keyword">this</span>.doThisOnceInCapturingMode</span><br><span class="line">&#125;&#125;&gt;Click Me!&lt;<span class="regexp">/el-button&gt;</span></span><br></pre></td></tr></table></figure>

<p>下面给出的事件修饰符是需要在事件处理函数中写出对应的等价操作</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>处理函数中的等价操作</th>
</tr>
</thead>
<tbody><tr>
<td><code>.stop</code></td>
<td><code>event.stopPropagation()</code></td>
</tr>
<tr>
<td><code>.prevent</code></td>
<td><code>event.preventDefault()</code></td>
</tr>
<tr>
<td><code>.self</code></td>
<td><code>if (event.target !== event.currentTarget) return</code></td>
</tr>
<tr>
<td>按键： <code>.enter</code>, <code>.13</code></td>
<td><code>if (event.keyCode !== 13) return</code> (对于别的按键修饰符来说，可将 <code>13</code> 改为<a href="http://keycode.info/" target="_blank" rel="noopener">另一个按键码</a>)</td>
</tr>
<tr>
<td>修饰键： <code>.ctrl</code>, <code>.alt</code>, <code>.shift</code>, <code>.meta</code></td>
<td><code>if (!event.ctrlKey) return</code> (将 <code>ctrlKey</code> 分别修改为 <code>altKey</code>、<code>shiftKey</code> 或者 <code>metaKey</code>)</td>
</tr>
</tbody></table>
<p>下面是在事件处理函数中使用修饰符的例子：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  keyup(e) &#123;</span><br><span class="line">    <span class="comment">// 对应`.self`</span></span><br><span class="line">    <span class="keyword">if</span> (e.target !== e.currentTarget) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 对应 `.enter`, `.13`</span></span><br><span class="line">    <span class="keyword">if</span> (!e.shiftKey || e.keyCode !== <span class="number">13</span>) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 对应 `.stop`</span></span><br><span class="line">    e.stopPropagation()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 对应 `.prevent`</span></span><br><span class="line">    e.preventDefault()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ref和refInFor"><a href="#ref和refInFor" class="headerlink" title="ref和refInFor"></a>ref和refInFor</h3><p>在Vue中<code>ref</code>被用来给元素或子组件注册引用信息。引用信息将会注册在父组件的 <code>$refs</code> 对象上。如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件。</p>
<p><strong>注意</strong>：</p>
<ul>
<li>因为 ref 本身是作为渲染结果被创建的，在初始渲染的时候你不能访问它们 - 它们还不存在</li>
<li><code>$refs</code>不是响应式的，因此你不应该试图用它在模板中做数据绑定。</li>
</ul>
<p>当 <code>v-for</code> 用于元素或组件的时候，引用信息将是包含 DOM 节点或组件实例的数组。</p>
<p>假如在jsx中想要引用遍历元素或组件的时候，例如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LiArray = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.options.map(<span class="function"><span class="params">option</span> =&gt;</span> (</span><br><span class="line">  &lt;li ref=<span class="string">"li"</span> key=&#123;option&#125;&gt;&#123;option&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">))</span></span><br></pre></td></tr></table></figure>

<p>会发现从<code>this.$refs.li</code>中获取的并不是期望的数组值，这个时候就需要使用<code>refInFor</code>属性，并置为<code>true</code>来达到在模板中<code>v-for</code>中使用<code>ref</code>的效果：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LiArray = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.options.map(<span class="function"><span class="params">option</span> =&gt;</span> (</span><br><span class="line">  &lt;li ref=<span class="string">"li"</span> refInFor=&#123;<span class="literal">true</span>&#125; key=&#123;option&#125;&gt;&#123;option&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">))</span></span><br></pre></td></tr></table></figure>

<h3 id="插槽（v-slot"><a href="#插槽（v-slot" class="headerlink" title="插槽（v-slot)"></a>插槽（v-slot)</h3><p>在jsx中可以使用<code>this.$slots</code>来访问静态插槽的内容。</p>
<blockquote>
<p><strong>注意</strong>：在Vue 2.6.x版本后废弃了<code>slot</code>和<code>slot-scope</code>，在模板中统一使用新的统一语法<code>v-slot</code>指令。<code>v-slot</code>只能用于Vue组件和<code>template</code>标签。</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"page-header__title"</span>&gt;</span><br><span class="line">    &#123;<span class="keyword">this</span>.$slots.title ? <span class="keyword">this</span>.$slots.title : <span class="keyword">this</span>.title&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>等价于模板的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;page-header__title&quot;&gt;</span><br><span class="line">  &lt;slot name=&quot;title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>在Vue官方文档中提到：<strong>父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。</strong>因此像下面的示例是无法正常工作的</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;current-user&gt;</span><br><span class="line">    &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/current-user&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;current-user&gt;</span><br><span class="line">    &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/current-user&gt;</span></span><br></pre></td></tr></table></figure>

<p>在``组件中可以访问到<code>user</code>属性，但是提供的内容却是在父组件渲染的。如果想要达到期望的效果，这个时候就需要使用<strong>作用域插槽</strong>了。下面是改写后的代码，更多知识点可以直接查看官方文档的<a href="https://cn.vuejs.org/v2/guide/components-slots.html#作用域插槽" target="_blank" rel="noopener">作用域插槽</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- current-user组件定义部分 --&gt;</span><br><span class="line">&lt;span&gt;</span><br><span class="line">    &lt;slot v-bind:user=&quot;user&quot;&gt;</span><br><span class="line">      &#123;&#123; user.lastName &#125;&#125;</span><br><span class="line">  &lt;/slot&gt;</span><br><span class="line">&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- current-user 使用 --&gt;</span><br><span class="line">&lt;current-user&gt;</span><br><span class="line">    &lt;template v-slot:default=&quot;slotProps&quot;&gt;</span><br><span class="line">      &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/current-user&gt;</span><br></pre></td></tr></table></figure>

<p>上面的示例其实就是官方的示例，这里需要说明的是，其实在Vue中所谓的作用域插槽功能类似于React中的<strong>Render Props</strong>的概念，只不过在React中我们更多时候不仅提供了属性，还提供了操作方法。但是在Vue中更多的是提供数据供父作用域渲染展示，当然我们也可以把方法提供出去，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;slot v-bind:injectedProps=&quot;slotProps&quot;&gt;</span><br><span class="line">      &#123;&#123; user.lastName &#125;&#125;</span><br><span class="line">      &lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        user: &#123;</span><br><span class="line">          firstName: &apos;snow&apos;,</span><br><span class="line">          lastName: &apos;wolf&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    computed: &#123;</span><br><span class="line">      slotProps() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          user: this.user,</span><br><span class="line">          logFullName: this.logFullName</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    methods: &#123;</span><br><span class="line">      logFullName() &#123;</span><br><span class="line">        console.log(`$&#123;this.firstName&#125; $&#123;this.lastName&#125;`)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在父组件中使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;current-user&gt;</span><br><span class="line">    &lt;template v-slot:default=&quot;&#123; injectedProps &#125;&quot;&gt;</span><br><span class="line">      &lt;div&gt;&#123;&#123; injectedProps.user.firstName &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;el-button @click=&quot;injectedProps.logFullName&quot;&gt;Log Full Name&lt;/el-button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/current-user&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中我们实际上使用解构的方式来取得<code>injectedProps</code>，基于解构的特性还可以重命名属性名，在<code>prop</code>为<code>undefined</code>的时候指定初始值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;current-user v-slot=&quot;&#123; user = &#123; firstName: &apos;Guest&apos; &#125; &#125;&quot;&gt;</span><br><span class="line">  &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line">&lt;/current-user&gt;</span><br></pre></td></tr></table></figure>

<p>如果组件只有一个默认的插槽还可以使用缩写语法，将<code>v-slot:default=&quot;slotProps&quot;</code>写成<code>v-slot=&quot;slotProps&quot;</code>，命名插槽写成<code>v-slot:user=&quot;slotProps&quot;</code>，如果想要<strong>动态插槽名</strong>还可以写成<code>v-slot:[dynamicSlotName]</code>，此外<strong>具名插槽</strong>同样也有缩写语法，例如 <code>v-slot:header</code>可以被重写为<code>#header</code></p>
<p>上面介绍了很多插槽相关的知识点足已说明其在开发过程中的重要性。说了很多在模板中如何定义和使用作用域插槽，现在进入正题如何在jsx中同样使用呢？</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// current-user components</span></span><br><span class="line">&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      user: &#123;</span><br><span class="line">        firstName: <span class="string">'snow'</span>,</span><br><span class="line">        lastName: <span class="string">'wolf'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">  computed: &#123;</span><br><span class="line">    slotProps() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        user: <span class="keyword">this</span>.user,</span><br><span class="line">        logFullName: <span class="keyword">this</span>.logFullName</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">  methods: &#123;</span><br><span class="line">    logFullName() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="keyword">this</span>.lastName&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.$scopedSlots.subTitle(&#123;</span><br><span class="line">          injectedProps: <span class="keyword">this</span>.slotProps</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>然后在父组件中以jsx使用：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;current-user &#123;...&#123;</span><br><span class="line">  scopedSlots: &#123;</span><br><span class="line">    subTitle: <span class="function">(<span class="params">&#123; injectedProps &#125;</span>) =&gt;</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h3&gt;injectedProps.user&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-button onClick=&#123;injectedProps.logFullName&#125;&gt;Log Full Name&lt;/</span>el-button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;&#125;&gt;&lt;/</span>current-user&gt;</span><br></pre></td></tr></table></figure>

<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><p>这里需要注意的是在jsx中所有Vue内置的指令除了<code>v-show</code>以外都不支持，需要使用一些等价方式来实现，比如<code>v-if</code>使用三目运算表达式、<code>v-for</code>使用<code>array.map()</code>等。</p>
<p>对于自定义的指令可以使用<code>v-name={value}</code>的语法来写，需要注意的是指令的参数、修饰符此种方式并不支持。以官方文档指令部分给出的示例<code>v-focus</code>使用为例，介绍二种解决办法</p>
<p>1 <strong>直接使用对象传递所有指令属性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-focus=&#123;&#123; value: true &#125;&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>2 <strong>使用原始的vnode指令数据格式</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  directives：&#123;</span><br><span class="line">    focus: &#123;</span><br><span class="line">      inserted: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">        el.focus()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> directives = [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'focus'</span>, <span class="attr">value</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          &lt;input type=<span class="string">"text"</span> &#123;...&#123; directives &#125;&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p>过滤器其实在开发过程中用得倒是不多，因为<strong>更多时候可以通过计算属性来对数据做一些转换和筛选</strong>。这里只是简单提及一下并没有什么可以深究的知识点。</p>
<p>在模板中的用法如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在双花括号中 --&gt;</span><br><span class="line">&#123;&#123; message | capitalize &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 在 <span class="string">`v-bind`</span> 中 --&gt;</span><br><span class="line">&lt;div v-bind:id=<span class="string">"rawId | formatId"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>在jsx中使用方法为：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;<span class="keyword">this</span>.$options.filters(<span class="string">'formatDate'</span>)(<span class="string">'2019-07-01'</span>)&#125;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：由于Vue全局的过滤器只用于模板中，如果需要用于组件的方法中，可以把过滤器方法单独抽离出一个公共Js文件，然后引入组件中，然后用于方法中。</p>
<h2 id="一些简单经验分享"><a href="#一些简单经验分享" class="headerlink" title="一些简单经验分享"></a>一些简单经验分享</h2><p>并不是说我们在开发Vue项目的时候一定要使用jsx的方式来写，但是多掌握一种方式来灵活变通，提高工作效率，扩展思路何尝不值得一试。而且，在有些场景下释放js的完全编程能力会让你更加能够得心应手。其实在使用模板方式的时候我们并没有完全采用组件的思维方式来做，或者说是做得不彻底，不纯粹，拆分的粒度不够。更多 的时候并没有考虑到组件怎么切分和抽象，多人协作的时候如何处理依赖并明确自己的功能点。</p>
<h3 id="关于DOM属性、HTML属性和组件属性"><a href="#关于DOM属性、HTML属性和组件属性" class="headerlink" title="关于DOM属性、HTML属性和组件属性"></a>关于DOM属性、HTML属性和组件属性</h3><p>在React中所有数据均挂载在<code>props</code>下，Vue则不然，仅属性就有三种：组件属性<code>props</code>，普通html属性<code>attrs</code>和DOM属性<code>domProps</code>。在Angular的文档中关于插值绑定部分是重点说明了<strong>DOM属性</strong>和<strong>HTML属性</strong>的区别，在大多数情况下两者都有对应的同名属性，也就是1:1映射关系，但是也有例外的情况，比如HTML中<code>colspan</code>，DOM中的<code>textContent</code>。HTML属性的值指定了初始值，并且不能改变，而DOM属性的值表示当前值，是可以改变的。</p>
<p>然后在Vue的模板语法中是不区分DOM属性和HTML属性的，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div&gt;输入的值：&#123;&#123; title &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; value=&quot;我是DOM属性值&quot; v-model=&quot;title&quot; @input=&quot;logTitle&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &apos;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  methods: &#123;</span><br><span class="line">    logTitle(e) &#123;</span><br><span class="line">      // 输出DOM属性</span><br><span class="line">      console.log(e.target.value)</span><br><span class="line">      // 输出HTML属性</span><br><span class="line">      console.log(e.target.getAttribue(&apos;value&apos;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>运行示例可以看到<code>input</code>的初始值被设置为了“我是DOM属性值”，当我们在输入框中添加或者删除文字时，HTML属性始终没有变化，而绑定的DOM值一值在变动。然后再看一下在jsx中的实现：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;输入值：&#123; <span class="keyword">this</span>.title &#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;input type="text" value="我是DOM属性" v-model=&#123;this.title&#125; onInput=&#123;this.logTitle&#125; /</span>&gt;</span><br></pre></td></tr></table></figure>

<p>同样运行后会发现在jsx写法中并没有直接将HTML属性初始化为DOM属性值，即输入框中当前值为空字符串，这符合预期的行为。</p>
<p>此外在模板语法中是无法区分HTML属性和DOM属性命名一样的场景，但是在jsx中可以很好的区分：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo title=<span class="string">"我是组件属性"</span> domPropsTitle=<span class="string">"我是DOM属性"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>结果会就是在HMTL中显示<code>title=&quot;我是DOM属性</code>，而”我是组件属性”传递给了组件。</p>
<p>在React中CSS的样式写义在jsx中的语法是以<code>className=&quot;xx&quot;</code>的形式，而在Vue的jsx中可以直接写成<code>class=&quot;xx&quot;</code>。实际上由于<code>class</code>是Js的保留字，因此在DOM中其属性名为<code>className</code>而在HTML属性中为<code>class</code>，我们可以在Vue中这样写，经过Babel转译后得到正确的样式类名：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div domPropsClassName=<span class="string">"mt__xs"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong>：如果同时写了<code>class=&quot;xx&quot; domPropsClassName=&quot;yy&quot;</code>那么后者的优先级较高，和位置无关。所以尽量还是采用<code>class</code>的写法。</p>
</blockquote>
<p>有使用过Bootstrap经验的可能会注意到它里面包含了很多<strong>ARIA</strong>属性，这些属性并不属于DOM，在jsx中可以通过<code>attrsXX</code>或者直接<code>aria-xx</code>的方式来添加:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label aria-label=<span class="string">"title"</span>&gt;&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">&lt;label attrsAria-label="title"&gt;&lt;/</span>label&gt;</span><br></pre></td></tr></table></figure>

<p>但是上面的换成<code>domPropsAria-label</code>就没有任何效果。</p>
<blockquote>
<p><strong>注意</strong>：在jsx中所有DOM属性(<strong>Property</strong>)语法为<code>domPropsXx</code>, HTML特性(<strong>Attribute</strong>)语法为<code>attrsXx</code>。更多的时候建议还是少使用，或者说合理使用。</p>
<p>在jsx中还可以使用混用的写法，例如在组件中写了``，还可以定义一个属性对象，然后使用<code>{...props}</code>的方式写在一起，这个时候就会出现属性合并的问题，同样的事件多个地方声明事件处理函数，都会触发。</p>
</blockquote>
<p>最后需要提及一点的是，在Vue中当给一个组件传了很多props，但是有的并不是组件声明的，也有可能是一些通用的HTML或者DOM属性，但是在最终编译后的HTML中会直接显示这些props，如果不希望这些属性显示在最终的HTML中，可以在组件中设<strong><code>inheritAttrs: false</code></strong>。虽然不显示了，但是我们依然可以通过<code>vm.$attrs</code>获取所有（除<code>class</code>和<code>style</code>)绑定的属性，包括不在props中定义的。</p>
<h3 id="关于事件"><a href="#关于事件" class="headerlink" title="关于事件"></a>关于事件</h3><p>前面已经把事件相关的知识点都介绍了，这里主要是提及一下关于jsx事件绑定语法<code>onXx</code>和组件属性（主要是函数prop)以<code>on</code>开头的情况如何处理。</p>
<p>虽然在写组件的时候可以避开命名以<code>on</code>开头，但是在使用第三库的时候，如果遇到了该如何处理呢？比如Element组件Upload很多钩子都是以<code>on</code>开头。 下面提供两种解决办法：</p>
<p>1.<strong>使用展开</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload &#123;...&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    onPreview: <span class="keyword">this</span>.handlePreview</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p><strong>使用<code>propsXx</code></strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload propsOnPreview=&#123;<span class="keyword">this</span>.handlePreview&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>推荐使用第二种方式，写起来要简单些。</p>
<p><strong>实际使用中，发现这种写法不可行，而可行的方法是</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;CheckBox on-on-change /&gt;</span><br></pre></td></tr></table></figure>

<p>后边的 <code>on-change</code> 是 <code>CheckBox</code> 中通过 <code>$emit</code> 触发的事件名字，而前边的 <code>on</code> 是前缀</p>
<p>在使用<code>jsx</code>的时候，对于子组件内 <code>$emit</code> 触发的事件，可以在<code>jsx</code>文件内也就是父组件内通过 <code>on-</code>在子组件内定义的函数名字，其中，在子组件内定义的函数的名字如果是<code>-</code>相连的话，在父组件内接收也必须是<code>-</code>相连的形式</p>
<h3 id="复杂逻辑条件判断"><a href="#复杂逻辑条件判断" class="headerlink" title="复杂逻辑条件判断"></a>复杂逻辑条件判断</h3><p>在模板语法中可以使用<code>v-if</code>、<code>v-else-if</code>和<code>v-else</code>来做条件判断。在jsx中可以通过<code>?:</code>三元运算符(<strong>Ternary operator</strong>)运算符来做<code>if-else</code>判断：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> isTrue ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>True!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> : <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>然后可以利用<code>&amp;&amp;</code>运算符的特性简写为：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> isTrue &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>True!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>对于复杂的条件判断，例如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;flag &amp;&amp; flag2 &amp;&amp; !flag3</span><br><span class="line">        ? flag4</span><br><span class="line">         ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Blash<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      : flag5</span><br><span class="line">         ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Meh<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      : <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>hErp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">        : <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Derp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>可以采用两种方式来降低判断识别的复杂度</p>
<ul>
<li>最好的办法：将判断逻辑转移到子组件</li>
<li>可选的hacky方法：使用<strong>IIFE</strong>(立即执行表达式)</li>
<li>使用第三方库解决：<a href="https://github.com/AlexGilleran/jsx-control-statements" target="_blank" rel="noopener">jsx-control-statements</a></li>
</ul>
<p>下面是使用IIFE通过内部使用<code>if-else</code>返回值来优化上述问题：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      (<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag &amp;&amp; flag2 &amp;&amp;!flag3) &#123;</span><br><span class="line">          <span class="keyword">if</span> (flag4) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Blah<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag5) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Meh<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Herp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Derp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)()</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>还可以使用<code>do</code>表达式，但是需要插件<strong>@babel/plugin-proposal-do-expressions</strong>的转译来支持，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag1 &amp;&amp; flag2 &amp;&amp; !flag3) &#123;</span><br><span class="line">          <span class="keyword">if</span> (flag4) &#123;</span><br><span class="line">            &lt;p&gt;Blah&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">          &#125; else if (flag5) &#123;</span></span><br><span class="line"><span class="regexp">            &lt;p&gt;Meh&lt;/</span>p&gt;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            &lt;p&gt;Herp&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &#125; else &#123;</span></span><br><span class="line"><span class="regexp">          &lt;p&gt;Derp&lt;/</span>p&gt;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>

<p>再就是一种比较简单的可选办法，如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Demo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> basicCondition = flag &amp;&amp; flag1 &amp;&amp; !flag3;</span><br><span class="line">  <span class="keyword">if</span> (!basicCondition) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Derp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">if</span> (flag4) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Blah<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">if</span> (flag5) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Meh<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Herp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后一种使用jsx插件的就不详述和举例了，有兴趣的可以直接查看文档。</p>
<h3 id="组件的传值"><a href="#组件的传值" class="headerlink" title="组件的传值"></a>组件的传值</h3><p>在单个jsx文件中可以写很多函数式组件来切分更小的粒度，例如之前的文章<a href="https://segmentfault.com/a/1190000019457192" target="_blank" rel="noopener">Vue后台管理系统开发日常总结__组件PageHeader</a>，组件的形态有两种，一种是普通标题，另一种是带有选项卡的标题，那么在写的时候就可以这样写：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'n-header'</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        isHeaderShow: &#123;</span><br><span class="line">            type: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="keyword">default</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    render () &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> None = <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>空<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> Test = &#123;</span><br><span class="line">            render () &#123;</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;h1&gt;测试&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">                )</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        return (</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;</span></span><br><span class="line"><span class="regexp">                &#123; this.isHeaderShow ?  &lt;Test /</span>&gt; : None &#125;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>函数式组件和 <code>html</code> 片段的用法如上</p>
<p>注意在拆分的时候，如果不需要做任何判断可以纯粹是HTML片段赋值给变量，如果需要条件判断就使用函数式组件的方式来写。<strong>需要注意的是由于<code>render</code>函数会多次被调用，写的时候注意一下对性能的影响，目前能力有限这方面就不作展开了。</strong></p>
<p>既然使用函数式组件，那么同样可以在函数中传递参数了，参数是一个对象中，包含了以下属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">children        # VNode数组，类似于React的children</span><br><span class="line">data          # 绑定的属性</span><br><span class="line">    attrs       # Attribute</span><br><span class="line">    domProps    # DOM property</span><br><span class="line">    on                # 事件</span><br><span class="line">injections  # 注入的对象</span><br><span class="line">listeners:  # 绑定的事件类型</span><br><span class="line">    click         # 点击事件</span><br><span class="line">    ...</span><br><span class="line">parent            # 父组件</span><br><span class="line">props                # 属性</span><br><span class="line">scopedSlots # 对象，作用域插槽，使用中发现作用域插槽也挂在这个下面</span><br><span class="line">slots                # 函数，插槽</span><br></pre></td></tr></table></figure>

<p>虽然可以在函数式组件中传参数、事件、slot但是个人觉得不建议这样做，反而搞复杂了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">const</span> Demo = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h3&gt;Jsx中的内部组件 &#123; props.data.title &#125;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">        &#123; props.children &#125;</span></span><br><span class="line"><span class="regexp">        &lt;br /</span>&gt;</span><br><span class="line">        &#123; props.scopedSlots.bar() &#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  </span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Demo title="test" attrsA="a" domPropsB="b" onClick=&#123;this.demo&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;h3&gt;我是Children&lt;/</span>h3&gt;</span><br><span class="line">        &lt;template slot=<span class="string">"bar"</span>&gt;</span><br><span class="line">            &lt;p&gt;我是Slot内容&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>template&gt;</span><br><span class="line">      &lt;<span class="regexp">/Demo&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的示例最终生成的HTML中会将<code>的内容转换为</code>#document-fragment`。</p>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/niuxinyublog/tags/Vue/" rel="tag"># Vue</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/niuxinyublog/2020/06/27/vue-jsx-写法下的由于diff算法复用原则导致的表单验证问题/" rel="next" title="vue jsx 写法下的由于diff算法复用原则导致的表单验证问题">
                  <i class="fa fa-chevron-left"></i> vue jsx 写法下的由于diff算法复用原则导致的表单验证问题
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/niuxinyublog/2020/06/27/vue-jsx写法中得render函数得执行时机问题/" rel="prev" title="vue jsx写法中得render函数得执行时机问题">
                  vue jsx写法中得render函数得执行时机问题 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue中jsx不完全应用指南"><span class="nav-number">1.</span> <span class="nav-text">Vue中jsx不完全应用指南</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本用法"><span class="nav-number">1.1.</span> <span class="nav-text">基本用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#插值"><span class="nav-number">1.1.1.</span> <span class="nav-text">插值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样式"><span class="nav-number">1.1.2.</span> <span class="nav-text">样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历"><span class="nav-number">1.1.3.</span> <span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件绑定"><span class="nav-number">1.1.4.</span> <span class="nav-text">事件绑定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高级部分"><span class="nav-number">1.2.</span> <span class="nav-text">高级部分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#事件修饰符"><span class="nav-number">1.2.1.</span> <span class="nav-text">事件修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ref和refInFor"><span class="nav-number">1.2.2.</span> <span class="nav-text">ref和refInFor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插槽（v-slot"><span class="nav-number">1.2.3.</span> <span class="nav-text">插槽（v-slot)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指令"><span class="nav-number">1.2.4.</span> <span class="nav-text">指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤器"><span class="nav-number">1.2.5.</span> <span class="nav-text">过滤器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一些简单经验分享"><span class="nav-number">1.3.</span> <span class="nav-text">一些简单经验分享</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#关于DOM属性、HTML属性和组件属性"><span class="nav-number">1.3.1.</span> <span class="nav-text">关于DOM属性、HTML属性和组件属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于事件"><span class="nav-number">1.3.2.</span> <span class="nav-text">关于事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复杂逻辑条件判断"><span class="nav-number">1.3.3.</span> <span class="nav-text">复杂逻辑条件判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件的传值"><span class="nav-number">1.3.4.</span> <span class="nav-text">组件的传值</span></a></li></ol></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Niu</p>
  <div class="site-description" itemprop="description">文章</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/niuxinyublog/archives/">
        
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span>
        
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Niu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/niuxinyublog/lib/anime.min.js?v=3.1.0"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/niuxinyublog/js/utils.js?v=7.4.0"></script><script src="/niuxinyublog/js/motion.js?v=7.4.0"></script>
<script src="/niuxinyublog/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/niuxinyublog/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
