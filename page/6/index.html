<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/niuxinyublog/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/niuxinyublog/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/niuxinyublog/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/niuxinyublog/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/niuxinyublog/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/niuxinyublog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/niuxinyublog/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="文章">
<meta property="og:type" content="website">
<meta property="og:title" content="niu的blog">
<meta property="og:url" content="https://niuxinyu.github.io/niuxinyublog/page/6/index.html">
<meta property="og:site_name" content="niu的blog">
<meta property="og:description" content="文章">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="niu的blog">
<meta name="twitter:description" content="文章">
  <link rel="canonical" href="https://niuxinyu.github.io/niuxinyublog/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>niu的blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/niuxinyublog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">niu的blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/niuxinyublog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/niuxinyublog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/06/JS-十个实用小技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/06/JS-十个实用小技巧/" class="post-title-link" itemprop="url">JS 十个实用小技巧</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-06 22:30:37" itemprop="dateCreated datePublished" datetime="2019-12-06T22:30:37+08:00">2019-12-06</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-09 22:39:00" itemprop="dateModified" datetime="2019-12-09T22:39:00+08:00">2019-12-09</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-十个实用小技巧"><a href="#JS-十个实用小技巧" class="headerlink" title="JS 十个实用小技巧"></a>JS 十个实用小技巧</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>每一门语言都有一些奇技淫巧，JS也不例外，一直想总结这么篇文章，我包括一些新手，都会有这么一个疑问，每次面对一张空白的页面，不知从何下手，没有思路，高手有的是设计模式，但是在这里讲一些设计模式，我可能不够格，这些书籍都有可以自己去翻阅，我能给的就是，总结我写代码的时候，会优化的一些技巧</p>
<h2 id="实用篇"><a href="#实用篇" class="headerlink" title="实用篇"></a>实用篇</h2><h3 id="1-立即执行"><a href="#1-立即执行" class="headerlink" title="1.立即执行"></a>1.立即执行</h3><p>我为什么把立即执行放在第一个，因为一般做业务的时候都会有一个入口函数，比如一下这种格式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line">init()</span><br></pre></td></tr></table></figure>

<p>我一开始也跟上面这样写，但是后来看了《你所不知道的javaScript》，我是这么写的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>立即执行的好处：<br>作用域隔离,因为init这个函数名是没有必要在全局作用域中展示的</p>
<h3 id="2-常量解耦"><a href="#2-常量解耦" class="headerlink" title="2.常量解耦"></a>2.常量解耦</h3><p>这个技巧我在业务中也是经常使用的，没学会之前是这么写的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">12345678901</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是学会之后，是这样的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TEL = <span class="number">12345678901</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(TEL)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可能这里有人会问，你这不是多此一举，而且还添加了一个全局常量，但是事实是这样的，好处如下：</p>
<ul>
<li>当多处引用这个常量的时候，当你修改的时候，只要修改一处代码即可</li>
<li>这样写出来的代码更具语义话，举个例子，有些请求回调中ERROR常量一般为1，摆在那别人很难看懂</li>
</ul>
<h3 id="3-递归的解耦"><a href="#3-递归的解耦" class="headerlink" title="3.递归的解耦"></a>3.递归的解耦</h3><p>这个方法在红宝书中有写到，我不知道常不常用，如有错误，请纠正我，因为我递归一直在用，面试写算法题也在用，没学会之前的写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    a();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>学会之后，我的递归一般是这么写的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    argument.callee();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解耦的好处：<br>修改函数名即可，不影响里面的代码<br>补充：<br>评论里指出的很正确，在严格模式下不能使用，我去mdn的官网翻了api文档，贴图如下：</p>
<p>![](<a href="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/JS" target="_blank" rel="noopener">https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/JS</a> 十个实用小技巧.webp)</p>
<h3 id="4-整数的转换之加法篇"><a href="#4-整数的转换之加法篇" class="headerlink" title="4.整数的转换之加法篇"></a>4.整数的转换之加法篇</h3><p>你可能以前看到过parseInt和parseFloat这两个方法来转换成number类型的整数型和浮点型，其实，一开始我也是用这么笨的方法的，为什么说笨呢，举个例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'123'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">parseInt</span>(str));    <span class="comment">//number</span></span><br></pre></td></tr></table></figure>

<p>接下来是加号操作符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'123'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> +str);    <span class="comment">//number</span></span><br></pre></td></tr></table></figure>

<p>好处就不多说了吧，你打字打得累死，不如加号来的快，而且加号实现方式还优雅</p>
<h3 id="5-短路操作"><a href="#5-短路操作" class="headerlink" title="5.短路操作"></a>5.短路操作</h3><p>没学会这个方法之前我的代码是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!foo)&#123;</span><br><span class="line">   foo = bar</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是我学会短路操作之后的是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo = foo || bar</span><br></pre></td></tr></table></figure>

<p>好处：</p>
<ol>
<li>代码量减少</li>
<li>书写优雅</li>
</ol>
<p>缺点：<br>代码可读性降低</p>
<p>短路原理：<br>在js中&amp;&amp;和||这两个操作符有一个特性，比如&amp;&amp;前后有两个表达式，前者为false，后者不会执行，||会反过来</p>
<p>补充：评论里面有人建议用!!代表true，用!代表false，这一点认可，这样操作是有好处的，!!代表强制转化成true，这样做的目的就是保证值只能在true/false中取，而非其它值。最近在看vue源码，细想一下，尤神也有对这点的应用</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/!!%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2boolean%E5%80%BC.webp" alt></p>
<h3 id="6-条件表达式"><a href="#6-条件表达式" class="headerlink" title="6.条件表达式"></a>6.条件表达式</h3><p>条件表达式或许在每门语言中都会用到，你没学会之前你会这么写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a === <span class="literal">true</span>)&#123;</span><br><span class="line">   b = c;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    b = d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是你学会之后，你会这么写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = a ? c : d</span><br></pre></td></tr></table></figure>

<p>好处：<br>1.减少代码量<br>2.代码优雅</p>
<p>缺点：<br>代码可读性降低</p>
<h3 id="7-跳过"><a href="#7-跳过" class="headerlink" title="7.跳过"></a>7.跳过</h3><h3 id="8-优雅的向下取整"><a href="#8-优雅的向下取整" class="headerlink" title="8.优雅的向下取整"></a>8.优雅的向下取整</h3><p>向下取整有很多种方式，做常用的，是调用Math的方法，如下图的例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1.23</span></span><br><span class="line"><span class="keyword">let</span> num1 = <span class="built_in">Math</span>.floor(num);</span><br><span class="line"><span class="built_in">console</span>.log(num1); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<p>但是下面有一种更加优雅的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1.23</span></span><br><span class="line"><span class="keyword">let</span> num1 = num | <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num1)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>这种方式更加简洁，这种方式的原理是来源于js的位运算，这边的 | 不是逻辑或，是按或运算</p>
<ul>
<li>注意点：<ul>
<li>Math.floor(NaN)返回的是NaN，但是或零返回的是0；</li>
<li>Math.floor(Infinity)返回的是Infinity，但是或零返回的是0；</li>
</ul>
</li>
</ul>
<p>补充:评论中补充了一个～～也可以向下取整，确实更加优雅，推荐，关于这个原理有兴趣的朋友可以自己去看一下，～是取反操作符，我试了一下1.234取反是-2，在取反就是1，不过以上注意点变了</p>
<ul>
<li>~~NaN等于0，这个原理就是js会先调用Number，把NaN转化成false，false取反就是-1，在取反就是0。</li>
</ul>
<h3 id="9-单声明的形式"><a href="#9-单声明的形式" class="headerlink" title="9.单声明的形式"></a>9.单声明的形式</h3><p>在编程中，最好养成一个习惯，一个函数的参数，声明在函数的顶部，然后用这个声明操作符来完成，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">0</span>,</span><br><span class="line">     b = <span class="number">0</span>,</span><br><span class="line">     c = <span class="number">0</span>,</span><br><span class="line">     d = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>这样的好处有：</p>
<ul>
<li>变量名不散乱，比较容易寻找</li>
<li>少代码量</li>
<li>防止你声明变量的时候出错</li>
</ul>
<h3 id="10-绑定this"><a href="#10-绑定this" class="headerlink" title="10.绑定this"></a>10.绑定this</h3><p>这个怎么解释呢？其实es6箭头函数已经解决了，我也当一个技巧跟大家絮叨絮叨，我们在设计整个js代码怎么书写的时候，常常会把一块功能相同的代码放到一块，看看下面的例子，你就懂了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//可以在a中使用_this;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//可以在b中使用_this;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-快速的将-false-或者-true-字符串转换为-Boolean"><a href="#11-快速的将-false-或者-true-字符串转换为-Boolean" class="headerlink" title="11.快速的将 false 或者 true 字符串转换为 Boolean"></a>11.快速的将 <code>false</code> 或者 <code>true</code> 字符串转换为 <code>Boolean</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'false'</span>)</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/06/ϸ˵-Array-prototype-slice-call/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/06/ϸ˵-Array-prototype-slice-call/" class="post-title-link" itemprop="url">细说 Array.prototype.slice.call</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-06 22:25:37 / 修改时间：22:29:36" itemprop="dateCreated datePublished" datetime="2019-12-06T22:25:37+08:00">2019-12-06</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="细说-Array-prototype-slice-call"><a href="#细说-Array-prototype-slice-call" class="headerlink" title="细说 Array.prototype.slice.call"></a>细说 Array.prototype.slice.call</h1><h3 id="基本语法的讲解"><a href="#基本语法的讲解" class="headerlink" title="基本语法的讲解"></a>基本语法的讲解</h3><ul>
<li>Array.prototype.slice() Array是一个构造函数，原型中带有的slice方法就是我们平常用来切割数组用的，之后会返回一个数组，不清楚的朋友可以去MDN上看一下，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">MDN之slice</a></li>
<li>call和apply call和apply、bind这已经是老生常谈的问题了，是可以改变this指向的，这里就简单点打个比方吧。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Food.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.color)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fish = <span class="keyword">new</span> Food()</span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  color: <span class="string">'red'</span></span><br><span class="line">&#125;</span><br><span class="line">fish.say.call(o);  <span class="comment">//red</span></span><br></pre></td></tr></table></figure>

<h3 id="答疑解惑"><a href="#答疑解惑" class="headerlink" title="答疑解惑"></a>答疑解惑</h3><p>Array.prototype.slice.call那么这个有什么用呢，我们来看个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a,b,c,d</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> arg = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>,<span class="number">1</span>); </span><br><span class="line">  <span class="built_in">console</span>.log(arg); </span><br><span class="line">&#125; </span><br><span class="line">test(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>); <span class="comment">//b,c,d</span></span><br></pre></td></tr></table></figure>

<p>看到这儿，可能有些人会说那能不能写arguments.slice(1)，当然不能，这样的话会报错，因为arguments是类数组对象，并没有slice这个方法。 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener">关于arguments对象</a></p>
<h3 id="真正的机制"><a href="#真正的机制" class="headerlink" title="真正的机制"></a>真正的机制</h3><p>Array.prototype.slice.call()能把类数组对象转化成数组，当然像传统的dom对象和js对象都是行不通的，我们接下来举个例子：</p>
<p>类数组，也就是拥有length属性和索引值的数据结构，类似数组但是没有数组的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=&#123;<span class="attr">length</span>:<span class="number">2</span>,<span class="number">0</span>:<span class="string">'lai'</span>,<span class="number">1</span>:<span class="string">'hua'</span>&#125;;<span class="comment">//类数组,有length属性，长度为2，第0个是lai，第1个是hua</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.slice.call(a,<span class="number">0</span>));<span class="comment">// ["lai", "hua"],调用数组的slice(0);</span></span><br></pre></td></tr></table></figure>

<p>这个例子作证了我们的观点 接下来看一个实用的例子，这个例子看懂了，这个知识点也就懂了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">func, thisArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nativeBind = <span class="built_in">Function</span>.prototype.bind;</span><br><span class="line">    <span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line">    <span class="keyword">if</span> (nativeBind &amp;&amp; func.bind === nativeBind) &#123;</span><br><span class="line">        <span class="keyword">return</span> nativeBind.apply(func, slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> args = slice.call(<span class="built_in">arguments</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> func.apply(thisArg, args.concat(slice.call(<span class="built_in">arguments</span>)));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这个式自己对bind的封装，可以兼容比较老的浏览器。</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>最后补充一个通用的将类数组转化成数组的方法，因为考虑到可能有些不支持Array.prototype.slice，或者环境冲突的情况将这个原生方法覆盖：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> toArray = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(s);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="keyword">var</span> arr = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = s.length; i &lt; len; i++)&#123;</span><br><span class="line">               arr[i] = s[i];</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/04/JS-中获取对象属性的-和-之间的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/04/JS-中获取对象属性的-和-之间的区别/" class="post-title-link" itemprop="url">JS 中获取对象属性的 . 和 [] 之间的区别</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-04 22:46:35 / 修改时间：22:50:02" itemprop="dateCreated datePublished" datetime="2019-12-04T22:46:35+08:00">2019-12-04</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-中获取对象属性的时候使用-和-之间的区别"><a href="#JS-中获取对象属性的时候使用-和-之间的区别" class="headerlink" title="JS 中获取对象属性的时候使用 . 和 [] 之间的区别"></a>JS 中获取对象属性的时候使用 . 和 [] 之间的区别</h1><p>JS 中有两种获取对象属性的方式: 点 <code>.</code> 操作符和<code>[]</code> 操作符</p>
<p>例如对象：<code>a = {}</code><br>有时候要用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a.name = <span class="string">'zhou'</span>;</span><br><span class="line">c = a.name;</span><br><span class="line"><span class="built_in">console</span>.log(c);<span class="comment">//zhou</span></span><br></pre></td></tr></table></figure>

<p>可是有时候却要用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[name] = <span class="string">'zhou'</span>;</span><br><span class="line">c = a[name];</span><br><span class="line"><span class="built_in">console</span>.log(c);<span class="comment">//zhou</span></span><br></pre></td></tr></table></figure>

<p>这两种写法有什么区别吗?<br>那为什么有时候只有前者能用或是后者能用？</p>
<hr>
<p>两种语法是等价的，但是中括号操作符在下面两种情况下依然是有效的：<br><strong>1.属性名不是一个有效的变量名时 :</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    auth:<span class="string">'zhou'</span>,</span><br><span class="line">    name:<span class="string">'城市的猫'</span>,</span><br><span class="line">    <span class="string">'money cost'</span>:<span class="number">200</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(book.name);            <span class="comment">//城市的猫</span></span><br><span class="line"><span class="built_in">console</span>.log(book.money cost);      <span class="comment">//error</span></span><br><span class="line"><span class="built_in">console</span>.log(book[<span class="string">'money cost'</span>])    <span class="comment">//200</span></span><br></pre></td></tr></table></figure>

<p><strong>2. 动态设置属性时:</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addr = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">var</span> customer = &#123;</span><br><span class="line">    address0 : <span class="string">'广州'</span>,</span><br><span class="line">    address1 : <span class="string">'上海'</span>,</span><br><span class="line">    address2 : <span class="string">'北京'</span>,</span><br><span class="line">    address3 : <span class="string">'杭州'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">  addr += customer[<span class="string">"address"</span> + i] ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(addr)  </span><br><span class="line"><span class="comment">//"广州上海北京杭州"</span></span><br><span class="line"><span class="comment">//取customer对象的address0,adddress1,address2,adddress3属性值，并将他们连接起来。</span></span><br></pre></td></tr></table></figure>

<p>所以对于点个括号的使用，我们有以下总结：<br>     •中括号运算符总是能代替点运输符，但是点运算符却不一定都能全部代替中括号运算符。<br>     • 中括号运算符可以用字符串变量的内容作为属性名，点运算符不能<br>     • 中括号运算符可以用哪个纯数字为属性名，点运算符不能<br>     • 中括号运算符可以用哪个js的关键字和保留字作为属性名，点运算符不能</p>
<p>即：<br>     当通过点运算符操作时，属性名用标识符来表示（点号后加由标识符组成的标准的变量名）；<br>     当通过中括号运算符操作时，属性名用字符串表示（字符串可以是动态的 obj[‘string’ + variable]）；<br> 当然从上面结论可以看到，中括号时可以放标识符或字符串的，但如果是标识符推荐用点啦，简单方便。</p>
<p><code>标识符：</code><br> 标识符指的是JavaScript中定义的符号，标识符可以由任意顺序的大小写字母、数字、下划线和$组成，但标识符不能数字开头，也不能是JavaScript中的保留字或关键字。</p>
<hr>
<p>为什么会这样呢？<br> 原理：<strong>对象里的属性都是以字符串的形式保存的。</strong><br> 验证：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证1：</span></span><br><span class="line"><span class="keyword">var</span> people = &#123; <span class="attr">name</span> : <span class="string">'zhou'</span> , <span class="attr">age</span> : <span class="number">12</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(people);</span><br><span class="line">[<span class="string">"name"</span>, <span class="string">"age"</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证2：</span></span><br><span class="line"><span class="keyword">var</span> people = &#123; <span class="attr">name</span> : <span class="string">'zhou'</span> , <span class="attr">age</span> : <span class="number">12</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(people.name); <span class="comment">//”zhou”</span></span><br><span class="line"><span class="built_in">console</span>.log(people[<span class="string">'name'</span>]);<span class="comment">//”zhou”</span></span><br><span class="line"><span class="built_in">console</span>.log(people [name]);<span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> people = &#123; <span class="attr">name</span> : <span class="string">'zhou'</span> , <span class="attr">age</span> : <span class="number">12</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> n1 = name;</span><br><span class="line"><span class="built_in">console</span>.log(people.n1);  <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(people[n1]);  <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(people[<span class="string">'n1'</span>])  <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> n2 = <span class="string">'name'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(people.n2);  <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(people[<span class="string">'n2'</span>]);  <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(people[n2]);  <span class="comment">//”zhou”</span></span><br></pre></td></tr></table></figure>

<p><strong>所以 , 不管是用people.name 还是people[n2] 最后都是以people[‘name’]去执行的。</strong></p>
<p>应用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr= [</span><br><span class="line">    &#123;<span class="attr">key</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="number">10</span>&#125;, </span><br><span class="line">    &#123;<span class="attr">key</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="number">20</span>&#125;, </span><br><span class="line">    &#123;<span class="attr">key</span>: <span class="number">3</span>, <span class="attr">value</span>: <span class="number">30</span>&#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> reformattedArray = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> rObj = &#123;&#125;;</span><br><span class="line">    rObj[obj.key] = obj.value;</span><br><span class="line">    <span class="keyword">return</span> rObj;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//[&#123;1:10&#125;, &#123;2:20&#125;, &#123;3:30&#125;]</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/原生JS-灵魂拷问/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/原生JS-灵魂拷问/" class="post-title-link" itemprop="url">原生JS 灵魂拷问</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 22:20:55" itemprop="dateCreated datePublished" datetime="2019-12-02T22:20:55+08:00">2019-12-02</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-04 22:37:30" itemprop="dateModified" datetime="2019-12-04T22:37:30+08:00">2019-12-04</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="第一篇-JS数据类型之问——概念篇"><a href="#第一篇-JS数据类型之问——概念篇" class="headerlink" title="第一篇: JS数据类型之问——概念篇"></a>第一篇: JS数据类型之问——概念篇</h2><h3 id="1-JS原始数据类型有哪些？引用数据类型有哪些？"><a href="#1-JS原始数据类型有哪些？引用数据类型有哪些？" class="headerlink" title="1.JS原始数据类型有哪些？引用数据类型有哪些？"></a>1.JS原始数据类型有哪些？引用数据类型有哪些？</h3><p>在 JS 中，存在着 7 种原始值，分别是：</p>
<ul>
<li>boolean</li>
<li>null</li>
<li>undefined</li>
<li>number</li>
<li>string</li>
<li>symbol</li>
<li>bigint</li>
</ul>
<p>引用数据类型: 对象Object（包含普通对象-Object，数组对象-Array，正则对象-RegExp，日期对象-Date，数学函数-Math，函数对象-Function）</p>
<h3 id="2-说出下面运行的结果，解释原因。"><a href="#2-说出下面运行的结果，解释原因。" class="headerlink" title="2.说出下面运行的结果，解释原因。"></a>2.说出下面运行的结果，解释原因。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">person</span>) </span>&#123;</span><br><span class="line">    person.age = <span class="number">26</span></span><br><span class="line">    person = &#123;</span><br><span class="line">        name: <span class="string">'zs'</span>,</span><br><span class="line">        age: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> person</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = &#123;</span><br><span class="line">    name: <span class="string">'wr'</span>,</span><br><span class="line">    age: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = test(p1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1) ? </span><br><span class="line"><span class="built_in">console</span>.log(p2) ?</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1: &#123;<span class="attr">name</span>: <span class="string">'wr'</span>, <span class="attr">age</span>: <span class="number">26</span>&#125;</span><br><span class="line">p2: &#123;<span class="attr">name</span>: <span class="string">'zs'</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>原因: 在函数传参的时候传递的是对象在堆中的内存地址值，test函数中的实参person是p1对象的内存地址，通过调用person.age = 26确实改变了p1的值，但随后person变成了另一块内存空间的地址，并且在最后将这另外一份内存空间的地址返回，赋给了p2。</p>
</blockquote>
<h3 id="3-null是对象吗？为什么？"><a href="#3-null是对象吗？为什么？" class="headerlink" title="3.null是对象吗？为什么？"></a>3.null是对象吗？为什么？</h3><p>结论: null不是对象。</p>
<p>解释: 虽然 typeof null 会输出 object，但是这只是 JS 存在的一个悠久 Bug。在 JS 的最初版本中使用的是 32 位系统，为了性能考虑使用低位存储变量的类型信息，000 开头代表是对象然而 null 表示为全零，所以将它错误的判断为 object 。</p>
<h3 id="4-’1’-toString-为什么可以调用？"><a href="#4-’1’-toString-为什么可以调用？" class="headerlink" title="4.’1’.toString()为什么可以调用？"></a>4.’1’.toString()为什么可以调用？</h3><p>其实在这个语句运行的过程中做了这样几件事情：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">'1'</span>)</span><br><span class="line">s.toString()</span><br><span class="line">s = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>第一步: 创建Object类实例。注意为什么不是String ？由于Symbol和BigInt的出现，对它们调用new都会报错，目前ES6规范也不建议用new来创建基本类型的包装类。</p>
<p>第二步: 调用实例方法。</p>
<p>第三步: 执行完方法立即销毁这个实例。</p>
<p>整个过程体现了 <code>基本包装类型</code>的性质，而基本包装类型恰恰属于基本数据类型，包括Boolean, Number和String。</p>
<blockquote>
<p>参考:《JavaScript高级程序设计(第三版)》P118</p>
</blockquote>
<h3 id="5-0-1-0-2为什么不等于0-3？"><a href="#5-0-1-0-2为什么不等于0-3？" class="headerlink" title="5.0.1+0.2为什么不等于0.3？"></a>5.0.1+0.2为什么不等于0.3？</h3><p>0.1和0.2在转换成二进制后会无限循环，由于标准位数的限制后面多余的位数会被截掉，此时就已经出现了精度的损失，相加后因浮点数小数位的限制而截断的二进制数字在转换为十进制就会变成0.30000000000000004。</p>
<h3 id="6-如何理解BigInt"><a href="#6-如何理解BigInt" class="headerlink" title="6.如何理解BigInt?"></a>6.如何理解BigInt?</h3><h4 id="什么是BigInt"><a href="#什么是BigInt" class="headerlink" title="什么是BigInt?"></a>什么是BigInt?</h4><blockquote>
<p>BigInt是一种新的数据类型，用于当整数值大于Number数据类型支持的范围时。这种数据类型允许我们安全地对 <code>大整数</code>执行算术操作，表示高分辨率的时间戳，使用大整数id，等等，而不需要使用库。</p>
</blockquote>
<h4 id="为什么需要BigInt"><a href="#为什么需要BigInt" class="headerlink" title="为什么需要BigInt?"></a>为什么需要BigInt?</h4><p>在JS中，所有的数字都以双精度64位浮点格式表示，那这会带来什么问题呢？</p>
<p>这导致JS中的Number无法精确表示非常大的整数，它会将非常大的整数四舍五入，确切地说，JS中的Number类型只能安全地表示-9007199254740991(-(2^53-1))和9007199254740991（(2^53-1)），任何超出此范围的整数值都可能失去精度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">999999999999999</span>) -&gt; <span class="number">10000000000000000</span></span><br></pre></td></tr></table></figure>

<p>同时也会有一定的安全性问题:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9007199254740992</span> === <span class="number">9007199254740993</span>;    <span class="comment">// → true 居然是true!</span></span><br></pre></td></tr></table></figure>

<h4 id="如何创建并使用BigInt？"><a href="#如何创建并使用BigInt？" class="headerlink" title="如何创建并使用BigInt？"></a>如何创建并使用BigInt？</h4><p>要创建BigInt，只需要在数字末尾追加n即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="number">9007199254740995n</span> );    <span class="comment">// → 9007199254740995n</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="number">9007199254740995</span> );     <span class="comment">// → 9007199254740996</span></span><br></pre></td></tr></table></figure>

<p>另一种创建BigInt的方法是用BigInt()构造函数、</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BigInt(<span class="string">"9007199254740995"</span>);    <span class="comment">// → 9007199254740995n</span></span><br></pre></td></tr></table></figure>

<p>简单使用如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10n</span> + <span class="number">20n</span> =&gt; <span class="number">30n</span></span><br><span class="line"><span class="number">10n</span> - <span class="number">20n</span> =&gt; <span class="number">-10n</span></span><br><span class="line">+<span class="number">10n</span> =&gt; <span class="built_in">TypeError</span>:Cannot convert a BigInt value to a number</span><br><span class="line"><span class="number">-10</span> =&gt; <span class="number">-10n</span></span><br><span class="line"><span class="number">10n</span> * <span class="number">20n</span> =&gt; <span class="number">200n</span></span><br><span class="line"><span class="number">20n</span> / <span class="number">10n</span> =&gt; <span class="number">2n</span></span><br><span class="line"><span class="number">23n</span> % <span class="number">10n</span>  =&gt; <span class="number">3n</span></span><br><span class="line"><span class="number">10n</span> ** <span class="number">3n</span> =&gt; <span class="number">1000n</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> x = <span class="number">10n</span></span><br><span class="line">++<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">11n</span></span><br><span class="line">--<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">-9n</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> x) bigint</span><br></pre></td></tr></table></figure>

<h4 id="值得警惕的点"><a href="#值得警惕的点" class="headerlink" title="值得警惕的点"></a>值得警惕的点</h4><ol>
<li>BigInt不支持一元加号运算符, 这可能是某些程序可能依赖于 + 始终生成 Number 的不变量，或者抛出异常。另外，更改 + 的行为也会破坏 asm.js代码。</li>
<li>因为隐式类型转换可能丢失信息，所以不允许在bigint和 Number 之间进行混合操作。当混合使用大整数和浮点数时，结果值可能无法由BigInt或Number精确表示。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> + <span class="number">10n</span> =&gt; <span class="built_in">TypeError</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>不能将BigInt传递给Web api和内置的 JS 函数，这些函数需要一个 Number 类型的数字。尝试这样做会报TypeError错误。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.max(<span class="number">2n</span>, <span class="number">4n</span>, <span class="number">6n</span>) =&gt; <span class="built_in">TypeError</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>当 Boolean 类型与 BigInt 类型相遇时，BigInt的处理方式与Number类似，换句话说，只要不是0n，BigInt就被视为truthy的值。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">0n</span>) &#123; <span class="comment">// 判断为false</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="number">3n</span>) &#123; <span class="comment">// 判断为true</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>元素都为BigInt的数组可以进行sort。</p>
</li>
<li><p>BigInt可以正常地进行位运算，如|、&amp;、&lt;&lt;、&gt;&gt;和^</p>
</li>
</ol>
<h2 id="第二篇-JS数据类型之问——检测篇"><a href="#第二篇-JS数据类型之问——检测篇" class="headerlink" title="第二篇: JS数据类型之问——检测篇"></a>第二篇: JS数据类型之问——检测篇</h2><h3 id="1-typeof-是否能正确判断类型？"><a href="#1-typeof-是否能正确判断类型？" class="headerlink" title="1. typeof 是否能正确判断类型？"></a>1. typeof 是否能正确判断类型？</h3><p>对于原始类型来说，除了 null 都可以调用typeof显示正确的类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span> =&gt; <span class="string">'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'1'</span> =&gt; <span class="string">'string'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> =&gt; <span class="string">'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> =&gt; <span class="string">'boolean'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>() =&gt; <span class="string">'symbol'</span></span><br></pre></td></tr></table></figure>

<p>但对于引用数据类型，除了函数之外，都会显示”object”。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> [] =&gt; <span class="string">'object'</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; =&gt; <span class="string">'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log =&gt; <span class="string">'function'</span></span><br></pre></td></tr></table></figure>

<p>因此采用typeof判断对象数据类型是不合适的，采用instanceof会更好，instanceof的原理是基于原型链的查询，只要处于原型链中，判断永远为true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person()</span><br><span class="line">p1 <span class="keyword">instanceof</span> Person <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">'hello world'</span></span><br><span class="line">str1 <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'hello world'</span>)</span><br><span class="line">str2 <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-instanceof能否判断基本数据类型？"><a href="#2-instanceof能否判断基本数据类型？" class="headerlink" title="2. instanceof能否判断基本数据类型？"></a>2. instanceof能否判断基本数据类型？</h3><p>能</p>
<p>比如下面这种方式:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrimitiveNumber</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> [<span class="built_in">Symbol</span>.hasInstance] (x) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">'number'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">111</span> <span class="keyword">instanceof</span> PrimitiveNumber) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>如果你不知道Symbol，可以看看MDN上关于hasInstance的解释。</p>
<p>其实就是自定义instanceof行为的一种方式，这里将原有的instanceof方法重定义，换成了typeof，因此能够判断基本数据类型。</p>
<h3 id="3-能不能手动实现一下instanceof的功能？"><a href="#3-能不能手动实现一下instanceof的功能？" class="headerlink" title="3. 能不能手动实现一下instanceof的功能？"></a>3. 能不能手动实现一下instanceof的功能？</h3><p>核心: 原型链的向上查找。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myInstanceof</span> (<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//基本数据类型直接返回false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> left !== <span class="string">'object'</span> || left === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">//getProtypeOf是Object对象自带的一个方法，能够拿到参数的原型对象</span></span><br><span class="line">    <span class="keyword">let</span> proto = <span class="built_in">Object</span>.getPrototypeOf(left)</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 查找到尽头，还没找到</span></span><br><span class="line">        <span class="keyword">if</span> (proto == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        <span class="comment">// 找到相同的原型对象</span></span><br><span class="line">        <span class="keyword">if</span> (proto == right.prototype) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeof(proto)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(myInstanceof(<span class="string">'111'</span>, <span class="built_in">String</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(myInstanceof(<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'111'</span>), <span class="built_in">String</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Object-is和-的区别？"><a href="#4-Object-is和-的区别？" class="headerlink" title="4. Object.is和===的区别？"></a>4. Object.is和===的区别？</h3><p>Object在严格等于的基础上修复了一些特殊情况下的失误，具体来说就是+0和-0，NaN和NaN。源码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x === y) &#123; </span><br><span class="line">        <span class="comment">//运行到1/x === 1/y的时候x和y都为0，但是1/+0 = +Infinity， 1/-0 = -Infinity, 是不一样的</span></span><br><span class="line">        <span class="keyword">return</span> x !== <span class="number">0</span> || y !== <span class="number">0</span> || y !== <span class="number">1</span> || <span class="number">1</span> / x === <span class="number">1</span> / y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//NaN===NaN是false,这是不对的，我们在这里做一个拦截，x !== x，那么一定是 NaN, y 同理</span></span><br><span class="line">        <span class="comment">//两个都是NaN的时候返回true</span></span><br><span class="line">        <span class="keyword">return</span> x !== x &amp;&amp; y !== y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第三篇-JS数据类型之问——转换篇"><a href="#第三篇-JS数据类型之问——转换篇" class="headerlink" title="第三篇: JS数据类型之问——转换篇"></a>第三篇: JS数据类型之问——转换篇</h2><h3 id="1-结果是什么？为什么？"><a href="#1-结果是什么？为什么？" class="headerlink" title="1. [] == ![]结果是什么？为什么？"></a>1. [] == ![]结果是什么？为什么？</h3><p>解析:</p>
<p>== 中，左右两边都需要转换为数字然后进行比较。</p>
<p>[]转换为数字为0。</p>
<p>![] 首先是转换为布尔值，由于[]作为一个引用类型转换为布尔值为true,</p>
<p>因此![]为false，进而在转换成数字，变为0。</p>
<p>0 == 0 ， 结果为true</p>
<h3 id="2-JS中类型转换有哪几种？"><a href="#2-JS中类型转换有哪几种？" class="headerlink" title="2. JS中类型转换有哪几种？"></a>2. JS中类型转换有哪几种？</h3><p>JS中，类型转换只有三种：</p>
<ul>
<li>转换成数字</li>
<li>转换成布尔值</li>
<li>转换成字符串</li>
</ul>
<p>转换具体规则如下:</p>
<blockquote>
<p>注意”Boolean 转字符串”这行结果指的是 true 转字符串的例子</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%8E%9F%E7%94%9Fjs%E7%81%B5%E9%AD%82%E6%8B%B7%E9%97%AE.webp" alt></p>
<h3 id="3-和-有什么区别？"><a href="#3-和-有什么区别？" class="headerlink" title="3. == 和 ===有什么区别？"></a>3. == 和 ===有什么区别？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">===叫做严格相等，是指：左右两边不仅值要相等，类型也要相等，例如<span class="string">'1'</span>===<span class="number">1</span>的结果是<span class="literal">false</span>，因为一边是string，另一边是number。</span><br></pre></td></tr></table></figure>

<p>==不像===那样严格，对于一般情况，只要值相等，就返回true，但==还涉及一些类型转换，它的转换规则如下：</p>
<ul>
<li>两边的类型是否相同，相同的话就比较值的大小，例如1==2，返回false</li>
<li>判断的是否是null和undefined，是的话就返回true</li>
<li>判断的类型是否是String和Number，是的话，把String类型转换成Number，再进行比较</li>
<li>判断其中一方是否是Boolean，是的话就把Boolean转换成Number，再进行比较</li>
<li>如果其中一方为Object，且另一方为String、Number或者Symbol，会将Object转换成字符串，再进行比较</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125; == <span class="literal">true</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;<span class="attr">a</span> :<span class="number">1</span> &#125; == <span class="string">'[object Object]'</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="4-对象转原始类型是根据什么流程运行的？"><a href="#4-对象转原始类型是根据什么流程运行的？" class="headerlink" title="4. 对象转原始类型是根据什么流程运行的？"></a>4. 对象转原始类型是根据什么流程运行的？</h3><p>对象转原始类型，会调用内置的[ToPrimitive]函数，对于该函数而言，其逻辑如下：</p>
<ol>
<li>如果Symbol.toPrimitive()方法，优先调用再返回</li>
<li>调用valueOf()，如果转换为原始类型，则返回</li>
<li>调用toString()，如果转换为原始类型，则返回</li>
<li>如果都没有返回原始类型，会报错</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    value: <span class="number">3</span>, </span><br><span class="line">    valueOf() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">    &#125;,</span><br><span class="line">    toString () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'5'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive] () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj + <span class="number">1</span>) <span class="comment">// 7</span></span><br></pre></td></tr></table></figure>

<h3 id="5-如何让if-a-1-amp-amp-a-2-条件成立？"><a href="#5-如何让if-a-1-amp-amp-a-2-条件成立？" class="headerlink" title="5. 如何让if(a == 1 &amp;&amp; a == 2)条件成立？"></a>5. 如何让if(a == 1 &amp;&amp; a == 2)条件成立？</h3><p>其实就是上一个问题的应用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    value: <span class="number">0</span>,</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.value ++</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">this</span>.value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="第四篇-谈谈你对闭包的理解"><a href="#第四篇-谈谈你对闭包的理解" class="headerlink" title="第四篇: 谈谈你对闭包的理解"></a>第四篇: 谈谈你对闭包的理解</h2><h3 id="什么是闭包？"><a href="#什么是闭包？" class="headerlink" title="什么是闭包？"></a>什么是闭包？</h3><p>红宝书(p178)上对于闭包的定义：闭包是指有权访问另外一个函数作用域中的变量的函数，</p>
<ol>
<li><code>MDN 对闭包的定义为：闭包是指那些能够访问自由变量的函数。</code></li>
<li></li>
<li><code>（其中自由变量，指在函数中使用的，但既不是函数参数arguments也不是函数的局部变量的变量，其实就是另外一个函数作用域中的变量。）</code></li>
</ol>
<h3 id="闭包产生的原因"><a href="#闭包产生的原因" class="headerlink" title="闭包产生的原因?"></a>闭包产生的原因?</h3><p>首先要明白作用域链的概念，其实很简单，在ES5中只存在两种作用域————全局作用域和函数作用域， <code>当访问一个变量时，解释器会首先在当前作用域查找标示符，如果没有找到，就去父作用域找，直到找到该变量的标示符或者不在父作用域中，这就是作用域链</code>，值得注意的是，每一个子函数都会拷贝上级的作用域，形成一个作用域的链条。比如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">    f2()</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">3</span></span><br><span class="line">        <span class="built_in">console</span>.log(a) <span class="comment">// 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1()</span><br></pre></td></tr></table></figure>

<p>在这段代码中，f1的作用域指向有全局作用域(window)和它本身，而f2的作用域指向全局作用域(window)、f1和它本身。而且作用域是从最底层向上找，直到找到全局作用域window为止，如果全局还没有的话就会报错。就这么简单一件事情！</p>
<p>闭包产生的本质就是，当前环境中存在指向父级作用域的引用。还是举上面的例子:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a) <span class="comment">// 2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = f1()</span><br><span class="line">x()</span><br></pre></td></tr></table></figure>

<p>这里x会拿到父级作用域中的变量，输出2。因为在当前环境中，含有对f2的引用，f2恰恰引用了window、f1和f2的作用域。因此f2可以访问到f1的作用域的变量。</p>
<p>那是不是只有返回函数才算是产生了闭包呢？、</p>
<p>回到闭包的本质，我们只需要让父级作用域的引用存在即可，因此我们还可以这么做：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f3</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">    f3 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a) <span class="comment">// 1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line">f3() <span class="comment">//  1</span></span><br></pre></td></tr></table></figure>

<p>让f1执行，给f3赋值后，等于说现在 <code>f3拥有了window、f1和f3本身这几个作用域的访问权限</code>，还是自底向上查找， <code>最近是在f1</code>中找到了a,因此输出2。</p>
<p>在这里是外面的变量 <code>f3存在着父级作用域的引用</code>，因此产生了闭包，形式变了，本质没有改变。</p>
<h3 id="闭包有哪些表现形式"><a href="#闭包有哪些表现形式" class="headerlink" title="闭包有哪些表现形式?"></a>闭包有哪些表现形式?</h3><p>明白了本质之后，我们就来看看，在真实的场景中，究竟在哪些地方能体现闭包的存在？</p>
<ol>
<li>返回一个函数。刚刚已经举例。</li>
<li>作为函数参数传递</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">baz</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a)</span><br><span class="line">    &#125;</span><br><span class="line">    bar(baz)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这就是 闭包</span></span><br><span class="line">    fn()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// 输出 2 而不是 1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>在定时器、事件监听、Ajax请求、跨窗口通信、Web Workers或者任何异步中，只要使用了回调函数，实际上就是在使用闭包。</li>
</ol>
<p>以下的闭包保存的仅仅是window和当前作用域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定时器</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timerHandler</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">0</span>)</span><br><span class="line">&#125;, <span class="number">1500</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件监听</span></span><br><span class="line">$(<span class="string">'#app'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">666</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>IIFE(立即执行函数表达式)创建闭包, 保存了 <code>全局作用域window</code>和 <code>当前函数的作用域</code>，因此可以全局的变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i ++) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i) <span class="comment">// 6</span></span><br><span class="line">    &#125;, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为什么会全部输出6？如何改进，让它输出1，2，3，4，5？(方法越多越好)</p>
<p>因为setTimeout为宏任务，由于JS中单线程eventLoop机制，在主线程同步任务执行完后才去执行宏任务，因此循环结束后setTimeout中的回调才依次执行，但输出i的时候当前作用域没有，往上一级再找，发现了i,此时循环已经结束，i变成了6。因此会全部输出6。</p>
<p>解决方法：</p>
<p>1、利用IIFE(立即执行函数表达式)当每次for循环时，把此时的i变量传递到定时器中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;= <span class="number">5</span>; i ++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(j)</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、给定时器传入第三个参数, 作为timer函数的第一个函数参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; = <span class="number">5</span>; i ++) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(j) <span class="comment">// 6</span></span><br><span class="line">    &#125;, <span class="number">1</span>, i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、使用ES6中的let</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; = <span class="number">5</span>; i ++) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i)</span><br><span class="line">    &#125;, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>let使JS发生革命性的变化，让JS有函数作用域变为了块级作用域，用let后作用域链不复存在。代码的作用域以块级为单位，以上面代码为例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// i = 1</span></span><br><span class="line">&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">0</span>) </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// i = 2</span></span><br><span class="line">&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此能输出正确的结果。</p>
<h2 id="第五篇-谈谈你对原型链的理解"><a href="#第五篇-谈谈你对原型链的理解" class="headerlink" title="第五篇: 谈谈你对原型链的理解"></a>第五篇: 谈谈你对原型链的理解</h2><h3 id="1-原型对象和构造函数有何关系？"><a href="#1-原型对象和构造函数有何关系？" class="headerlink" title="1.原型对象和构造函数有何关系？"></a>1.原型对象和构造函数有何关系？</h3><p>在JavaScript中，每当定义一个函数数据类型(普通函数、类)时候，都会天生自带一个prototype属性，这个属性指向函数的原型对象。</p>
<p>当函数经过new调用时，这个函数就成为了构造函数，返回一个全新的实例对象，这个实例对象有一个<strong>proto</strong>属性，指向构造函数的原型对象。</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%8E%9F%E7%94%9Fjs%E7%81%B5%E9%AD%82%E6%8B%B7%E9%97%AE-2.webp" alt="js原型对象和构造函数的关系"></p>
<h3 id="2-能不能描述一下原型链？"><a href="#2-能不能描述一下原型链？" class="headerlink" title="2.能不能描述一下原型链？"></a>2.能不能描述一下原型链？</h3><p>JavaScript对象通过prototype指向父类对象，直到指向Object对象为止，这样就形成了一个原型指向的链条, 即原型链。</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%8E%9F%E7%94%9Fjs%E7%81%B5%E9%AD%82%E6%8B%B7%E9%97%AE-3.webp" alt="描述原型链"></p>
<ul>
<li>对象的 hasOwnProperty() 来检查对象自身中是否含有该属性</li>
<li>使用 in 检查对象中是否含有某个属性时，如果对象中没有但是原型链中有，也会返回 true</li>
</ul>
<h2 id="第六篇-JS如何实现继承？"><a href="#第六篇-JS如何实现继承？" class="headerlink" title="第六篇: JS如何实现继承？"></a>第六篇: JS如何实现继承？</h2><h3 id="第一种-借助call"><a href="#第一种-借助call" class="headerlink" title="第一种: 借助call"></a>第一种: 借助call</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Perosn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'person1'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Perosn1.call(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">'child1'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Child1)   <span class="comment">// &#123;name: 'person1', type: 'child1'&#125;</span></span><br></pre></td></tr></table></figure>

<p>这样写的时候子类虽然能够拿到父类的属性值，但是问题是父类原型对象中一旦存在方法那么子类无法继承。那么引出下面的方法。</p>
<h3 id="第二种-借助原型链"><a href="#第二种-借助原型链" class="headerlink" title="第二种: 借助原型链"></a>第二种: 借助原型链</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'person2'</span></span><br><span class="line">    <span class="keyword">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">'child2'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Child2.prototype = <span class="keyword">new</span> Person2()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Child2())</span><br><span class="line"><span class="keyword">let</span> c1 = <span class="keyword">new</span> Child2()</span><br><span class="line"><span class="built_in">console</span>.log(c1.name, c1.play)  <span class="comment">// 'person2', '[1,2,3]'</span></span><br></pre></td></tr></table></figure>

<p>看似没有问题，父类的方法和属性都能够访问，但实际上有一个潜在的不足。举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Child2()</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> Child2()</span><br><span class="line">s1.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s2.play) <span class="comment">// '[1,2,3,4]'</span></span><br></pre></td></tr></table></figure>

<p>明明我只改变了s1的play属性，为什么s2也跟着变了呢？很简单，因为两个实例使用的是同一个原型对象。</p>
<p>那么还有更好的方式么？</p>
<h3 id="第三种：将前两种组合"><a href="#第三种：将前两种组合" class="headerlink" title="第三种：将前两种组合"></a>第三种：将前两种组合</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'person3'</span></span><br><span class="line">    <span class="keyword">this</span>.play = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person3.call(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">'child3'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Child3.prototype = <span class="keyword">new</span> Person3()</span><br><span class="line"><span class="keyword">var</span> s3 = <span class="keyword">new</span> Child3()</span><br><span class="line"><span class="keyword">var</span> s4 = <span class="keyword">new</span> Child3()</span><br><span class="line">s3.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s3.play, s4.play)  <span class="comment">// '[1,2,3,4]', '[1,2,3]'</span></span><br></pre></td></tr></table></figure>

<p>之前的问题都得以解决。但是这里又徒增了一个新问题，那就是Parent3的构造函数会多执行了一次（Child3.prototype = new Parent3();）。这是我们不愿看到的。那么如何解决这个问题？</p>
<h3 id="第四种-组合继承的优化1"><a href="#第四种-组合继承的优化1" class="headerlink" title="第四种: 组合继承的优化1"></a>第四种: 组合继承的优化1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person4</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'person4'</span></span><br><span class="line">    <span class="keyword">this</span>.play = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child4</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person4.call(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">'child4'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Child4.prototype = Person4.prototype</span><br></pre></td></tr></table></figure>

<p>这里将父类原型对象直接给到子类，父类构造函数只执行一次，而且父类属性和方法均能访问，但是我们来测试一下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Child4()</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> Child4()</span><br><span class="line"><span class="built_in">console</span>.log(s1) <span class="comment">// &#123;name: 'person4', play: [1,2,3], type: 'child4'&#125;</span></span><br></pre></td></tr></table></figure>

<p>控制台显示</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%8E%9F%E7%94%9Fjs%E7%81%B5%E9%AD%82%E6%8B%B7%E9%97%AE-5.webp" alt="控制台显示-1"></p>
<p>子类实例的构造函数是Parent4，显然这是不对的，应该是Child4。</p>
<h3 id="第五种-最推荐使用-组合继承的优化1"><a href="#第五种-最推荐使用-组合继承的优化1" class="headerlink" title="第五种(最推荐使用): 组合继承的优化1"></a>第五种(最推荐使用): 组合继承的优化1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person5</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'person5'</span></span><br><span class="line">    <span class="keyword">this</span>.play = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child5</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person5.call(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">'child5'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Child5.prototype = <span class="built_in">Object</span>.create(Person5.prototype)</span><br><span class="line">Child5.prototype.constructor = Child5</span><br></pre></td></tr></table></figure>

<p>这是最推荐的一种方式，接近完美的继承，它的名字也叫做寄生组合继承。</p>
<h3 id="ES6的extends被编译后的JavaScript代码"><a href="#ES6的extends被编译后的JavaScript代码" class="headerlink" title="ES6的extends被编译后的JavaScript代码"></a>ES6的extends被编译后的JavaScript代码</h3><p>ES6的代码最后都是要在浏览器上能够跑起来的，这中间就利用了babel这个编译工具，将ES6的代码编译成ES5让一些不支持新语法的浏览器也能运行。</p>
<p>那最后编译成了什么样子呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_possibleConstructorReturn</span> (<span class="params">self, call</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">return</span> call &amp;&amp; (<span class="keyword">typeof</span> call === <span class="string">'object'</span> || <span class="keyword">typeof</span> call === <span class="string">'function'</span>) ? call : self</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_inherits</span> (<span class="params">subClass, superClass</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    subClass.prototype = <span class="built_in">Object</span>.create(subClass &amp;&amp; superClass.prototype, &#123;</span><br><span class="line">        <span class="keyword">constructor</span>: &#123;</span><br><span class="line">            value: subClass,</span><br><span class="line">            enumerable: <span class="literal">false</span>,</span><br><span class="line">            writable: <span class="literal">true</span>,</span><br><span class="line">            configurable: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (subClass) <span class="built_in">Object</span>.setPrototypeOf ? <span class="built_in">Object</span>.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Parent = <span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证是否是 Parent 创造出来的 this</span></span><br><span class="line">    _classCallCheck(<span class="keyword">this</span>, Parent)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Child = (<span class="function"><span class="keyword">function</span>(<span class="params">_Parent</span>) </span>&#123;</span><br><span class="line">    _inherits(Child, _Parent)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        _classCallCheck(<span class="keyword">this</span>, Child)</span><br><span class="line">        <span class="keyword">return</span> _possibleConstructorReturn(<span class="keyword">this</span>, (Child.__proto__ || <span class="built_in">Object</span>.getPrototypeOf(Child).apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Child</span><br><span class="line">&#125;)(Parent)</span><br></pre></td></tr></table></figure>

<p>核心是_inherits函数，可以看到它采用的依然也是第五种方式————寄生组合继承方式，同时证明了这种方式的成功。不过这里加了一个Object.setPrototypeOf(subClass, superClass)，这是用来干啥的呢？</p>
<p>答案是用来继承父类的静态方法。这也是原来的继承方式疏忽掉的地方。</p>
<blockquote>
<p>追问: 面向对象的设计一定是好的设计吗？</p>
</blockquote>
<p>不一定。从继承的角度说，这一设计是存在巨大隐患的。</p>
<h3 id="从设计思想上谈谈继承本身的问题"><a href="#从设计思想上谈谈继承本身的问题" class="headerlink" title="从设计思想上谈谈继承本身的问题"></a>从设计思想上谈谈继承本身的问题</h3><p>假如现在有不同品牌的车，每辆车都有drive、music、addOil这三个方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    drive () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'开车了'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    music () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'放歌了'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    addOil () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'加油了'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">otherCar</span> <span class="keyword">extends</span> <span class="title">Car</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>现在可以实现车的功能，并且以此去扩展不同的车。</p>
<p>但是问题来了，新能源汽车也是车，但是它并不需要addOil(加油)。</p>
<p>如果让新能源汽车的类继承Car的话，也是有问题的，俗称”大猩猩和香蕉”的问题。大猩猩手里有香蕉，但是我现在明明只需要香蕉，却拿到了一只大猩猩。也就是说加油这个方法，我现在是不需要的，但是由于继承的原因，也给到子类了。</p>
<blockquote>
<p>继承的最大问题在于：无法决定继承哪些属性，所有属性都得继承。</p>
</blockquote>
<p>当然你可能会说，可以再创建一个父类啊，把加油的方法给去掉，但是这也是有问题的，一方面父类是无法描述所有子类的细节情况的，为了不同的子类特性去增加不同的父类， <code>代码势必会大量重复</code>，另一方面一旦子类有所变动，父类也要进行相应的更新， <code>代码的耦合性太高</code>，维护性不好。</p>
<p>那如何来解决继承的诸多问题呢？</p>
<p>用组合，这也是当今编程语法发展的趋势，比如golang完全采用的是面向组合的设计方式。</p>
<p>顾名思义，面向组合就是先设计一系列零件，然后将这些零件进行拼装，来形成不同的实例或者类。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drive</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'开车了'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">music</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'听歌了'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOil</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'加油了'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = compose(drive, music, addOil)</span><br><span class="line"><span class="keyword">let</span> newEnergyCar  = compose(drive, music)</span><br></pre></td></tr></table></figure>

<p>代码干净，复用性也很好。这就是面向组合的设计方式。</p>
<p>参考出处:</p>
<p>ES5实现继承那些事</p>
<p>重学JS系列:聊聊继承</p>
<p>JS最新基本数据类型:BigInt(译)</p>
<p>yck前端面试之道</p>
<p>  <a href="https://mp.weixin.qq.com/s?__biz=MzI4NDYxNTM0OQ==&mid=2247484290&idx=1&sn=26b23f21dcf039475f4475db33763934&chksm=ebf9f458dc8e7d4edf74e3987be8bf5dd4c6aeed995e0dfd3739f9b6e21b149995feb3ce9ba9&mpshare=1&scene=1&srcid=111121LXW6I963MP5lBl22Vj&sharer_sharetime=1573522278024&sharer_shareid=98eb99fae9cd4538d3b529f0e32ecae5&key=cc71a6f79ee0f17487282fe93ccb10d20351081d76e41b16271debf0d2b6c8f6ec2754ae502008a0586f738aa84bf886c768ba2dbf5e74753e58b7db3939055c6cd18b84ea87283746086029f1bb80b6&ascene=1&uin=MTUwMjEzNDI3NQ%3D%3D&devicetype=Windows+10&version=62070158&lang=zh_CN&exportkey=AYpG2ejwozJPkwG9cq9MjXs%3D&pass_ticket=xkzNoP55fnFctkcYTyBzYi6NTqkBjJNw%2FHUmLeNbzgtXX7R5u5UtsNF23unCR86y" target="_blank" rel="noopener">原文地址</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/前端小技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/前端小技巧/" class="post-title-link" itemprop="url">前端小技巧</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 22:12:24 / 修改时间：22:20:14" itemprop="dateCreated datePublished" datetime="2019-12-02T22:12:24+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前端常用的小技巧汇总"><a href="#前端常用的小技巧汇总" class="headerlink" title="前端常用的小技巧汇总"></a>前端常用的小技巧汇总</h1><h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">	 <span class="keyword">var</span> _obj = <span class="built_in">JSON</span>.stringify(obj),objClone = <span class="built_in">JSON</span>.parse(_obj);</span><br><span class="line">	 <span class="keyword">return</span> objClone</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">	 <span class="keyword">var</span> _obj = <span class="built_in">JSON</span>.stringify(obj),objClone = <span class="built_in">JSON</span>.parse(_obj);</span><br><span class="line">	 <span class="keyword">return</span> objClone</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可拷贝类型 true/false</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">	str:<span class="string">'a'</span>,<span class="comment">//true</span></span><br><span class="line">	number:<span class="number">1</span>,<span class="comment">//true</span></span><br><span class="line">	arr:[<span class="string">"1"</span>,<span class="string">"2"</span>],<span class="comment">//true</span></span><br><span class="line">	isTrue:<span class="literal">true</span>,<span class="comment">//true</span></span><br><span class="line">	<span class="built_in">isNaN</span>:<span class="literal">NaN</span>,<span class="comment">//fasle</span></span><br><span class="line">	isUndefined:<span class="literal">undefined</span>,<span class="comment">//fasle</span></span><br><span class="line">	func:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,<span class="comment">//fasle</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = deepClone(obj)</span><br><span class="line"></span><br><span class="line">obj2.name = <span class="string">"b"</span></span><br><span class="line">obj2.number = <span class="number">2</span></span><br><span class="line">obj2.arr[<span class="number">0</span>] = <span class="string">"10"</span></span><br><span class="line">obj2.isTrue = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br><span class="line"><span class="built_in">console</span>.log(obj2)</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%B7%B1%E6%8B%B7%E8%B4%9D.jpg" alt></p>
<h2 id="清除火狐浏览器无图片时的边框"><a href="#清除火狐浏览器无图片时的边框" class="headerlink" title="清除火狐浏览器无图片时的边框"></a>清除火狐浏览器无图片时的边框</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img[src=<span class="string">""</span>],<span class="attr">img</span>:not([src])&#123;</span><br><span class="line">    opacity:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取URL参数"><a href="#获取URL参数" class="headerlink" title="获取URL参数"></a>获取URL参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlParam</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r !== <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">decodeURI</span>(r[<span class="number">2</span>]); <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="删除指定字符后的所有字符"><a href="#删除指定字符后的所有字符" class="headerlink" title="删除指定字符后的所有字符"></a>删除指定字符后的所有字符</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"112233-abab"</span></span><br><span class="line"><span class="keyword">var</span> b = a.substring(<span class="number">0</span>,a.indexOf(<span class="string">'-'</span>))<span class="comment">//112233</span></span><br></pre></td></tr></table></figure>

<h2 id="在指定位置插入字符"><a href="#在指定位置插入字符" class="headerlink" title="在指定位置插入字符"></a>在指定位置插入字符</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"201902"</span></span><br><span class="line"><span class="keyword">var</span> b = a.slice(<span class="number">0</span>,<span class="number">4</span>) + <span class="string">"-"</span> + a.slice(<span class="number">4</span>) <span class="comment">//"2019-02"</span></span><br></pre></td></tr></table></figure>

<h2 id="删除字符串中的所有空格"><a href="#删除字符串中的所有空格" class="headerlink" title="删除字符串中的所有空格"></a>删除字符串中的所有空格</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"6221 6223 3221 54200"</span></span><br><span class="line"><span class="keyword">var</span> b = a.replace(<span class="regexp">/\s*/g</span>,<span class="string">""</span>) <span class="comment">//"62216223322154200"</span></span><br></pre></td></tr></table></figure>

<h2 id="校验手机号"><a href="#校验手机号" class="headerlink" title="校验手机号"></a>校验手机号</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> phone = <span class="string">"13622993358"</span></span><br><span class="line"><span class="keyword">if</span> (!(<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"phone error"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="随机生成1-100数字"><a href="#随机生成1-100数字" class="headerlink" title="随机生成1-100数字"></a>随机生成1-100数字</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">100</span> +<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h2 id="复制指定文字到剪切板"><a href="#复制指定文字到剪切板" class="headerlink" title="复制指定文字到剪切板"></a>复制指定文字到剪切板</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">text,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">document</span>.execCommand(<span class="string">'Copy'</span>))&#123;</span><br><span class="line">    <span class="comment">//创建input</span></span><br><span class="line">    <span class="keyword">var</span> inputZ = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">    <span class="comment">//添加Id,用于后续操作</span></span><br><span class="line">    inputZ.setAttribute(<span class="string">'id'</span>,<span class="string">'inputCopy'</span>);</span><br><span class="line">    <span class="comment">//获取传入的值</span></span><br><span class="line">    inputZ.value = text;</span><br><span class="line">    <span class="comment">//创建的input添加到body</span></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(inputZ);</span><br><span class="line">    <span class="comment">//选中input中的值(使用前面的Id)</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'inputCopy'</span>).select();</span><br><span class="line">    <span class="comment">//把值复制下来</span></span><br><span class="line">    <span class="built_in">document</span>.execCommand(<span class="string">'Copy'</span>)</span><br><span class="line">    alert(<span class="string">'複製成功'</span>);</span><br><span class="line">    <span class="comment">//删除添加的input</span></span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(inputZ);</span><br><span class="line">    <span class="comment">// 成功回調1</span></span><br><span class="line">    callback(<span class="number">1</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// 失敗回調2</span></span><br><span class="line">    callback(<span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//必须在触发事件中调用(如点击事件)</span></span><br><span class="line">copy(<span class="string">"www.supersjz.cn"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">type</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(type == <span class="number">1</span>)&#123;<span class="built_in">console</span>.log(<span class="string">"复制成功"</span>)&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="用callback做类似装饰器的功能-校验参数必填"><a href="#用callback做类似装饰器的功能-校验参数必填" class="headerlink" title="用callback做类似装饰器的功能(校验参数必填)"></a>用callback做类似装饰器的功能(校验参数必填)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 把所有校验都放在这个函数中</span></span><br><span class="line">	name = <span class="built_in">document</span>.getElementById(<span class="string">"name"</span>).value</span><br><span class="line">	<span class="keyword">if</span>(!name)&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"请输入姓名"</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	callback()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存的方法跟下一步的方法调用同个过滤器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'save'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 添加过滤器</span></span><br><span class="line">	filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"校验通过，继续执行"</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'next'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 添加过滤器</span></span><br><span class="line">	filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"校验通过，继续执行"</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="笛卡尔乘积-函ES6语法"><a href="#笛卡尔乘积-函ES6语法" class="headerlink" title="笛卡尔乘积(函ES6语法)"></a>笛卡尔乘积(函ES6语法)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	参数：</span></span><br><span class="line"><span class="comment">*	单维数组结构 ["红色","蓝色"]</span></span><br><span class="line"><span class="comment">*	多维数组结构 [["红色","蓝色"],["大号","小号"],["圆形","方形"]]</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">descartes</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 判断是否多维数组结构</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> arr[<span class="number">0</span>] == <span class="string">'object'</span>)&#123; </span><br><span class="line">    	<span class="keyword">return</span> [].reduce.call(arr, <span class="function"><span class="keyword">function</span> (<span class="params">col, set</span>) </span>&#123;</span><br><span class="line">	        <span class="keyword">let</span> res = [];</span><br><span class="line">	        col.forEach(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">	            <span class="keyword">set</span>.forEach(s =&gt; &#123;</span><br><span class="line">	                <span class="keyword">let</span> t = [].concat(<span class="built_in">Array</span>.isArray(c) ? c : [c]);</span><br><span class="line">	                t.push(s);</span><br><span class="line">	                res.push(t);</span><br><span class="line">	            &#125;)</span><br><span class="line">	        &#125;);</span><br><span class="line">	        <span class="keyword">return</span> res;</span><br><span class="line">	    &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    	<span class="comment">// 单维数组直接返回</span></span><br><span class="line">    	<span class="keyword">return</span> arr;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> list = [[<span class="string">"红色"</span>,<span class="string">"蓝色"</span>],[<span class="string">"大号"</span>,<span class="string">"小号"</span>],[<span class="string">"圆形"</span>,<span class="string">"方形"</span>]]</span><br><span class="line"><span class="keyword">var</span> descartesList = descartes(list)</span><br><span class="line"><span class="built_in">console</span>.log(descartesList)</span><br></pre></td></tr></table></figure>

<h2 id="笛卡尔乘积-原生JS"><a href="#笛卡尔乘积-原生JS" class="headerlink" title="笛卡尔乘积(原生JS)"></a>笛卡尔乘积(原生JS)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	参数：</span></span><br><span class="line"><span class="comment">*	单维数组结构 ["红色","蓝色"]</span></span><br><span class="line"><span class="comment">*	多维数组结构 [["红色","蓝色"],["大号","小号"],["圆形","方形"]]</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">// 笛卡儿积组合</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">descartes</span>(<span class="params">list</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> point = &#123;&#125;;  </span><br><span class="line">	<span class="keyword">var</span> result = [];  </span><br><span class="line">	<span class="keyword">var</span> pIndex = <span class="literal">null</span>;  </span><br><span class="line">	<span class="keyword">var</span> tempCount = <span class="number">0</span>;  </span><br><span class="line">	<span class="keyword">var</span> temp  = [];  </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> index <span class="keyword">in</span> list)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">typeof</span> list[index] == <span class="string">'object'</span>)&#123;  </span><br><span class="line">			point[index] = &#123;<span class="string">'parent'</span>:pIndex,<span class="string">'count'</span></span><br><span class="line">			pIndex = index;  </span><br><span class="line">		&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line">	<span class="comment">//单维度数据结构直接返回</span></span><br><span class="line">	<span class="keyword">if</span>(pIndex == <span class="literal">null</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> list;  </span><br><span class="line">	&#125;  </span><br><span class="line">	<span class="comment">//动态生成笛卡尔积</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>)&#123;  </span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> index <span class="keyword">in</span> list)&#123;  </span><br><span class="line">			tempCount = point[index][<span class="string">'count'</span>];  </span><br><span class="line">			temp.push(list[index][tempCount]);  </span><br><span class="line">		&#125;</span><br><span class="line">		result.push(temp);</span><br><span class="line">		temp = [];</span><br><span class="line">		<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(point[index][<span class="string">'count'</span>]+<span class="number">1</span> &gt;= list[inde</span><br><span class="line">				point[index][<span class="string">'count'</span>] = <span class="number">0</span>;</span><br><span class="line">				pIndex = point[index][<span class="string">'parent'</span>];</span><br><span class="line">				<span class="keyword">if</span>(pIndex == <span class="literal">null</span>)&#123;</span><br><span class="line">					<span class="keyword">return</span> result;</span><br><span class="line">				&#125;</span><br><span class="line">				index = pIndex;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				point[index][<span class="string">'count'</span>]++;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> list = [[<span class="string">"红色"</span>,<span class="string">"蓝色"</span>],[<span class="string">"大号"</span>,<span class="string">"小号"</span>],[<span class="string">"圆形"</span>,<span class="string">"方形"</span>]]</span><br><span class="line"><span class="keyword">var</span> descartesList = descartes(list)</span><br><span class="line"><span class="built_in">console</span>.log(descartesList)</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%89%8D%E7%AB%AF%E5%B0%8F%E6%8A%80%E5%B7%A7-%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF.jpg" alt></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/原生JS事件绑定-onclick和addEventListener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/原生JS事件绑定-onclick和addEventListener/" class="post-title-link" itemprop="url">原生JS事件绑定 onclick和addEventListener</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 22:02:10 / 修改时间：22:08:12" itemprop="dateCreated datePublished" datetime="2019-12-02T22:02:10+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="原生JS事件绑定-onclick和addEventListener"><a href="#原生JS事件绑定-onclick和addEventListener" class="headerlink" title="原生JS事件绑定 onclick和addEventListener"></a>原生JS事件绑定 onclick和addEventListener</h1><h2 id="onclick绑定方式"><a href="#onclick绑定方式" class="headerlink" title="onclick绑定方式"></a>onclick绑定方式</h2><p>优点：</p>
<ul>
<li>简洁</li>
<li>处理事件的 <code>this</code> 关键字指向当前元素</li>
</ul>
<p>缺点：</p>
<ul>
<li>不能对事件捕获或事件冒泡进行控制，只能使用事件冒泡，无法切换成事件捕获</li>
<li>一次只能对一个元素绑定一个事件处理程序，当使用window.onload属性时，会覆盖采用相同方法所绑定的事件代码</li>
</ul>
<blockquote>
<p>this与event差异不大 推荐使用event对象 这样你总是可以拥有全部的可用信息</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.target.innerHTML);<span class="comment">//event.target指向的是dd元素，以及他的所有信息</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);<span class="comment">//this也是指向dd元素，包含他的可用信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：有时也会有需要使用this的情况<br>当需要鼠标移入和移出的时候 event会触发该事件每一个子元素</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dd.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.backgroundColor = <span class="string">"red"</span>;<span class="comment">//不会改变子元素</span></span><br><span class="line">    event.target.style.backgroundColor = <span class="string">'red'</span>;<span class="comment">//会改变子元素</span></span><br><span class="line">&#125;;</span><br><span class="line">dd.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.backgroundColor = <span class="string">"green"</span></span><br><span class="line">    event.target.style.backgroundColor=<span class="string">"green"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="addEventListener绑定方式"><a href="#addEventListener绑定方式" class="headerlink" title="addEventListener绑定方式"></a>addEventListener绑定方式</h2><p>优点：</p>
<ul>
<li>可以支持事件处理的捕获阶段，也可以支持时间处理的冒泡阶段，两个阶段都是通过addEventListener最后一个参数设置为false(默认值，表示事件冒泡)或者true(表示事件捕获)来切换</li>
<li>事件处理 this与onclick一样</li>
<li>事件处理 this与onclick一样</li>
<li>你可以为某个元素绑定多个事件而不会覆盖之前绑定的处理程序 （按照顺序执行）</li>
</ul>
<p>缺点：</p>
<ul>
<li>IE8以下不支持</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dd.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);</span><br><span class="line">    <span class="built_in">console</span>.log( e.target.innerHTML );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="解除事件绑定"><a href="#解除事件绑定" class="headerlink" title="解除事件绑定"></a>解除事件绑定</h2><h3 id="对于-onclick"><a href="#对于-onclick" class="headerlink" title="对于 onclick"></a>对于 onclick</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="对于-addEventListener"><a href="#对于-addEventListener" class="headerlink" title="对于 addEventListener"></a>对于 addEventListener</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickShow</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">'clickShow'</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeShow</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">'removeShow'</span> );</span><br><span class="line">    dd.removeEventListener(<span class="string">'click'</span>,clickShow,<span class="literal">false</span>/<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">dd.addEventListener(<span class="string">'click'</span>,clickShow,flase/<span class="literal">true</span>);<span class="comment">//当第三个参数flase/true存在的时候 那么移除的时候也应该带有第三个参数,如果没有可以不带</span></span><br><span class="line"></span><br><span class="line">cc.addEventListener(<span class="string">'click'</span>,removeShow)</span><br></pre></td></tr></table></figure>

<h2 id="阻止事件冒泡e-stopPropagation"><a href="#阻止事件冒泡e-stopPropagation" class="headerlink" title="阻止事件冒泡e.stopPropagation()"></a>阻止事件冒泡e.stopPropagation()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.target.innerHTML);</span><br><span class="line">    <span class="keyword">this</span>.style.color = <span class="string">'red'</span>;</span><br><span class="line">    <span class="comment">//阻止事件冒泡 </span></span><br><span class="line">    <span class="comment">//防止点击dd的时候隐藏了父级domClick</span></span><br><span class="line">    e.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line">domClick.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.visibility = <span class="string">'hidden'</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>屏蔽浏览去的默认行为 e.preventDefult();return false;</p>
</blockquote>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/正则表达式笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/正则表达式笔记/" class="post-title-link" itemprop="url">正则表达式笔记</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 21:14:10 / 修改时间：22:10:10" itemprop="dateCreated datePublished" datetime="2019-12-02T21:14:10+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="1-1-基本语法"><a href="#1-1-基本语法" class="headerlink" title="1.1. 基本语法"></a>1.1. 基本语法</h2><p>通过一张图表来对正则表达式的基本进行一个回顾</p>
<table>
<thead>
<tr>
<th>single char</th>
<th>quantifiers(数量)</th>
<th>position(位置)</th>
</tr>
</thead>
<tbody><tr>
<td>\d 匹配数字</td>
<td>* 0个或者更多</td>
<td>^一行的开头</td>
</tr>
<tr>
<td>\w 匹配word(数字、字母)</td>
<td>+ 1个或更多，至少1个</td>
<td>$一行的结尾</td>
</tr>
<tr>
<td>\W 匹配<strong>非</strong>word(数字、字母)</td>
<td>? 0个或1个,一个Optional</td>
<td>\b 单词”结界”(word bounds)</td>
</tr>
<tr>
<td>\s 匹配white space(包括空格、tab等)</td>
<td>{min,max}出现次数在一个范围内</td>
<td></td>
</tr>
<tr>
<td>\S 匹配<strong>非</strong>white space(包括空格、tab等)</td>
<td>{n}匹配出现n次的</td>
<td></td>
</tr>
<tr>
<td>. 匹配任何，任何的字符</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="1-1-1-single-char"><a href="#1-1-1-single-char" class="headerlink" title="1.1.1. single char"></a>1.1.1. single char</h3><p>假设你有一段字符如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">There are some phone number 917-555-1234. Also， you can call me at 646.555.1234 and of course I am always reachable at (212)867-5309.</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>\w</code> </p>
<p>将匹配所有的单词，当然 () - 除外</p>
</li>
<li><p><code>\w\w\w</code> </p>
<p>发现匹配的有’<code>The</code>se <code>are</code> <code>som</code>e <code>pho</code>ne <code>number</code>s …’ </p>
<p>注意正则表达式是匹配一个连续串的规则，所以可以看到三个字母的单词可以匹配到，6个单词的也可以匹配到。</p>
</li>
<li><p><code>\s\s</code></p>
<p>匹配到一行中连续两个空格</p>
</li>
</ul>
<h3 id="1-1-2-position"><a href="#1-1-2-position" class="headerlink" title="1.1.2. position"></a>1.1.2. position</h3><p>回到刚才的问题之前，先熟悉下<code>^</code> <code>$</code> 和 <code>\b</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">This is somthing</span><br><span class="line">is about</span><br><span class="line">a blah</span><br><span class="line">words</span><br><span class="line">sequence of words</span><br><span class="line">Hello and</span><br><span class="line">GoodBye and </span><br><span class="line">Go gogo!</span><br></pre></td></tr></table></figure>

<p>来看下各种正则所匹配的内容</p>
<ul>
<li><code>\w+</code> 这个应该毫无疑问，匹配所有的words</li>
<li><code>^\w+</code> 多了一个<code>^</code>，这样子，就只能匹配到每一行开头的单词了<code>This</code> <code>is</code> <code>a</code> <code>words</code> <code>sequence</code> <code>Hello</code> <code>GoodBye</code> <code>Go</code></li>
<li><code>\w+$</code> 这样就能匹配到每行的最后一个字母</li>
</ul>
<p>回到刚才的问题</p>
<blockquote>
<p>现在想找5个字母组成的单词</p>
</blockquote>
<p>就变得很简单了，使用单词结界符<code>\b</code></p>
<p>答案就是<code>\b\w{5}\b</code></p>
<h3 id="1-1-3-找个电话号码吧"><a href="#1-1-3-找个电话号码吧" class="headerlink" title="1.1.3. 找个电话号码吧"></a>1.1.3. 找个电话号码吧</h3><p>最后，找一个刚才出现的电话号<code>123-456-1231</code></p>
<p>用以上最基本的正则方法就是 <code>\d{3}-\d{3}-\d{4}</code>，这样就找到了。 但是有的时候，电话号码是<code>123.456.1234</code> 或者 <code>(212)867-4233</code>的结构怎么办呢？</p>
<p>正则表达式中的<code>或</code>或者其他表达方式，下面一一来介绍。</p>
<h2 id="1-2-字符分类-char-class"><a href="#1-2-字符分类-char-class" class="headerlink" title="1.2. 字符分类(char class)"></a>1.2. 字符分类(char class)</h2><p>前面记录了最基本的方法，接下来说一下分类符<code>[]</code></p>
<p>这个符号用来表示逻辑关系<code>或</code>，比如<code>[abc]</code>表示a或者b或c.<code>[-.]</code>表示符号<code>-</code>或者<code>.</code>号(<strong>注意这里，在[]中的.号代表的就是这个符号，但是如果在其外面，表示个匹配所有。 所以如果不在[]之中，想要匹配’.’，就要通过转意符号.</strong>)</p>
<h3 id="1-2-1-分类的简单应用"><a href="#1-2-1-分类的简单应用" class="headerlink" title="1.2.1. 分类的简单应用"></a>1.2.1. 分类的简单应用</h3><p>字符序列：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The lynk is quite a link don<span class="string">'t you think? l nk l(nk</span></span><br></pre></td></tr></table></figure>

<p>正则表达式： <code>l[yi (]nk</code></p>
<p>结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lynk  link  l nk   l(nk</span><br></pre></td></tr></table></figure>

<p>很容易理解的，就是表达<code>或</code>逻辑。</p>
<h3 id="1-2-2-匹配所有可能的电话号码"><a href="#1-2-2-匹配所有可能的电话号码" class="headerlink" title="1.2.2. 匹配所有可能的电话号码"></a>1.2.2. 匹配所有可能的电话号码</h3><p>好了，现在回到之前遗留的问题，有以下字段，请匹配所有可能的电话号码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">These are some phone numbers <span class="number">915</span><span class="number">-134</span><span class="number">-3122.</span> Also,</span><br><span class="line">you can call me at <span class="number">643.123</span><span class="number">.1333</span> and <span class="keyword">of</span> course,</span><br><span class="line">I<span class="string">'m always reachable at (212)867-5509</span></span><br></pre></td></tr></table></figure>

<p>好的，一步一步来，刚才我们使用<code>\d{3}-\d{3}-\d{4}</code>匹配了连字符的情况。现在我们可以很轻松的把<code>.</code>这种情况加进去了</p>
<p>第一步： <code>\d{3}[-.]\d{3}[-.]\d{4}</code></p>
<p>第二步: 为了能够匹配括号，可以使用?来，因为这是一个option选择。所以最后就成了</p>
<p><code>\(?\d{3}[-.)]\d{3}[-.]\d{4}</code></p>
<p><strong>这里还是要说明，在[]中，特殊字符不需要转义，可以直接使用，比如[.()],但是在外面，是需要转义的( .等</strong></p>
<h3 id="1-2-3-的特殊语法"><a href="#1-2-3-的特殊语法" class="headerlink" title="1.2.3. []的特殊语法"></a>1.2.3. []的特殊语法</h3><p>刚才介绍了最简单和基本的功能，但是有些特殊的地方需要注意</p>
<ul>
<li><ol>
<li><code>-</code> 连接符是第一个字符时</li>
</ol>
<p>比如<code>[-.]</code>的含义是连字符<code>-</code>或者点符<code>.</code>。 但是，如果当连字符不是第一个字符时，比如<code>[a-z]</code>，这就表示是从字母a到字符z。</p>
</li>
<li><ol start="2">
<li>[]中的^</li>
</ol>
<p><code>^</code>在之前介绍中，是表示一行开头，但是在<code>[]</code>中，有着不同的含义。 <code>[ab]</code> 表示a或者b <code>[^ab]</code> 啥都行，只要不是a或b(<code>anythings except a and b</code>)，相当于取反</p>
</li>
</ul>
<h3 id="1-2-4-和"><a href="#1-2-4-和" class="headerlink" title="1.2.4. []和()"></a>1.2.4. []和()</h3><p>除了使用<code>[]</code>表示或逻辑,<code>()</code>也是可以的。用法是<code>(a|b)</code>表示a或者b</p>
<p>比如下面的例子，匹配所有email</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gaoyaqi411@126.com  </span><br><span class="line">dyumc@google.net </span><br><span class="line">sam@sjtu.edu</span><br></pre></td></tr></table></figure>

<p>思路：</p>
<p>首先要想我到底相匹配什么，这里我想匹配的是</p>
<ol>
<li>任何一个以words开头的，一个或更多 <code>\w+</code></li>
<li>紧接着是一个<code>@</code>符号 <code>\w+@</code></li>
<li>接着有一个或者更多的words <code>\w+@\w+</code></li>
<li>接着一个<code>.</code>标点 <code>\w+@\w+\.</code></li>
<li>接着一个<code>com</code> <code>net</code> 或 <code>edu</code> <code>\w+@\w+\.(com|net|edu)</code></li>
</ol>
<p><strong>还是提醒注意第四步的.转义符号</strong></p>
<p>好了，这样几可以匹配以上的所有邮箱了。但是还有一个问题，因为邮箱用户名是可以有<code>.</code>的，比如<code>vincent.ko@126.com</code></p>
<p>其实仍然很简单，修复如下： <code>[\w.]+@\w+\.(com|net|edu)</code></p>
<h3 id="1-2-5-总结"><a href="#1-2-5-总结" class="headerlink" title="1.2.5. 总结"></a>1.2.5. 总结</h3><ol>
<li><code>[]</code>的作用，用英文表达就是”alternation”,表达一个或的逻辑；</li>
<li><code>/[-.(]/</code> 在符号中的连字符<code>-</code>放在第一位表示连字符本身，如果放在中间，表示”从..到..”，比如<code>[a-z]</code>表示a-z</li>
<li><code>[.)]</code> 括号中的特殊符号不需要转义，就表示其本身</li>
<li><code>[^ab]</code> 括号中的<code>^</code>表示非，anythings except <code>a</code> and <code>b</code></li>
<li><code>(a|b)</code>也可表示选择，但是它有更强大的功能….</li>
</ol>
<p>所以，<code>()</code>的强大功能是什么呢？ 分组捕获，这对序列的替换、交换是很有帮助的。 后面一节进行学习记录</p>
<h2 id="1-3-分组捕获-capturing-groups"><a href="#1-3-分组捕获-capturing-groups" class="headerlink" title="1.3. 分组捕获(capturing groups)"></a>1.3. 分组捕获(capturing groups)</h2><p>什么是分组捕获，现在回到之前电话号码的例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234</span><br><span class="line">915-412-1333</span><br><span class="line"></span><br><span class="line">//我想要保留区号，把后面的电话号码变为通用性的</span><br><span class="line">👇👇👇👇👇👇👇👇👇👇👇👇</span><br><span class="line"></span><br><span class="line">212-xxx-xxxx</span><br><span class="line">915-xxx-xxxx</span><br></pre></td></tr></table></figure>

<p>按照之前的做法<code>\d{3}-\d{3}-\d{4}</code>,这种匹配的方式，是将整个电话号码作为一个组(group)匹配起来。 我们把<code>212-555-1234</code>这样的叫<code>Group0</code>。</p>
<p>这个时候，如果我们加了一个括号<code>\d{3}-(\d{3})-\d{4}</code>，那么匹配到的<code>555</code>就叫<code>Group1</code>。 以此类推，如果有两个小括号<code>\d{3}-(\d{3})-(\d{4})</code>那么分组就是下面的情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234   Group0</span><br><span class="line">555            Group1</span><br><span class="line">1234           Group2</span><br></pre></td></tr></table></figure>

<h3 id="1-3-1-选择分组"><a href="#1-3-1-选择分组" class="headerlink" title="1.3.1. 选择分组"></a>1.3.1. 选择分组</h3><p>现在组已经分好，那么如何选择已经匹配的分组？</p>
<p>这里有两种方法，第一种使用<code>$</code>符号，比如<code>$1</code> 代表<code>555</code>,<code>$2</code>代表<code>1234</code>；第二种，使用<code>\</code>,比如<code>\1</code>代表<code>555</code>。两种的使用场景不一样，先讲<code>$</code></p>
<p>现在为了满足最开始的要求，我们可以这么做</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: \(?(\d&#123;<span class="number">3</span>&#125;)[-.)]\d&#123;<span class="number">3</span>&#125;[-.]\d&#123;<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">replace: $<span class="number">1</span>-xxx-xxxx</span><br></pre></td></tr></table></figure>

<p><strong>ps: 这里可以直接用JS的replace函数进行操作，但是正则不是JS专属的，所以这里先介绍通用方法，之后对JS部分进行总结</strong></p>
<h3 id="1-3-2-实景训练"><a href="#1-3-2-实景训练" class="headerlink" title="1.3.2. 实景训练"></a>1.3.2. 实景训练</h3><ol>
<li>现在有一个名单列表，但是姓和名称是反的，我需要把他交换过来</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shiffina, Daniel</span><br><span class="line">shifafl, Daniell</span><br><span class="line">shquer, Danny</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>实现方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: (\w+),\s(\w+)</span><br><span class="line"></span><br><span class="line">replace: $2 $1</span><br></pre></td></tr></table></figure>

<p>注意：<code>$0</code> 是所有匹配到的，所以第一个加括号的是<code>$1</code></p>
<ol start="2">
<li>匹配markdown中的link标签，并替换为html标签</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[google](http:<span class="comment">//google.com)</span></span><br><span class="line">[itp](http:<span class="comment">//itp.nyu.edu)</span></span><br><span class="line">[Coding Rainbow](http:<span class="comment">//codingrainbow.com)</span></span><br></pre></td></tr></table></figure>

<p>解析： 这道题有些坑，需要慢慢来。</p>
<p>看到这个，第一个想考虑匹配<code>[google]</code>这个东西，立马想到正则表达式<code>\[.*\]</code>。 这个是巨大的坑，在当前来看，它的确能正确匹配到上面的三条。 但是如果文本是这样的：</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-1.jpg" alt></p>
<p>看到了，第一行的内容会全部匹配下来，而不能区分<code>[google]</code>和<code>[test]</code>。 之所以这样，<strong>是因为.是贪婪的，他表示所有，所有能匹配到的，所以当然也包括了]，一直到这一行的最后一个]，它才停止。</strong></p>
<p>所以为了让它能正确匹配，需要去掉这种贪婪的属性。这里用到<code>？</code> 。 当<code>?</code>放在了<code>quantifiers</code>符号后，表示去掉贪婪属性，匹配到终止条件，即可停下。</p>
<p><code>\[.*?\]</code>这样子，就可以将<code>[google]</code>和<code>[test]</code>分开,效果如下：</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-2.jpg" alt></p>
<p>接下来完成所有内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: \[(.*?)\]\((http.*?)\)</span><br><span class="line"></span><br><span class="line">replace: &lt;a href=&quot;$2&quot;&gt;$1&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-使用-选择器"><a href="#1-3-3-使用-选择器" class="headerlink" title="1.3.3. 使用\选择器"></a>1.3.3. 使用<code>\</code>选择器</h3><p><code>$</code>选择符是在替换的时候进行的标志或选择，但是如果在正则表达式本身，就要使用<code>\</code>选择了。比如以下的场景</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is is a a dog , I think think this is is really</span><br><span class="line">a a good good dog. Don&apos;t you you thinks so so ?</span><br></pre></td></tr></table></figure>

<p>我们想要匹配比如<code>is is</code> <code>so so</code>这样连续的序列，就用到了下面的表达方式: <code>(\w+)\s\1</code></p>
<p>效果:</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-3.jpg" alt></p>
<p>嗯，差不多达到效果，但是有一些小的bug。比如第一句话<code>This is is a</code> 这个就匹配不准确，会把第一个This的后面字母匹配进去。 <strong>这就用到第一节说的字符结界 \b了</strong>，就变成了<code>\b(\w+)\s\1\b</code></p>
<p>好了，大功告成，就不贴效果图了，自行脑补就好了。</p>
<h3 id="1-3-4-总结"><a href="#1-3-4-总结" class="headerlink" title="1.3.4. 总结"></a>1.3.4. 总结</h3><ol>
<li>分组捕获，使用()进行数据分组，编号0代表整个匹配项，选择的分组从1号开始</li>
<li>选择器可以使用<code>$1</code>和<code>\1</code>，但是使用场景不同，<code>\</code>用在正则表达式自己身上</li>
<li><code>?</code>符号可以禁止贪婪属性，放在<code>.*</code>之后，表示一次匹配遇到重点就可以停止。否则将会一直向后匹配。</li>
</ol>
<h2 id="1-4-在JavaScript中的应用"><a href="#1-4-在JavaScript中的应用" class="headerlink" title="1.4. 在JavaScript中的应用"></a>1.4. 在JavaScript中的应用</h2><p>在js中，主要的正则表达式都是涉及到string的应用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/w+/</span></span><br></pre></td></tr></table></figure>

<p>这两个分别是string和reg的字面量创建方法。当要使用正则来进行操作的时候，使用了<code>r.test()</code>和<code>str.match()</code> 以及<code>str.replace</code>等方法。</p>
<h3 id="1-4-1-reg-test"><a href="#1-4-1-reg-test" class="headerlink" title="1.4.1. reg.test()"></a>1.4.1. reg.test()</h3><p>正则表达式本身有一个test的方法，这个方法只能测试是否包含，返回一个bool变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;/</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'123'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'123ABC'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line">r.test(a)  <span class="comment">//true</span></span><br><span class="line">r.test(b) <span class="comment">//true</span></span><br><span class="line">r.test(c) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>嗯，这个很简单，而且用的实际不多，下面着重讲str上的一些方法。</p>
<h3 id="1-4-2-str-match"><a href="#1-4-2-str-match" class="headerlink" title="1.4.2. str.match()"></a>1.4.2. str.match()</h3><p>与test()不同，不只是返回bool变量，它会返回你所匹配到的内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/compus/</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"compus, I know something about you"</span></span><br><span class="line">r.test(s)  <span class="comment">//true</span></span><br><span class="line">s.match(r)  <span class="comment">//["compus"]</span></span><br><span class="line">s.match(reg) <span class="comment">//["compus"]</span></span><br></pre></td></tr></table></figure>

<p>等等，好像有点问题，为什么最后一个返回的也是”compus”？这不科学。</p>
<p>好吧，实际上，match()返回了第一个可以匹配的序列。想要实现之前的效果，就要用到JS里关于正则的几个flag</p>
<h4 id="1-4-2-1-flag"><a href="#1-4-2-1-flag" class="headerlink" title="1.4.2.1. flag"></a>1.4.2.1. flag</h4><p>这个标志就在建立正则的时候就要有的，主要有三个</p>
<table>
<thead>
<tr>
<th>flag</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>g</td>
<td>全部的，给我匹配全部的</td>
</tr>
<tr>
<td>i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>m</td>
<td>多行匹配</td>
</tr>
</tbody></table>
<p>所以为了解决刚才的问题，只要这样子设置reg就可以了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/g</span></span><br></pre></td></tr></table></figure>

<p>看下面一个练习</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/\d&#123;3&#125;[-.]d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(r)); <span class="comment">//["111-2313"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(rg));<span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>

<p>嗯，找电话号码，是的，很方便。但是还有一个问题，刚才说的分组，那么match会返回分组吗？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sr = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(sr)); <span class="comment">//["111-2313","111"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(srg)); <span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>

<p>所以结论是： 当使用了全局flag<code>g</code>的时候，不会返回分组，而是全部的匹配结果；如果没有使用<code>g</code>，会将匹配到的结果和分组以数组的形式返回。</p>
<p>那么如何实现全局的分组？</p>
<h3 id="1-4-3-reg-exec"><a href="#1-4-3-reg-exec" class="headerlink" title="1.4.3. reg.exec()"></a>1.4.3. reg.exec()</h3><p>从字面意思来看，正则表达式的执行方法。 这个方法可以实现匹配全局，并返回分组的结果。</p>
<blockquote>
<p>reg.exec()每次调用，返回一个匹配的结果，匹配结果和分组以数组的形式返回，不断的调用即可返回下一个结果，直到返回<code>null</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> ;</span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span>;</span><br><span class="line"><span class="keyword">var</span> result = srg.exec(str);</span><br><span class="line"><span class="keyword">while</span>(result !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    result = srg.exec(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>result包含的内容可能比想象中的多，它是一个数组，比如第一次执行，他的结果为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"133-2311"</span>, <span class="string">"133"</span>, <span class="attr">index</span>: <span class="number">36</span>, </span><br><span class="line">input: <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> groups: <span class="literal">undefined</span>]</span><br></pre></td></tr></table></figure>

<h3 id="1-4-4-str-split"><a href="#1-4-4-str-split" class="headerlink" title="1.4.4. str.split"></a>1.4.4. str.split</h3><p>现在来到了更强的功能上，先说下split，我们知道split是将字符串按照某个字符分隔开，比如有以下一段话，需要将其分割成单词。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"unicorns and rainbows And, Cupcakes"</span></span><br></pre></td></tr></table></figure>

<p>分割成单词，首先想到的是空格隔开，于是可以用下面方式实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">var</span> result1 = s.split(<span class="regexp">/\s/</span>);</span><br><span class="line"><span class="comment">//完全一样的效果</span></span><br><span class="line"><span class="comment">//["unicorns", "and", "rainbows", "And,", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<p>嗯，这样体现不出来正则的强大，而且最主要的是没有实现要求。因为还有一个”And,”。所以要用正则了，匹配条件是<code>逗号或者空格</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,\s]/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//["unicorns", "and", "rainbows", "And", "", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<p>结果仍然和需要的有出入，因为多了一个””。 我们并不是想让它分割的依据是<code>逗号或者空格</code>,依据应该是<code>逗号或空格所在的连续序列</code>。 在原来的基础上加一个<code>+</code>，改成<code>/[,\s]+/</code>，这个含义就是<code>一个单独的逗号，或者一个单独的空格</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,\s]+/</span>);</span><br><span class="line"><span class="comment">// ["unicorns", "and", "rainbows", "And", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-1-单词分割"><a href="#1-4-4-1-单词分割" class="headerlink" title="1.4.4.1. 单词分割"></a>1.4.4.1. 单词分割</h4><p>好了，拓展一下，实现一个段落的单词分割，一个正则表达式就是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,.!?\s]+/</span>)</span><br></pre></td></tr></table></figure>

<p>当然，有个最简单的方法，我们可以这样去做</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/\W+/</span>);</span><br></pre></td></tr></table></figure>

<p>接着，如果我们想将一个段落的句子都分隔开，一个可以实现的表达式就是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[.,!?]+/</span>)</span><br></pre></td></tr></table></figure>

<p>最后，有一个小需求，就是在分割句子的同时，还想把相应的分隔符保留下来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = </span><br><span class="line"><span class="string">"Hello,My name is Vincent. Nice to Meet you!What's your name? Haha."</span></span><br></pre></td></tr></table></figure>

<p>这是一个小小的<code>ponit</code>，记住<strong>如果想要保留分隔符，只要给匹配的内容分组即可</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="regexp">/([.,!?]+)/</span>)</span><br><span class="line"><span class="comment">//["Hello", ",", "My name is Vincent", ".", " Nice to Meet you", "!", "What's your name", "?", " Haha", ".", ""]</span></span><br></pre></td></tr></table></figure>

<p>可以看到，这样就会把分隔符也存储起来</p>
<h3 id="1-4-5-str-replace"><a href="#1-4-5-str-replace" class="headerlink" title="1.4.5. str.replace()"></a>1.4.5. str.replace()</h3><p>replace也是字符串的方法，它的基本用法是<code>str.replace(reg,replace|function)</code>，第一个参数是正则表达式，代表匹配的内容，第二个参数是替换的字符串或者一个回掉函数。</p>
<p><strong>注意，replace不会修改原字符串，只是返回一个修改后的字符串;除此外，正则表达式如果没有使用g标志，也和match一样，只匹配/替换第一个</strong></p>
<h4 id="1-4-5-1-最简单的替换"><a href="#1-4-5-1-最简单的替换" class="headerlink" title="1.4.5.1. 最简单的替换"></a>1.4.5.1. 最简单的替换</h4><blockquote>
<p>替换一个序列中的元音字母(aeiou)，将其替换成一个double。 比如x-&gt;xx</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent."</span></span><br><span class="line"><span class="keyword">var</span> result = s.replace(<span class="regexp">/([aeiou])/g</span>,<span class="string">"$1$1"</span>)</span><br><span class="line"><span class="comment">//"Heelloo,My naamee iis Viinceent."</span></span><br></pre></td></tr></table></figure>

<p><strong>注意，第二个参数必须是字符串; 注意不要忘记加g</strong></p>
<h4 id="1-4-5-2-牛x哄哄的function参数来了"><a href="#1-4-5-2-牛x哄哄的function参数来了" class="headerlink" title="1.4.5.2. 牛x哄哄的function参数来了"></a>1.4.5.2. 牛x哄哄的function参数来了</h4><p>嗯，这才是最强大的地方，第二参数传入function，先看一个最简单的示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent. What is your name?"</span></span><br><span class="line"><span class="keyword">var</span> newStr = s.replace(<span class="regexp">/\b\w&#123;4&#125;\b/g</span>,replacer)</span><br><span class="line"><span class="built_in">console</span>.log(newStr)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(match);</span><br><span class="line">    <span class="keyword">return</span> match.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">name</span></span><br><span class="line"><span class="comment">What</span></span><br><span class="line"><span class="comment">your</span></span><br><span class="line"><span class="comment">name</span></span><br><span class="line"><span class="comment">Hello,My NAME is Vincent. WHAT is YOUR NAME?</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>所以，函数的参数是匹配到的内容，返回的是需要替换的内容。好了，基本示例解释了基本用法，那么之前讨论的分组怎么办？如何实现分组呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分组</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match,group1,group2</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(group1);</span><br><span class="line">    <span class="built_in">console</span>.log(group2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果正则表达式分组处理，那么在回调函数中，函数的第二个、第三参数就是group1,group2。这样子，就可以做很多神奇的事情</p>
<h4 id="1-4-5-3-综合练习题"><a href="#1-4-5-3-综合练习题" class="headerlink" title="1.4.5.3. 综合练习题"></a>1.4.5.3. 综合练习题</h4><ol>
<li><p>判断一个字符串中出现次数最多的字符，并统计次数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'aaabbbcccaaabbbaaa'</span>;</span><br><span class="line"><span class="keyword">var</span> a = s.split(<span class="string">''</span>).sort().join(<span class="string">""</span>);  <span class="comment">//"aaaaaaaaabbbbbbccc"</span></span><br><span class="line"><span class="keyword">var</span> ans = a.match(<span class="regexp">/(\w)\1+/g</span>);</span><br><span class="line">ans.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.length - b.length;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ans is : '</span> + ans[ans.length<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="1-4-6-总结"><a href="#1-4-6-总结" class="headerlink" title="1.4.6. 总结"></a>1.4.6. 总结</h3><ol>
<li>在js中，正则表达式字面量<code>/reg/</code>和字符串字面量<code>&quot;str&quot;</code>用于创建正则和字符串。其中正则上有两个方法<code>reg.test()</code>和<code>reg.exec()</code></li>
<li><code>reg.test(str)</code>方法，返回布尔变量，用于指示是否有所匹配； <code>reg.exec(str)</code>有点类似与迭代器，每次执行，返回匹配结果和分组，直到返回为<code>null</code>结束。</li>
<li>字符串方法主要有<code>str.match(reg)</code>,<code>str.split(reg)</code>和<code>str.replace(reg,str|function)</code> 三种方法。</li>
<li><code>match</code>比较特殊，如果正则包含了分组，且没有<code>g</code>标志，则返回匹配内容和分组; 如果没有分组，且有<code>g</code>标志，返回所有匹配内容</li>
<li><code>split</code>方法主要用于字符串分割，如果想要保存分隔符，记得将匹配内容分组(用小括号包起来)</li>
<li><code>replace</code>是最强大的方法，当使用回掉函数时，返回值就是替换值; 参数分别为<code>匹配值</code> <code>group1</code> <code>group2</code>…</li>
</ol>
<p><a href="https://juejin.im/post/5b5db5b8e51d4519155720d2#heading-1" target="_blank" rel="noopener">原文链接</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/原生JS-对DOM-类名的操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/原生JS-对DOM-类名的操作/" class="post-title-link" itemprop="url">原生JS 对DOM 类名的操作</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 20:56:46 / 修改时间：21:12:28" itemprop="dateCreated datePublished" datetime="2019-12-02T20:56:46+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="原生JS-对某个-class-类名的添加、删除以及判断是否含有某个类名的操作"><a href="#原生JS-对某个-class-类名的添加、删除以及判断是否含有某个类名的操作" class="headerlink" title="原生JS 对某个 class 类名的添加、删除以及判断是否含有某个类名的操作"></a>原生JS 对某个 <code>class</code> 类名的添加、删除以及判断是否含有某个类名的操作</h1><h2 id="为-lt-div-gt-添加class"><a href="#为-lt-div-gt-添加class" class="headerlink" title="为 &lt;div&gt; 添加class"></a>为 <code>&lt;div&gt;</code> 添加class</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'div'</span>).classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br></pre></td></tr></table></figure>

<p>如果是通过类名获取的话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">'div'</span>)[<span class="number">0</span>].classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br></pre></td></tr></table></figure>

<p>如果是使用新增的 <code>querySelector</code> 的话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.div'</span>).classList.add(<span class="string">'ttt'</span>, <span class="string">'ttt2'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="从-div-移除多个类"><a href="#从-div-移除多个类" class="headerlink" title="从 div 移除多个类"></a>从 div 移除多个类</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'div'</span>).classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">'div'</span>)[<span class="number">0</span>].classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.div'</span>).classList.add(<span class="string">'ttt'</span>, <span class="string">'ttt2'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="检查是否包含某个-class-类名"><a href="#检查是否包含某个-class-类名" class="headerlink" title="检查是否包含某个 class 类名"></a>检查是否包含某个 class 类名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myDiv.classList.contains(<span class="string">'myCssClass'</span>); <span class="comment">//return true or false</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/28/JS-口袋书-一些好的文章总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/28/JS-口袋书-一些好的文章总结/" class="post-title-link" itemprop="url">JS 口袋书--一些好的文章总结</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-28 22:08:31 / 修改时间：22:23:44" itemprop="dateCreated datePublished" datetime="2019-11-28T22:08:31+08:00">2019-11-28</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-口袋书"><a href="#JS-口袋书" class="headerlink" title="JS 口袋书"></a>JS 口袋书</h1><p><a href="https://juejin.im/post/5d9bd0dfe51d4577fe41b667" target="_blank" rel="noopener">【JS 口袋书】第 1 和 2 章：JS简介及基础</a></p>
<p><a href="https://juejin.im/post/5d9d21a7f265da5ba74524a4" target="_blank" rel="noopener">【JS 口袋书】第 3 章：JavaScript 函数</a></p>
<p><a href="https://juejin.im/post/5d9e72d0f265da5b5e2d9583" target="_blank" rel="noopener">【JS 口袋书】第 4 章：JS 引擎底层的工作原理</a></p>
<p><a href="https://juejin.im/post/5da3ba47f265da5b926bd061" target="_blank" rel="noopener">【JS 口袋书】第 5 章：JS 对象生命周期的秘密</a></p>
<p><a href="https://juejin.im/post/5da65ed26fb9a04df26c2e0d" target="_blank" rel="noopener">【JS 口袋书】第 6 章：JS 中的闭包与模块</a></p>
<p><a href="https://juejin.im/post/5da7b143e51d45249338d5cd" target="_blank" rel="noopener">【JS 口袋书】第 7 章：JS 中的类型转换与比较</a></p>
<p><a href="https://juejin.im/post/5dae44d26fb9a04e17209711" target="_blank" rel="noopener">【JS 口袋书】第 8 章：以更细的角度来看 JS 中的 this</a></p>
<p><a href="https://juejin.im/post/5daf98dcf265da5b9c3d14d6" target="_blank" rel="noopener">【JS 口袋书】第 9 章：使用 JS 操作 HTML 元素</a></p>
<p><a href="https://juejin.im/post/5db8d33cf265da4d0a68d0a3" target="_blank" rel="noopener">【JS 口袋书】第 10 章：使用异步 JavaScript</a></p>
<p><a href="https://juejin.im/post/5dbb74a251882521ab6e4ca5" target="_blank" rel="noopener">【JS 口袋书】第 11 章：HTML 表单及 localStorage 的使用</a></p>
<p>还有一些比较高赞的文章</p>
<p><a href="https://juejin.im/post/5d2d146bf265da1b9163c5c9" target="_blank" rel="noopener">8个问题看你是否真的懂 JS</a></p>
<p><a href="https://juejin.im/post/5dba2249f265da4cef190484" target="_blank" rel="noopener">通过 41 个 问答方式快速了解学习 Git</a></p>
<p><a href="https://juejin.im/post/5db62f1bf265da4d560906ab" target="_blank" rel="noopener">13 个 JS 数组精简技巧，一起来看看</a></p>
<p><a href="https://juejin.im/post/5d82c12ff265da03a31d6f92" target="_blank" rel="noopener">通过实现25个数组方法来理解及高效使用数组方法(长文,建议收藏)</a></p>
<p><a href="https://juejin.im/post/5d6c53476fb9a06acc009e00" target="_blank" rel="noopener">50 个JS 必须懂的面试题为你助力金九银十</a></p>
<p><a href="https://juejin.im/post/5d34fdfff265da1b897b0c8d" target="_blank" rel="noopener">21 个VSCode 快捷键，让代码更快，更有趣</a></p>
<p><a href="https://juejin.im/post/5d2e657ae51d4510b71da69d" target="_blank" rel="noopener">Proxy 的巧用</a></p>
<p><a href="https://juejin.im/post/5d2284dc51882579df4a4cee" target="_blank" rel="noopener">如何使用 Set 来提高代码的性能</a></p>
<p><a href="https://juejin.im/post/5d1a9d195188251c03259348" target="_blank" rel="noopener">8 个有用的 JS 技巧</a></p>
<p><a href="https://juejin.im/post/5cfd9d30f265da1b94213d28" target="_blank" rel="noopener">我还没搞懂 JS 中 this 指向及继承，直到有人向我这样解释它</a></p>
<p><a href="https://juejin.im/post/5cf468a9f265da1bb77652aa" target="_blank" rel="noopener">我从来不理解JavaScript闭包，直到有人这样向我解释它</a></p>
<p><a href="https://juejin.im/post/5ca6bf5151882543fc5e3bb0" target="_blank" rel="noopener">灵活使用 console 让 js 调试更简单</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/27/JS-工具函数总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/27/JS-工具函数总结/" class="post-title-link" itemprop="url">JS 工具函数总结</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-27 22:29:35 / 修改时间：22:58:20" itemprop="dateCreated datePublished" datetime="2019-11-27T22:29:35+08:00">2019-11-27</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-工具函数总结"><a href="#JS-工具函数总结" class="headerlink" title="JS 工具函数总结"></a>JS 工具函数总结</h1><h2 id="1-第一部分：数组"><a href="#1-第一部分：数组" class="headerlink" title="1. 第一部分：数组"></a>1. 第一部分：数组</h2><h3 id="1-all：布尔全等判断"><a href="#1-all：布尔全等判断" class="headerlink" title="1. all：布尔全等判断"></a>1. <code>all</code>：布尔全等判断</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> all = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.every(fn);</span><br><span class="line"></span><br><span class="line">all([<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x &gt; <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">all([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-allEqual：检查数组各项相等"><a href="#2-allEqual：检查数组各项相等" class="headerlink" title="2. allEqual：检查数组各项相等"></a>2. <code>allEqual</code>：检查数组各项相等</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> allEqual = <span class="function"><span class="params">arr</span> =&gt;</span> arr.every(<span class="function"><span class="params">val</span> =&gt;</span> val === arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]); <span class="comment">// false</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="3-approximatelyEqual：约等于"><a href="#3-approximatelyEqual：约等于" class="headerlink" title="3. approximatelyEqual：约等于"></a>3. <code>approximatelyEqual</code>：约等于</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> approximatelyEqual = <span class="function">(<span class="params">v1, v2, epsilon = <span class="number">0.001</span></span>) =&gt;</span> <span class="built_in">Math</span>.abs(v1 - v2) &lt; epsilon;</span><br><span class="line"></span><br><span class="line">approximatelyEqual(<span class="built_in">Math</span>.PI / <span class="number">2.0</span>, <span class="number">1.5708</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="4-arrayToCSV：数组转CSV格式（带空格的字符串）"><a href="#4-arrayToCSV：数组转CSV格式（带空格的字符串）" class="headerlink" title="4. arrayToCSV：数组转CSV格式（带空格的字符串）"></a>4. <code>arrayToCSV</code>：数组转<code>CSV</code>格式（带空格的字符串）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrayToCSV = <span class="function">(<span class="params">arr, delimiter = <span class="string">','</span></span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="string">`"<span class="subst">$&#123;x&#125;</span>"`</span>).join(delimiter)).join(<span class="string">'\n'</span>);</span><br><span class="line">  </span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]]); <span class="comment">// '"a","b"\n"c","d"'</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]], <span class="string">';'</span>); <span class="comment">// '"a";"b"\n"c";"d"'</span></span><br></pre></td></tr></table></figure>

<h3 id="5-arrayToHtmlList：数组转li列表"><a href="#5-arrayToHtmlList：数组转li列表" class="headerlink" title="5. arrayToHtmlList：数组转li列表"></a>5. <code>arrayToHtmlList</code>：数组转<code>li</code>列表</h3><p>此代码段将数组的元素转换为<code>&lt;li&gt;</code>标签，并将其附加到给定ID的列表中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayToHtmlList = <span class="function">(<span class="params">arr, listID</span>) =&gt;</span></span><br><span class="line">  (<span class="function"><span class="params">el</span> =&gt;</span> (</span><br><span class="line">    (el = <span class="built_in">document</span>.querySelector(<span class="string">'#'</span> + listID)),</span><br><span class="line">    (el.innerHTML += arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">`&lt;li&gt;<span class="subst">$&#123;item&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">''</span>))</span><br><span class="line">  ))();</span><br><span class="line">  </span><br><span class="line">arrayToHtmlList([<span class="string">'item 1'</span>, <span class="string">'item 2'</span>], <span class="string">'myListID'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-average：平均数"><a href="#6-average：平均数" class="headerlink" title="6. average：平均数"></a>6. <code>average</code>：平均数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function">(<span class="params">...nums</span>) =&gt;</span> nums.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / nums.length;</span><br><span class="line">average(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 2</span></span><br><span class="line">average(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="7-averageBy：数组对象属性平均数"><a href="#7-averageBy：数组对象属性平均数" class="headerlink" title="7. averageBy：数组对象属性平均数"></a>7. <code>averageBy</code>：数组对象属性平均数</h3><p>此代码段将获取数组对象属性的平均值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> averageBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) /</span><br><span class="line">  arr.length;</span><br><span class="line">  </span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], o =&gt; o.n); <span class="comment">// 5</span></span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], <span class="string">'n'</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h3 id="8-bifurcate：拆分断言后的数组"><a href="#8-bifurcate：拆分断言后的数组" class="headerlink" title="8. bifurcate：拆分断言后的数组"></a>8. <code>bifurcate</code>：拆分断言后的数组</h3><p>可以根据每个元素返回的值，使用<code>reduce()</code>和<code>push()</code> 将元素添加到第二次参数<code>fn</code>中 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcate = <span class="function">(<span class="params">arr, filter</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]);</span><br><span class="line">bifurcate([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>]); </span><br><span class="line"><span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure>

<h3 id="9-castArray：其它类型转数组"><a href="#9-castArray：其它类型转数组" class="headerlink" title="9. castArray：其它类型转数组"></a>9. <code>castArray</code>：其它类型转数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> castArray = <span class="function"><span class="params">val</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(val) ? val : [val]);</span><br><span class="line"></span><br><span class="line">castArray(<span class="string">'foo'</span>); <span class="comment">// ['foo']</span></span><br><span class="line">castArray([<span class="number">1</span>]); <span class="comment">// [1]</span></span><br><span class="line">castArray(<span class="number">1</span>); <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure>

<h3 id="10-compact：去除数组中的无效-无用值"><a href="#10-compact：去除数组中的无效-无用值" class="headerlink" title="10. compact：去除数组中的无效/无用值"></a>10. <code>compact</code>：去除数组中的无效/无用值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"></span><br><span class="line">compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'e'</span> * <span class="number">23</span>, <span class="literal">NaN</span>, <span class="string">'s'</span>, <span class="number">34</span>]); </span><br><span class="line"><span class="comment">// [ 1, 2, 3, 'a', 's', 34 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="11-countOccurrences：检测数值出现次数"><a href="#11-countOccurrences：检测数值出现次数" class="headerlink" title="11. countOccurrences：检测数值出现次数"></a>11. <code>countOccurrences</code>：检测数值出现次数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === val ? a + <span class="number">1</span> : a), <span class="number">0</span>);</span><br><span class="line">countOccurrences([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="12-deepFlatten：递归扁平化数组"><a href="#12-deepFlatten：递归扁平化数组" class="headerlink" title="12. deepFlatten：递归扁平化数组"></a>12. <code>deepFlatten</code>：递归扁平化数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function"><span class="params">arr</span> =&gt;</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v)));</span><br><span class="line"></span><br><span class="line">deepFlatten([<span class="number">1</span>, [<span class="number">2</span>], [[<span class="number">3</span>], <span class="number">4</span>], <span class="number">5</span>]); <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<h3 id="13-difference：寻找差异（并返回第一个数组独有的"><a href="#13-difference：寻找差异（并返回第一个数组独有的" class="headerlink" title="13. difference：寻找差异（并返回第一个数组独有的"></a>13. <code>difference</code>：寻找差异（并返回第一个数组独有的</h3><p>此代码段查找两个数组之间的差异，并返回第一个数组独有的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">difference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure>

<h3 id="14-differenceBy：先执行再寻找差异"><a href="#14-differenceBy：先执行再寻找差异" class="headerlink" title="14. differenceBy：先执行再寻找差异"></a>14. <code>differenceBy</code>：先执行再寻找差异</h3><p>在将给定函数应用于两个列表的每个元素之后，此方法返回两个数组之间的差异。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">differenceBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [1.2]</span></span><br><span class="line">differenceBy([&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], v =&gt; v.x); <span class="comment">// [ &#123; x: 2 &#125; ]</span></span><br></pre></td></tr></table></figure>

<h3 id="15-dropWhile：删除不符合条件的值"><a href="#15-dropWhile：删除不符合条件的值" class="headerlink" title="15. dropWhile：删除不符合条件的值"></a>15. <code>dropWhile</code>：删除不符合条件的值</h3><p>此代码段从数组顶部开始删除元素，直到传递的函数返回为<code>true</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[<span class="number">0</span>])) arr = arr.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">dropWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &gt;= <span class="number">3</span>); <span class="comment">// [3,4]</span></span><br></pre></td></tr></table></figure>

<h3 id="16-flatten：指定深度扁平化数组"><a href="#16-flatten：指定深度扁平化数组" class="headerlink" title="16. flatten：指定深度扁平化数组"></a>16. <code>flatten</code>：指定深度扁平化数组</h3><p>此代码段第二参数可指定深度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr, depth = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Array</span>.isArray(v) ? flatten(v, depth - <span class="number">1</span>) : v), []);</span><br><span class="line"></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>], <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>], <span class="number">2</span>); <span class="comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="17-indexOfAll：返回数组中某值的所有索引"><a href="#17-indexOfAll：返回数组中某值的所有索引" class="headerlink" title="17. indexOfAll：返回数组中某值的所有索引"></a>17. <code>indexOfAll</code>：返回数组中某值的所有索引</h3><p>此代码段可用于获取数组中某个值的所有索引，如果此值中未包含该值，则返回一个空数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> indexOfAll = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);</span><br><span class="line"></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// [0,3]</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h3 id="18-intersection：两数组的交集"><a href="#18-intersection：两数组的交集" class="headerlink" title="18. intersection：两数组的交集"></a>18. <code>intersection</code>：两数组的交集</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">intersection([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="19-intersectionWith：两数组都符合条件的交集"><a href="#19-intersectionWith：两数组都符合条件的交集" class="headerlink" title="19. intersectionWith：两数组都符合条件的交集"></a>19. <code>intersectionWith</code>：两数组都符合条件的交集</h3><p>此片段可用于在对两个数组的每个元素执行了函数之后，返回两个数组中存在的元素列表。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> intersectionBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">intersectionBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [2.1]</span></span><br></pre></td></tr></table></figure>

<h3 id="20-intersectionWith：先比较后返回交集"><a href="#20-intersectionWith：先比较后返回交集" class="headerlink" title="20. intersectionWith：先比较后返回交集"></a>20. <code>intersectionWith</code>：先比较后返回交集</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionWith = <span class="function">(<span class="params">a, b, comp</span>) =&gt;</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> b.findIndex(<span class="function"><span class="params">y</span> =&gt;</span> comp(x, y)) !== <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">intersectionWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3.9</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1.5, 3, 0]</span></span><br></pre></td></tr></table></figure>

<h3 id="21-minN：返回指定长度的升序数组"><a href="#21-minN：返回指定长度的升序数组" class="headerlink" title="21. minN：返回指定长度的升序数组"></a>21. <code>minN</code>：返回指定长度的升序数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> minN = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> [...arr].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b).slice(<span class="number">0</span>, n);</span><br><span class="line"></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1]</span></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure>

<h3 id="22-negate：根据条件反向筛选"><a href="#22-negate：根据条件反向筛选" class="headerlink" title="22. negate：根据条件反向筛选"></a>22. <code>negate</code>：根据条件反向筛选</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> negate = <span class="function"><span class="params">func</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> !func(...args);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>].filter(negate(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)); <span class="comment">// [ 1, 3, 5 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="23-randomIntArrayInRange：生成两数之间指定长度的随机数组"><a href="#23-randomIntArrayInRange：生成两数之间指定长度的随机数组" class="headerlink" title="23. randomIntArrayInRange：生成两数之间指定长度的随机数组"></a>23. <code>randomIntArrayInRange</code>：生成两数之间指定长度的随机数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomIntArrayInRange = <span class="function">(<span class="params">min, max, n = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: n &#125;, () =&gt; <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min);</span><br><span class="line">  </span><br><span class="line">randomIntArrayInRange(<span class="number">12</span>, <span class="number">35</span>, <span class="number">10</span>); <span class="comment">// [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="24-sample：在指定数组中获取随机数"><a href="#24-sample：在指定数组中获取随机数" class="headerlink" title="24. sample：在指定数组中获取随机数"></a>24. <code>sample</code>：在指定数组中获取随机数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sample = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)];</span><br><span class="line"></span><br><span class="line">sample([<span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>

<h3 id="25-sampleSize：在指定数组中获取指定长度的随机数"><a href="#25-sampleSize：在指定数组中获取指定长度的随机数" class="headerlink" title="25. sampleSize：在指定数组中获取指定长度的随机数"></a>25. <code>sampleSize</code>：在指定数组中获取指定长度的随机数</h3><p>此代码段可用于从数组中获取指定长度的随机数，直至穷尽数组。 <strong>使用Fisher-Yates算法对数组中的元素进行随机选择。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sampleSize = <span class="function">(<span class="params">[...arr], n = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr.slice(<span class="number">0</span>, n);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3,1]</span></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// [2,3,1]</span></span><br></pre></td></tr></table></figure>

<h3 id="26-shuffle：“洗牌”-数组"><a href="#26-shuffle：“洗牌”-数组" class="headerlink" title="26. shuffle：“洗牌” 数组"></a>26. <code>shuffle</code>：“洗牌” 数组</h3><p>此代码段使用<code>Fisher-Yates</code>算法随机排序数组的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> shuffle = <span class="function">(<span class="params">[...arr]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">shuffle(foo); <span class="comment">// [2, 3, 1], foo = [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="27-nest：根据parent-id生成树结构（阿里一面真题）"><a href="#27-nest：根据parent-id生成树结构（阿里一面真题）" class="headerlink" title="27. nest：根据parent_id生成树结构（阿里一面真题）"></a>27. <code>nest</code>：根据<code>parent_id</code>生成树结构（阿里一面真题）</h3><p>根据每项的<code>parent_id</code>，生成具体树形结构的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nest = <span class="function">(<span class="params">items, id = <span class="literal">null</span>, link = <span class="string">'parent_id'</span></span>) =&gt;</span></span><br><span class="line">  items</span><br><span class="line">    .filter(<span class="function"><span class="params">item</span> =&gt;</span> item[link] === id)</span><br><span class="line">    .map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; ...item, <span class="attr">children</span>: nest(items, item.id) &#125;));</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> comments = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">parent_id</span>: <span class="literal">null</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">parent_id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">parent_id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">parent_id</span>: <span class="number">4</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> nestedComments = nest(comments); <span class="comment">// [&#123; id: 1, parent_id: null, children: [...] &#125;]</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%A0%91%E5%BD%A2%E6%95%B0%E7%BB%84%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C.jpg" alt></p>
<h2 id="2-第二部分：函数"><a href="#2-第二部分：函数" class="headerlink" title="2. 第二部分：函数"></a>2. 第二部分：函数</h2><h3 id="1-attempt：捕获函数运行异常"><a href="#1-attempt：捕获函数运行异常" class="headerlink" title="1. attempt：捕获函数运行异常"></a>1. <code>attempt</code>：捕获函数运行异常</h3><p>该代码段执行一个函数，返回结果或捕获的错误对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onst attempt = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> e <span class="keyword">instanceof</span> <span class="built_in">Error</span> ? e : <span class="keyword">new</span> <span class="built_in">Error</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> elements = attempt(<span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.querySelectorAll(selector);</span><br><span class="line">&#125;, <span class="string">'&gt;_&gt;'</span>);</span><br><span class="line"><span class="keyword">if</span> (elements <span class="keyword">instanceof</span> <span class="built_in">Error</span>) elements = []; <span class="comment">// elements = []</span></span><br></pre></td></tr></table></figure>

<h3 id="2-defer：推迟执行"><a href="#2-defer：推迟执行" class="headerlink" title="2. defer：推迟执行"></a>2. <code>defer</code>：推迟执行</h3><p>此代码段延迟了函数的执行，直到清除了当前调用堆栈。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defer = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> setTimeout(fn, <span class="number">1</span>, ...args);</span><br><span class="line"></span><br><span class="line">defer(<span class="built_in">console</span>.log, <span class="string">'a'</span>), <span class="built_in">console</span>.log(<span class="string">'b'</span>); <span class="comment">// logs 'b' then 'a'</span></span><br></pre></td></tr></table></figure>

<h3 id="3-runPromisesInSeries：运行多个Promises"><a href="#3-runPromisesInSeries：运行多个Promises" class="headerlink" title="3. runPromisesInSeries：运行多个Promises"></a>3. <code>runPromisesInSeries</code>：运行多个<code>Promises</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> runPromisesInSeries = <span class="function"><span class="params">ps</span> =&gt;</span> ps.reduce(<span class="function">(<span class="params">p, next</span>) =&gt;</span> p.then(next), <span class="built_in">Promise</span>.resolve());</span><br><span class="line"><span class="keyword">const</span> delay = <span class="function"><span class="params">d</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">r</span> =&gt;</span> setTimeout(r, d));</span><br><span class="line"></span><br><span class="line">runPromisesInSeries([<span class="function"><span class="params">()</span> =&gt;</span> delay(<span class="number">1000</span>), () =&gt; delay(<span class="number">2000</span>)]);</span><br><span class="line"><span class="comment">//依次执行每个Promises ，总共需要3秒钟才能完成</span></span><br></pre></td></tr></table></figure>

<h3 id="4-timeTaken：计算函数执行时间"><a href="#4-timeTaken：计算函数执行时间" class="headerlink" title="4. timeTaken：计算函数执行时间"></a>4. <code>timeTaken</code>：计算函数执行时间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> timeTaken = <span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'timeTaken'</span>);</span><br><span class="line">  <span class="keyword">const</span> r = callback();</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'timeTaken'</span>);</span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">timeTaken(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">10</span>)); <span class="comment">// 1024, (logged): timeTaken: 0.02099609375ms</span></span><br></pre></td></tr></table></figure>

<h3 id="5-createEventHub：简单的发布-订阅模式"><a href="#5-createEventHub：简单的发布-订阅模式" class="headerlink" title="5. createEventHub：简单的发布/订阅模式"></a>5. <code>createEventHub</code>：简单的发布/订阅模式</h3><p>创建一个发布/订阅（发布-订阅）事件集线，有<code>emit</code>，<code>on</code>和<code>off</code>方法。</p>
<ol>
<li>使用<code>Object.create(null)</code>创建一个空的<code>hub</code>对象。</li>
<li><code>emit</code>，根据<code>event</code>参数解析处理程序数组，然后<code>.forEach()</code>通过传入数据作为参数来运行每个处理程序。</li>
<li><code>on</code>，为事件创建一个数组（若不存在则为空数组），然后<code>.push()</code>将处理程序添加到该数组。</li>
<li><code>off</code>，用<code>.findIndex()</code>在事件数组中查找处理程序的索引，并使用<code>.splice()</code>删除。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createEventHub = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  hub: <span class="built_in">Object</span>.create(<span class="literal">null</span>),</span><br><span class="line">  emit(event, data) &#123;</span><br><span class="line">    (<span class="keyword">this</span>.hub[event] || []).forEach(<span class="function"><span class="params">handler</span> =&gt;</span> handler(data));</span><br><span class="line">  &#125;,</span><br><span class="line">  on(event, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.hub[event]) <span class="keyword">this</span>.hub[event] = [];</span><br><span class="line">    <span class="keyword">this</span>.hub[event].push(handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  off(event, handler) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = (<span class="keyword">this</span>.hub[event] || []).findIndex(<span class="function"><span class="params">h</span> =&gt;</span> h === handler);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">-1</span>) <span class="keyword">this</span>.hub[event].splice(i, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.hub[event].length === <span class="number">0</span>) <span class="keyword">delete</span> <span class="keyword">this</span>.hub[event];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data);</span><br><span class="line"><span class="keyword">const</span> hub = createEventHub();</span><br><span class="line"><span class="keyword">let</span> increment = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅，监听不同事件</span></span><br><span class="line">hub.on(<span class="string">'message'</span>, handler);</span><br><span class="line">hub.on(<span class="string">'message'</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">'Message event fired'</span>));</span><br><span class="line">hub.on(<span class="string">'increment'</span>, () =&gt; increment++);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发布：发出事件以调用所有订阅给它们的处理程序，并将数据作为参数传递给它们</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, <span class="string">'hello world'</span>); <span class="comment">// 打印 'hello world' 和 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, &#123; <span class="attr">hello</span>: <span class="string">'world'</span> &#125;); <span class="comment">// 打印 对象 和 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'increment'</span>); <span class="comment">// increment = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止订阅</span></span><br><span class="line">hub.off(<span class="string">'message'</span>, handler);</span><br></pre></td></tr></table></figure>

<h3 id="6-memoize：缓存函数"><a href="#6-memoize：缓存函数" class="headerlink" title="6. memoize：缓存函数"></a>6. <code>memoize</code>：缓存函数</h3><p>通过实例化一个<code>Map</code>对象来创建一个空的缓存。</p>
<p>通过检查输入值的函数输出是否已缓存，返回存储一个参数的函数，该参数将被提供给已记忆的函数；如果没有，则存储并返回它。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoize = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">const</span> cached = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cache.has(val) ? cache.get(val) : cache.set(val, fn.call(<span class="keyword">this</span>, val)) &amp;&amp; cache.get(val);</span><br><span class="line">  &#125;;</span><br><span class="line">  cached.cache = cache;</span><br><span class="line">  <span class="keyword">return</span> cached;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>Ps: 这个版本可能不是很清晰，还有Vue源码版的：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create a cached version of a pure function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cached</span>&lt;<span class="title">F</span>: <span class="title">Function</span>&gt; (<span class="params">fn: F</span>): <span class="title">F</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">return</span> (<span class="function"><span class="keyword">function</span> <span class="title">cachedFn</span> (<span class="params">str: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> hit = cache[str]</span><br><span class="line">    <span class="keyword">return</span> hit || (cache[str] = fn(str))</span><br><span class="line">  &#125;: any)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-once：只调用一次的函数"><a href="#7-once：只调用一次的函数" class="headerlink" title="7. once：只调用一次的函数"></a>7. <code>once</code>：只调用一次的函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> once = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> called = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!called) &#123;</span><br><span class="line">      called = <span class="literal">true</span></span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startApp = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>, event); <span class="comment">// document.body, MouseEvent</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, once(startApp)); <span class="comment">// 只执行一次startApp</span></span><br></pre></td></tr></table></figure>

<h3 id="8-flattenObject：以键的路径扁平化对象"><a href="#8-flattenObject：以键的路径扁平化对象" class="headerlink" title="8. flattenObject：以键的路径扁平化对象"></a>8. <code>flattenObject</code>：以键的路径扁平化对象</h3><p>使用递归。</p>
<ol>
<li>利用<code>Object.keys(obj)</code>联合<code>Array.prototype.reduce()</code>，以每片叶子节点转换为扁平的路径节点。</li>
<li>如果键的值是一个对象，则函数使用调用适当的自身<code>prefix</code>以创建路径<code>Object.assign()</code>。</li>
<li>否则，它将适当的前缀键值对添加到累加器对象。</li>
<li><code>prefix</code>除非您希望每个键都有一个前缀，否则应始终省略第二个参数。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flattenObject = <span class="function">(<span class="params">obj, prefix = <span class="string">''</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).reduce(<span class="function">(<span class="params">acc, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> pre = prefix.length ? prefix + <span class="string">'.'</span> : <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[k] === <span class="string">'object'</span>) <span class="built_in">Object</span>.assign(acc, flattenObject(obj[k], pre + k));</span><br><span class="line">    <span class="keyword">else</span> acc[pre + k] = obj[k];</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  </span><br><span class="line">flattenObject(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">1</span> &#125; &#125;, <span class="attr">d</span>: <span class="number">1</span> &#125;); <span class="comment">// &#123; 'a.b.c': 1, d: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-unflattenObject：以键的路径展开对象"><a href="#9-unflattenObject：以键的路径展开对象" class="headerlink" title="9. unflattenObject：以键的路径展开对象"></a>9. <code>unflattenObject</code>：以键的路径展开对象</h3><p>与上面的相反，展开对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unflattenObject = <span class="function"><span class="params">obj</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).reduce(<span class="function">(<span class="params">acc, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (k.indexOf(<span class="string">'.'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> keys = k.split(<span class="string">'.'</span>);</span><br><span class="line">      <span class="built_in">Object</span>.assign(</span><br><span class="line">        acc,</span><br><span class="line">        <span class="built_in">JSON</span>.parse(</span><br><span class="line">          <span class="string">'&#123;'</span> +</span><br><span class="line">            keys.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (i !== keys.length - <span class="number">1</span> ? <span class="string">`"<span class="subst">$&#123;v&#125;</span>":&#123;`</span> : <span class="string">`"<span class="subst">$&#123;v&#125;</span>":`</span>)).join(<span class="string">''</span>) +</span><br><span class="line">            obj[k] +</span><br><span class="line">            <span class="string">'&#125;'</span>.repeat(keys.length)</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> acc[k] = obj[k];</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  </span><br><span class="line">unflattenObject(&#123; <span class="string">'a.b.c'</span>: <span class="number">1</span>, <span class="attr">d</span>: <span class="number">1</span> &#125;); <span class="comment">// &#123; a: &#123; b: &#123; c: 1 &#125; &#125;, d: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<p>这个的用途，在做<code>Tree</code>组件或复杂表单时取值非常舒服。</p>
<h2 id="3-第三部分：字符串"><a href="#3-第三部分：字符串" class="headerlink" title="3. 第三部分：字符串"></a>3. 第三部分：字符串</h2><h3 id="1-byteSize：返回字符串的字节长度"><a href="#1-byteSize：返回字符串的字节长度" class="headerlink" title="1.byteSize：返回字符串的字节长度"></a>1.<code>byteSize</code>：返回字符串的字节长度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> byteSize = <span class="function"><span class="params">str</span> =&gt;</span> <span class="keyword">new</span> Blob([str]).size;</span><br><span class="line"></span><br><span class="line">byteSize(<span class="string">'😀'</span>); <span class="comment">// 4</span></span><br><span class="line">byteSize(<span class="string">'Hello World'</span>); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>

<h3 id="2-capitalize：首字母大写"><a href="#2-capitalize：首字母大写" class="headerlink" title="2. capitalize：首字母大写"></a>2. <code>capitalize</code>：首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = <span class="function">(<span class="params">[first, ...rest]</span>) =&gt;</span></span><br><span class="line">  first.toUpperCase() + rest.join(<span class="string">''</span>);</span><br><span class="line">  </span><br><span class="line">capitalize(<span class="string">'fooBar'</span>); <span class="comment">// 'FooBar'</span></span><br><span class="line">capitalize(<span class="string">'fooBar'</span>, <span class="literal">true</span>); <span class="comment">// 'Foobar'</span></span><br></pre></td></tr></table></figure>

<h3 id="3-capitalizeEveryWord：每个单词首字母大写"><a href="#3-capitalizeEveryWord：每个单词首字母大写" class="headerlink" title="3. capitalizeEveryWord：每个单词首字母大写"></a>3. <code>capitalizeEveryWord</code>：每个单词首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalizeEveryWord = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/\b[a-z]/g</span>, char =&gt; char.toUpperCase());</span><br><span class="line"></span><br><span class="line">capitalizeEveryWord(<span class="string">'hello world!'</span>); <span class="comment">// 'Hello World!'</span></span><br></pre></td></tr></table></figure>

<h3 id="4-decapitalize：首字母小写"><a href="#4-decapitalize：首字母小写" class="headerlink" title="4. decapitalize：首字母小写"></a>4. <code>decapitalize</code>：首字母小写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> decapitalize = <span class="function">(<span class="params">[first, ...rest]</span>) =&gt;</span></span><br><span class="line">  first.toLowerCase() + rest.join(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">decapitalize(<span class="string">'FooBar'</span>); <span class="comment">// 'fooBar'</span></span><br><span class="line">decapitalize(<span class="string">'FooBar'</span>); <span class="comment">// 'fooBar'</span></span><br></pre></td></tr></table></figure>

<h3 id="5-luhnCheck：银行卡号码校验（luhn算法）"><a href="#5-luhnCheck：银行卡号码校验（luhn算法）" class="headerlink" title="5. luhnCheck：银行卡号码校验（luhn算法）"></a>5. <code>luhnCheck</code>：银行卡号码校验（<code>luhn</code>算法）</h3><p><code>Luhn</code>算法的实现，用于验证各种标识号，例如信用卡号，IMEI号，国家提供商标识号等。</p>
<p>与<code>String.prototype.split(&#39;&#39;)</code>结合使用，以获取数字数组。获得最后一个数字。实施<code>luhn</code>算法。如果被整除，则返回，否则返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> luhnCheck = <span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = (num + <span class="string">''</span>)</span><br><span class="line">    .split(<span class="string">''</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">parseInt</span>(x));</span><br><span class="line">  <span class="keyword">let</span> lastDigit = arr.splice(<span class="number">0</span>, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> sum = arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (i % <span class="number">2</span> !== <span class="number">0</span> ? acc + val : acc + ((val * <span class="number">2</span>) % <span class="number">9</span>) || <span class="number">9</span>), <span class="number">0</span>);</span><br><span class="line">  sum += lastDigit;</span><br><span class="line">  <span class="keyword">return</span> sum % <span class="number">10</span> === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">luhnCheck(<span class="string">'4485275742308327'</span>); <span class="comment">// true</span></span><br><span class="line">luhnCheck(<span class="number">6011329933655299</span>); <span class="comment">//  false</span></span><br><span class="line">luhnCheck(<span class="number">123456789</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="补充：银行卡号码的校验规则："><a href="#补充：银行卡号码的校验规则：" class="headerlink" title="补充：银行卡号码的校验规则："></a>补充：<strong>银行卡号码的校验规则</strong>：</h4><p>关于<code>luhn</code>算法，可以参考以下文章：</p>
<blockquote>
<p><a href="https://www.cnblogs.com/cc11001100/p/9357177.html" target="_blank" rel="noopener">银行卡号码校验算法（Luhn算法，又叫模10算法）</a></p>
</blockquote>
<p>银行卡号码的校验采用<code>Luhn</code>算法，校验过程大致如下：</p>
<ol>
<li>从右到左给卡号字符串编号，最右边第一位是1，最右边第二位是2，最右边第三位是3….</li>
<li>从右向左遍历，对每一位字符t执行第三个步骤，并将每一位的计算结果相加得到一个数s。</li>
<li>对每一位的计算规则：如果这一位是奇数位，则返回t本身，如果是偶数位，则先将t乘以2得到一个数n，如果n是一位数（小于10），直接返回n，否则将n的个位数和十位数相加返回。</li>
<li>如果s能够整除10，则此号码有效，否则号码无效。</li>
</ol>
<p>因为最终的结果会对10取余来判断是否能够整除10，所以又叫做模10算法。</p>
<p>当然，还是库比较香: <strong>bankcardinfo</strong></p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E9%93%B6%E8%A1%8C%E5%8D%A1%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%B8%AA%E5%BA%93.jpg" alt></p>
<h3 id="6-splitLines：将多行字符串拆分为行数组。"><a href="#6-splitLines：将多行字符串拆分为行数组。" class="headerlink" title="6. splitLines：将多行字符串拆分为行数组。"></a>6. <code>splitLines</code>：将多行字符串拆分为行数组。</h3><p>使用<code>String.prototype.split()</code>和正则表达式匹配换行符并创建一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> splitLines = <span class="function"><span class="params">str</span> =&gt;</span> str.split(<span class="regexp">/\r?\n/</span>);</span><br><span class="line"></span><br><span class="line">splitLines(<span class="string">'This\nis a\nmultiline\nstring.\n'</span>); <span class="comment">// ['This', 'is a', 'multiline', 'string.' , '']</span></span><br></pre></td></tr></table></figure>

<h3 id="7-stripHTMLTags：删除字符串中的HTMl标签"><a href="#7-stripHTMLTags：删除字符串中的HTMl标签" class="headerlink" title="7. stripHTMLTags：删除字符串中的HTMl标签"></a>7. <code>stripHTMLTags</code>：删除字符串中的<code>HTMl</code>标签</h3><p>从字符串中删除<code>HTML / XML</code>标签。</p>
<p>使用正则表达式从字符串中删除<code>HTML / XML</code> 标记。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stripHTMLTags = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/&lt;[^&gt;]*&gt;/g</span>, <span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">stripHTMLTags(<span class="string">'&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;'</span>); <span class="comment">// 'lorem ipsum'</span></span><br></pre></td></tr></table></figure>

<h2 id="4-第四部分：对象"><a href="#4-第四部分：对象" class="headerlink" title="4. 第四部分：对象"></a>4. 第四部分：对象</h2><h3 id="1-dayOfYear：当前日期天数"><a href="#1-dayOfYear：当前日期天数" class="headerlink" title="1. dayOfYear：当前日期天数"></a>1. <code>dayOfYear</code>：当前日期天数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dayOfYear = <span class="function"><span class="params">date</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Math</span>.floor((date - <span class="keyword">new</span> <span class="built_in">Date</span>(date.getFullYear(), <span class="number">0</span>, <span class="number">0</span>)) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">dayOfYear(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// 285</span></span><br></pre></td></tr></table></figure>

<h3 id="2-forOwn：迭代属性并执行回调"><a href="#2-forOwn：迭代属性并执行回调" class="headerlink" title="2. forOwn：迭代属性并执行回调"></a>2. <code>forOwn</code>：迭代属性并执行回调</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> forOwn = <span class="function">(<span class="params">obj, fn</span>) =&gt;</span> <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> fn(obj[key], key, obj));</span><br><span class="line">forOwn(&#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">a</span>: <span class="number">1</span> &#125;, v =&gt; <span class="built_in">console</span>.log(v)); <span class="comment">// 'bar', 1</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Get-Time-From-Date：返回当前24小时制时间的字符串"><a href="#3-Get-Time-From-Date：返回当前24小时制时间的字符串" class="headerlink" title="3. Get Time From Date：返回当前24小时制时间的字符串"></a>3. <code>Get Time From Date</code>：返回当前24小时制时间的字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getColonTimeFromDate = <span class="function"><span class="params">date</span> =&gt;</span> date.toTimeString().slice(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">getColonTimeFromDate(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// "08:38:00"</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Get-Days-Between-Dates：返回日期间的天数"><a href="#4-Get-Days-Between-Dates：返回日期间的天数" class="headerlink" title="4. Get Days Between Dates：返回日期间的天数"></a>4. <code>Get Days Between Dates</code>：返回日期间的天数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getDaysDiffBetweenDates = <span class="function">(<span class="params">dateInitial, dateFinal</span>) =&gt;</span></span><br><span class="line">  (dateFinal - dateInitial) / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>);</span><br><span class="line">  </span><br><span class="line">getDaysDiffBetweenDates(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2019-01-01'</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2019-10-14'</span>)); <span class="comment">// 286</span></span><br></pre></td></tr></table></figure>

<h3 id="5-is：检查值是否为特定类型。"><a href="#5-is：检查值是否为特定类型。" class="headerlink" title="5. is：检查值是否为特定类型。"></a>5. <code>is</code>：检查值是否为特定类型。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> is = <span class="function">(<span class="params">type, val</span>) =&gt;</span> ![, <span class="literal">null</span>].includes(val) &amp;&amp; val.constructor === type;</span><br><span class="line"></span><br><span class="line">is(<span class="built_in">Array</span>, [<span class="number">1</span>]); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">ArrayBuffer</span>, <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Map</span>, <span class="keyword">new</span> <span class="built_in">Map</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">RegExp</span>, /./g); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Set</span>, <span class="keyword">new</span> <span class="built_in">Set</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">WeakMap</span>, <span class="keyword">new</span> <span class="built_in">WeakMap</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">WeakSet</span>, <span class="keyword">new</span> <span class="built_in">WeakSet</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">String</span>, <span class="string">''</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">String</span>, <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">''</span>)); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Number</span>, <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Number</span>, <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Boolean</span>, <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Boolean</span>, <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="6-isAfterDate：检查是否在某日期后"><a href="#6-isAfterDate：检查是否在某日期后" class="headerlink" title="6. isAfterDate：检查是否在某日期后"></a>6. <code>isAfterDate</code>：检查是否在某日期后</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAfterDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &gt; dateB;</span><br><span class="line"></span><br><span class="line">isAfterDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="7-isBeforeDate：检查是否在某日期前"><a href="#7-isBeforeDate：检查是否在某日期前" class="headerlink" title="7. isBeforeDate：检查是否在某日期前"></a>7. <code>isBeforeDate</code>：检查是否在某日期前</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBeforeDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &lt; dateB;</span><br><span class="line"></span><br><span class="line">isBeforeDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="8-tomorrow：获取明天的字符串格式时间"><a href="#8-tomorrow：获取明天的字符串格式时间" class="headerlink" title="8 tomorrow：获取明天的字符串格式时间"></a>8 <code>tomorrow</code>：获取明天的字符串格式时间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> tomorrow = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  t.setDate(t.getDate() + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> t.toISOString().split(<span class="string">'T'</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">tomorrow(); <span class="comment">// 2019-10-15 (如果明天是2019-10-15)</span></span><br></pre></td></tr></table></figure>

<h3 id="9-equals：全等判断"><a href="#9-equals：全等判断" class="headerlink" title="9. equals：全等判断"></a>9. <code>equals</code>：全等判断</h3><p>在两个变量之间进行深度比较以确定它们是否全等。</p>
<p><strong>此代码段精简的核心在于Array.prototype.every()的使用。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> equals = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (a <span class="keyword">instanceof</span> <span class="built_in">Date</span> &amp;&amp; b <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> a.getTime() === b.getTime();</span><br><span class="line">  <span class="keyword">if</span> (!a || !b || (<span class="keyword">typeof</span> a !== <span class="string">'object'</span> &amp;&amp; <span class="keyword">typeof</span> b !== <span class="string">'object'</span>)) <span class="keyword">return</span> a === b;</span><br><span class="line">  <span class="keyword">if</span> (a.prototype !== b.prototype) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(a);</span><br><span class="line">  <span class="keyword">if</span> (keys.length !== <span class="built_in">Object</span>.keys(b).length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> keys.every(<span class="function"><span class="params">k</span> =&gt;</span> equals(a[k], b[k]));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">equals(&#123; <span class="attr">a</span>: [<span class="number">2</span>, &#123; <span class="attr">e</span>: <span class="number">3</span> &#125;], <span class="attr">b</span>: [<span class="number">4</span>], <span class="attr">c</span>: <span class="string">'foo'</span> &#125;, &#123; <span class="attr">a</span>: [<span class="number">2</span>, &#123; <span class="attr">e</span>: <span class="number">3</span> &#125;], <span class="attr">b</span>: [<span class="number">4</span>], <span class="attr">c</span>: <span class="string">'foo'</span> &#125;); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="5-第五部分：数字"><a href="#5-第五部分：数字" class="headerlink" title="5. 第五部分：数字"></a>5. 第五部分：数字</h2><h3 id="1-randomIntegerInRange：生成指定范围的随机整数"><a href="#1-randomIntegerInRange：生成指定范围的随机整数" class="headerlink" title="1. randomIntegerInRange：生成指定范围的随机整数"></a>1. <code>randomIntegerInRange</code>：生成指定范围的随机整数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomIntegerInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line"></span><br><span class="line">randomIntegerInRange(<span class="number">0</span>, <span class="number">5</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="2-randomNumberInRange：生成指定范围的随机小数"><a href="#2-randomNumberInRange：生成指定范围的随机小数" class="headerlink" title="2. randomNumberInRange：生成指定范围的随机小数"></a>2. <code>randomNumberInRange</code>：生成指定范围的随机小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomNumberInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.random() * (max - min) + min;</span><br><span class="line"></span><br><span class="line">randomNumberInRange(<span class="number">2</span>, <span class="number">10</span>); <span class="comment">// 6.0211363285087005</span></span><br></pre></td></tr></table></figure>

<h3 id="3-round：四舍五入到指定位数"><a href="#3-round：四舍五入到指定位数" class="headerlink" title="3. round：四舍五入到指定位数"></a>3. <code>round</code>：四舍五入到指定位数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> round = <span class="function">(<span class="params">n, decimals = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Number</span>(<span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(<span class="string">`<span class="subst">$&#123;n&#125;</span>e<span class="subst">$&#123;decimals&#125;</span>`</span>)&#125;</span>e-<span class="subst">$&#123;decimals&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">round(<span class="number">1.005</span>, <span class="number">2</span>); <span class="comment">// 1.01</span></span><br></pre></td></tr></table></figure>

<h3 id="4-sum：计算数组或多个数字的总和"><a href="#4-sum：计算数组或多个数字的总和" class="headerlink" title="4. sum：计算数组或多个数字的总和"></a>4. <code>sum</code>：计算数组或多个数字的总和</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">...arr</span>) =&gt;</span> [...arr].reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">// 10</span></span><br><span class="line">sum(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h3 id="5-toCurrency：简单的货币单位转换"><a href="#5-toCurrency：简单的货币单位转换" class="headerlink" title="5. toCurrency：简单的货币单位转换"></a>5. <code>toCurrency</code>：简单的货币单位转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toCurrency = <span class="function">(<span class="params">n, curr, LanguageFormat = <span class="literal">undefined</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Intl</span>.NumberFormat(LanguageFormat, &#123; <span class="attr">style</span>: <span class="string">'currency'</span>, <span class="attr">currency</span>: curr &#125;).format(n);</span><br><span class="line">  </span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'EUR'</span>); <span class="comment">// €123,456.79</span></span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'USD'</span>, <span class="string">'en-us'</span>); <span class="comment">// $123,456.79  </span></span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'USD'</span>, <span class="string">'fa'</span>); <span class="comment">// ۱۲۳٬۴۵۶٫۷۹</span></span><br><span class="line">toCurrency(<span class="number">322342436423.2435</span>, <span class="string">'JPY'</span>); <span class="comment">// ¥322,342,436,423</span></span><br></pre></td></tr></table></figure>

<h2 id="6-第六部分：浏览器操作及其它"><a href="#6-第六部分：浏览器操作及其它" class="headerlink" title="6. 第六部分：浏览器操作及其它"></a>6. 第六部分：浏览器操作及其它</h2><h3 id="1-bottomVisible：检查页面底部是否可见"><a href="#1-bottomVisible：检查页面底部是否可见" class="headerlink" title="1. bottomVisible：检查页面底部是否可见"></a>1. <code>bottomVisible</code>：检查页面底部是否可见</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bottomVisible = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.clientHeight + <span class="built_in">window</span>.scrollY &gt;=</span><br><span class="line">  (<span class="built_in">document</span>.documentElement.scrollHeight || <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line"></span><br><span class="line">bottomVisible(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Create-Directory：检查创建目录"><a href="#2-Create-Directory：检查创建目录" class="headerlink" title="2. Create Directory：检查创建目录"></a>2. <code>Create Directory</code>：检查创建目录</h3><p>此代码段调用<code>fs</code>模块的<code>existsSync()</code>检查目录是否存在，如果不存在，则<code>mkdirSync()</code>创建该目录。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> createDirIfNotExists = <span class="function"><span class="params">dir</span> =&gt;</span> (!fs.existsSync(dir) ? fs.mkdirSync(dir) : <span class="literal">undefined</span>);</span><br><span class="line">createDirIfNotExists(<span class="string">'test'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-currentURL：返回当前链接url"><a href="#3-currentURL：返回当前链接url" class="headerlink" title="3. currentURL：返回当前链接url"></a>3. <code>currentURL</code>：返回当前链接<code>url</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currentURL = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.location.href;</span><br><span class="line"></span><br><span class="line">currentURL(); <span class="comment">// 'https://juejin.im'</span></span><br></pre></td></tr></table></figure>

<h3 id="4-distance：返回两点间的距离"><a href="#4-distance：返回两点间的距离" class="headerlink" title="4. distance：返回两点间的距离"></a>4. <code>distance</code>：返回两点间的距离</h3><p>该代码段通过计算欧几里得距离来返回两点之间的距离。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> distance = <span class="function">(<span class="params">x0, y0, x1, y1</span>) =&gt;</span> <span class="built_in">Math</span>.hypot(x1 - x0, y1 - y0);</span><br><span class="line"></span><br><span class="line">distance(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2.23606797749979</span></span><br></pre></td></tr></table></figure>

<h3 id="5-elementContains：检查是否包含子元素"><a href="#5-elementContains：检查是否包含子元素" class="headerlink" title="5. elementContains：检查是否包含子元素"></a>5. <code>elementContains</code>：检查是否包含子元素</h3><p>此代码段检查父元素是否包含子元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elementContains = <span class="function">(<span class="params">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);</span><br><span class="line"></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'head'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'title'</span>)); <span class="comment">// true</span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'body'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'body'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="6-getStyle：返回指定元素的生效样式"><a href="#6-getStyle：返回指定元素的生效样式" class="headerlink" title="6. getStyle：返回指定元素的生效样式"></a>6. <code>getStyle</code>：返回指定元素的生效样式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getStyle = <span class="function">(<span class="params">el, ruleName</span>) =&gt;</span> getComputedStyle(el)[ruleName];</span><br><span class="line"></span><br><span class="line">getStyle(<span class="built_in">document</span>.querySelector(<span class="string">'p'</span>), <span class="string">'font-size'</span>); <span class="comment">// '16px'</span></span><br></pre></td></tr></table></figure>

<h3 id="7-getType：返回值或变量的类型名"><a href="#7-getType：返回值或变量的类型名" class="headerlink" title="7. getType：返回值或变量的类型名"></a>7. <code>getType</code>：返回值或变量的类型名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getType = <span class="function"><span class="params">v</span> =&gt;</span></span><br><span class="line">  v === <span class="literal">undefined</span> ? <span class="string">'undefined'</span> : v === <span class="literal">null</span> ? <span class="string">'null'</span> : v.constructor.name.toLowerCase();</span><br><span class="line">  </span><br><span class="line">getType(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])); <span class="comment">// 'set'</span></span><br><span class="line">getType([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 'array'</span></span><br></pre></td></tr></table></figure>

<h3 id="8-hasClass：校验指定元素的类名"><a href="#8-hasClass：校验指定元素的类名" class="headerlink" title="8. hasClass：校验指定元素的类名"></a>8. <code>hasClass</code>：校验指定元素的类名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hasClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.contains(className);</span><br><span class="line">hasClass(<span class="built_in">document</span>.querySelector(<span class="string">'p.special'</span>), <span class="string">'special'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="9-hide：隐藏所有的指定标签"><a href="#9-hide：隐藏所有的指定标签" class="headerlink" title="9. hide：隐藏所有的指定标签"></a>9. <code>hide</code>：隐藏所有的指定标签</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hide = <span class="function">(<span class="params">...el</span>) =&gt;</span> [...el].forEach(<span class="function"><span class="params">e</span> =&gt;</span> (e.style.display = <span class="string">'none'</span>));</span><br><span class="line"></span><br><span class="line">hide(<span class="built_in">document</span>.querySelectorAll(<span class="string">'img'</span>)); <span class="comment">// 隐藏所有&lt;img&gt;标签</span></span><br></pre></td></tr></table></figure>

<h3 id="10-httpsRedirect：HTTP-跳转-HTTPS"><a href="#10-httpsRedirect：HTTP-跳转-HTTPS" class="headerlink" title="10. httpsRedirect：HTTP 跳转 HTTPS"></a>10. <code>httpsRedirect</code>：<code>HTTP</code> 跳转 <code>HTTPS</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> httpsRedirect = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (location.protocol !== <span class="string">'https:'</span>) location.replace(<span class="string">'https://'</span> + location.href.split(<span class="string">'//'</span>)[<span class="number">1</span>]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">httpsRedirect(); <span class="comment">// 若在`http://www.baidu.com`, 则跳转到`https://www.baidu.com`</span></span><br></pre></td></tr></table></figure>

<h3 id="11-insertAfter：在指定元素之后插入新元素"><a href="#11-insertAfter：在指定元素之后插入新元素" class="headerlink" title="11. insertAfter：在指定元素之后插入新元素"></a>11. <code>insertAfter</code>：在指定元素之后插入新元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertAfter = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'afterend'</span>, htmlString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;div id="myId"&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span></span><br><span class="line">insertAfter(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;after&lt;/p&gt;'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="12-insertBefore：在指定元素之前插入新元素"><a href="#12-insertBefore：在指定元素之前插入新元素" class="headerlink" title="12. insertBefore：在指定元素之前插入新元素"></a>12. <code>insertBefore</code>：在指定元素之前插入新元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertBefore = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'beforebegin'</span>, htmlString);</span><br><span class="line"></span><br><span class="line">insertBefore(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;before&lt;/p&gt;'</span>); <span class="comment">// &lt;p&gt;before&lt;/p&gt; &lt;div id="myId"&gt;...&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="13-isBrowser：检查是否为浏览器环境"><a href="#13-isBrowser：检查是否为浏览器环境" class="headerlink" title="13. isBrowser：检查是否为浏览器环境"></a>13. <code>isBrowser</code>：检查是否为浏览器环境</h3><p>此代码段可用于确定当前运行时环境是否为浏览器。这有助于避免在服务器（节点）上运行前端模块时出错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowser = <span class="function"><span class="params">()</span> =&gt;</span> ![<span class="keyword">typeof</span> <span class="built_in">window</span>, <span class="keyword">typeof</span> <span class="built_in">document</span>].includes(<span class="string">'undefined'</span>);</span><br><span class="line"></span><br><span class="line">isBrowser(); <span class="comment">// true (browser)</span></span><br><span class="line">isBrowser(); <span class="comment">// false (Node)</span></span><br></pre></td></tr></table></figure>

<h3 id="14-isBrowserTab：检查当前标签页是否活动"><a href="#14-isBrowserTab：检查当前标签页是否活动" class="headerlink" title="14. isBrowserTab：检查当前标签页是否活动"></a>14. <code>isBrowserTab</code>：检查当前标签页是否活动</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowserTabFocused = <span class="function"><span class="params">()</span> =&gt;</span> !<span class="built_in">document</span>.hidden;</span><br><span class="line"></span><br><span class="line">isBrowserTabFocused(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="15-nodeListToArray：转换nodeList为数组"><a href="#15-nodeListToArray：转换nodeList为数组" class="headerlink" title="15. nodeListToArray：转换nodeList为数组"></a>15. <code>nodeListToArray</code>：转换<code>nodeList</code>为数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeListToArray = <span class="function"><span class="params">nodeList</span> =&gt;</span> [...nodeList];</span><br><span class="line"></span><br><span class="line">nodeListToArray(<span class="built_in">document</span>.childNodes); <span class="comment">// [ &lt;!DOCTYPE html&gt;, html ]</span></span><br></pre></td></tr></table></figure>

<h3 id="16-Random-Hexadecimal-Color-Code：随机十六进制颜色"><a href="#16-Random-Hexadecimal-Color-Code：随机十六进制颜色" class="headerlink" title="16. Random Hexadecimal Color Code：随机十六进制颜色"></a>16. <code>Random Hexadecimal Color Code</code>：随机十六进制颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> randomHexColorCode = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> n = (<span class="built_in">Math</span>.random() * <span class="number">0xfffff</span> * <span class="number">1000000</span>).toString(<span class="number">16</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'#'</span> + n.slice(<span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">randomHexColorCode(); <span class="comment">// "#e34155"</span></span><br></pre></td></tr></table></figure>

<h3 id="17-scrollToTop：平滑滚动至顶部"><a href="#17-scrollToTop：平滑滚动至顶部" class="headerlink" title="17. scrollToTop：平滑滚动至顶部"></a>17. <code>scrollToTop</code>：平滑滚动至顶部</h3><p>该代码段可用于平滑滚动到当前页面的顶部</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">scrollToTop();</span><br></pre></td></tr></table></figure>

<h3 id="18-smoothScroll：滚动到指定元素区域"><a href="#18-smoothScroll：滚动到指定元素区域" class="headerlink" title="18. smoothScroll：滚动到指定元素区域"></a>18. <code>smoothScroll</code>：滚动到指定元素区域</h3><p>该代码段可将指定元素平滑滚动到浏览器窗口的可见区域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> smoothScroll = <span class="function"><span class="params">element</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.querySelector(element).scrollIntoView(&#123;</span><br><span class="line">    behavior: <span class="string">'smooth'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">smoothScroll(<span class="string">'#fooBar'</span>); </span><br><span class="line">smoothScroll(<span class="string">'.fooBar'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="19-detectDeviceType：检测移动-PC设备"><a href="#19-detectDeviceType：检测移动-PC设备" class="headerlink" title="19. detectDeviceType：检测移动/PC设备"></a>19. <code>detectDeviceType</code>：检测移动/PC设备</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> detectDeviceType = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)</span><br><span class="line">    ? <span class="string">'Mobile'</span></span><br><span class="line">    : <span class="string">'Desktop'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="20-getScrollPosition：返回当前的滚动位置"><a href="#20-getScrollPosition：返回当前的滚动位置" class="headerlink" title="20. getScrollPosition：返回当前的滚动位置"></a>20. <code>getScrollPosition</code>：返回当前的滚动位置</h3><p>默认参数为<code>window</code> ，<code>pageXOffset(pageYOffset)</code>为第一选择，没有则用<code>scrollLeft(scrollTop)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPosition = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123;</span><br><span class="line">  x: el.pageXOffset !== <span class="literal">undefined</span> ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">  y: el.pageYOffset !== <span class="literal">undefined</span> ? el.pageYOffset : el.scrollTop</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">getScrollPosition(); <span class="comment">// &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="21-size：获取不同类型变量的字节长度"><a href="#21-size：获取不同类型变量的字节长度" class="headerlink" title="21. size：获取不同类型变量的字节长度"></a>21. <code>size</code>：获取不同类型变量的字节长度</h3><p>这个的实现非常巧妙，利用<code>Blob</code>类文件对象的特性，获取对象的长度。</p>
<p>另外，多重三元运算符，是真香。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> size = <span class="function"><span class="params">val</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.isArray(val)</span><br><span class="line">    ? val.length</span><br><span class="line">    : val &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">'object'</span></span><br><span class="line">    ? val.size || val.length || <span class="built_in">Object</span>.keys(val).length</span><br><span class="line">    : <span class="keyword">typeof</span> val === <span class="string">'string'</span></span><br><span class="line">    ? <span class="keyword">new</span> Blob([val]).size</span><br><span class="line">    : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">size([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// 5</span></span><br><span class="line">size(<span class="string">'size'</span>); <span class="comment">// 4</span></span><br><span class="line">size(&#123; <span class="attr">one</span>: <span class="number">1</span>, <span class="attr">two</span>: <span class="number">2</span>, <span class="attr">three</span>: <span class="number">3</span> &#125;); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="22-escapeHTML：转义HTML"><a href="#22-escapeHTML：转义HTML" class="headerlink" title="22. escapeHTML：转义HTML"></a>22. <code>escapeHTML</code>：转义<code>HTML</code></h3><p>当然是用来防<code>XSS</code>攻击啦。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> escapeHTML = <span class="function"><span class="params">str</span> =&gt;</span></span><br><span class="line">  str.replace(</span><br><span class="line">    /[&amp;<span class="xml"><span class="tag">&lt;&gt;</span>'"]/g,</span></span><br><span class="line"><span class="xml">    tag =&gt;</span></span><br><span class="line"><span class="xml">      (&#123;</span></span><br><span class="line"><span class="xml">        '&amp;': '<span class="symbol">&amp;amp;</span>',</span></span><br><span class="line"><span class="xml">        '<span class="tag">&lt;<span class="name">':</span> '&amp;<span class="attr">lt</span>;',</span></span></span><br><span class="line"><span class="xml">        '&gt;': '<span class="symbol">&amp;gt;</span>',</span></span><br><span class="line"><span class="xml">        "'": '<span class="symbol">&amp;#39;</span>',</span></span><br><span class="line"><span class="xml">        '"': '<span class="symbol">&amp;quot;</span>'</span></span><br><span class="line"><span class="xml">      &#125;[tag] || tag)</span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"></span><br><span class="line"><span class="xml">escapeHTML('<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Me &amp; you<span class="tag">&lt;/<span class="name">a</span>&gt;</span>'); // '<span class="symbol">&amp;lt;</span>a href=<span class="symbol">&amp;quot;</span>#<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span>Me <span class="symbol">&amp;amp;</span> you<span class="symbol">&amp;lt;</span>/a<span class="symbol">&amp;gt;</span>'</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/niuxinyublog/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/niuxinyublog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/niuxinyublog/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/niuxinyublog/page/7/">7</a><a class="page-number" href="/niuxinyublog/page/8/">8</a><a class="extend next" rel="next" href="/niuxinyublog/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Niu</p>
  <div class="site-description" itemprop="description">文章</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/niuxinyublog/archives/">
        
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span>
        
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Niu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/niuxinyublog/lib/anime.min.js?v=3.1.0"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/niuxinyublog/js/utils.js?v=7.4.0"></script><script src="/niuxinyublog/js/motion.js?v=7.4.0"></script>
<script src="/niuxinyublog/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/niuxinyublog/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
