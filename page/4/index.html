<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/niuxinyublog/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/niuxinyublog/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/niuxinyublog/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/niuxinyublog/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/niuxinyublog/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/niuxinyublog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/niuxinyublog/',
    scheme: 'Muse',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="文章">
<meta property="og:type" content="website">
<meta property="og:title" content="niu的blog">
<meta property="og:url" content="https://niuxinyu.github.io/niuxinyublog/page/4/index.html">
<meta property="og:site_name" content="niu的blog">
<meta property="og:description" content="文章">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="niu的blog">
<meta name="twitter:description" content="文章">
  <link rel="canonical" href="https://niuxinyu.github.io/niuxinyublog/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>niu的blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/niuxinyublog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">niu的blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/niuxinyublog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/niuxinyublog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/原生JS事件绑定-onclick和addEventListener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/原生JS事件绑定-onclick和addEventListener/" class="post-title-link" itemprop="url">原生JS事件绑定 onclick和addEventListener</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 22:02:10 / 修改时间：22:08:12" itemprop="dateCreated datePublished" datetime="2019-12-02T22:02:10+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="原生JS事件绑定-onclick和addEventListener"><a href="#原生JS事件绑定-onclick和addEventListener" class="headerlink" title="原生JS事件绑定 onclick和addEventListener"></a>原生JS事件绑定 onclick和addEventListener</h1><h2 id="onclick绑定方式"><a href="#onclick绑定方式" class="headerlink" title="onclick绑定方式"></a>onclick绑定方式</h2><p>优点：</p>
<ul>
<li>简洁</li>
<li>处理事件的 <code>this</code> 关键字指向当前元素</li>
</ul>
<p>缺点：</p>
<ul>
<li>不能对事件捕获或事件冒泡进行控制，只能使用事件冒泡，无法切换成事件捕获</li>
<li>一次只能对一个元素绑定一个事件处理程序，当使用window.onload属性时，会覆盖采用相同方法所绑定的事件代码</li>
</ul>
<blockquote>
<p>this与event差异不大 推荐使用event对象 这样你总是可以拥有全部的可用信息</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.target.innerHTML);<span class="comment">//event.target指向的是dd元素，以及他的所有信息</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);<span class="comment">//this也是指向dd元素，包含他的可用信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：有时也会有需要使用this的情况<br>当需要鼠标移入和移出的时候 event会触发该事件每一个子元素</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dd.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.backgroundColor = <span class="string">"red"</span>;<span class="comment">//不会改变子元素</span></span><br><span class="line">    event.target.style.backgroundColor = <span class="string">'red'</span>;<span class="comment">//会改变子元素</span></span><br><span class="line">&#125;;</span><br><span class="line">dd.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.backgroundColor = <span class="string">"green"</span></span><br><span class="line">    event.target.style.backgroundColor=<span class="string">"green"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="addEventListener绑定方式"><a href="#addEventListener绑定方式" class="headerlink" title="addEventListener绑定方式"></a>addEventListener绑定方式</h2><p>优点：</p>
<ul>
<li>可以支持事件处理的捕获阶段，也可以支持时间处理的冒泡阶段，两个阶段都是通过addEventListener最后一个参数设置为false(默认值，表示事件冒泡)或者true(表示事件捕获)来切换</li>
<li>事件处理 this与onclick一样</li>
<li>事件处理 this与onclick一样</li>
<li>你可以为某个元素绑定多个事件而不会覆盖之前绑定的处理程序 （按照顺序执行）</li>
</ul>
<p>缺点：</p>
<ul>
<li>IE8以下不支持</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dd.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);</span><br><span class="line">    <span class="built_in">console</span>.log( e.target.innerHTML );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="解除事件绑定"><a href="#解除事件绑定" class="headerlink" title="解除事件绑定"></a>解除事件绑定</h2><h3 id="对于-onclick"><a href="#对于-onclick" class="headerlink" title="对于 onclick"></a>对于 onclick</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="对于-addEventListener"><a href="#对于-addEventListener" class="headerlink" title="对于 addEventListener"></a>对于 addEventListener</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickShow</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">'clickShow'</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeShow</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">'removeShow'</span> );</span><br><span class="line">    dd.removeEventListener(<span class="string">'click'</span>,clickShow,<span class="literal">false</span>/<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">dd.addEventListener(<span class="string">'click'</span>,clickShow,flase/<span class="literal">true</span>);<span class="comment">//当第三个参数flase/true存在的时候 那么移除的时候也应该带有第三个参数,如果没有可以不带</span></span><br><span class="line"></span><br><span class="line">cc.addEventListener(<span class="string">'click'</span>,removeShow)</span><br></pre></td></tr></table></figure>

<h2 id="阻止事件冒泡e-stopPropagation"><a href="#阻止事件冒泡e-stopPropagation" class="headerlink" title="阻止事件冒泡e.stopPropagation()"></a>阻止事件冒泡e.stopPropagation()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dd.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.target.innerHTML);</span><br><span class="line">    <span class="keyword">this</span>.style.color = <span class="string">'red'</span>;</span><br><span class="line">    <span class="comment">//阻止事件冒泡 </span></span><br><span class="line">    <span class="comment">//防止点击dd的时候隐藏了父级domClick</span></span><br><span class="line">    e.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line">domClick.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.style.visibility = <span class="string">'hidden'</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>屏蔽浏览去的默认行为 e.preventDefult();return false;</p>
</blockquote>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/正则表达式笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/正则表达式笔记/" class="post-title-link" itemprop="url">正则表达式笔记</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 21:14:10 / 修改时间：22:10:10" itemprop="dateCreated datePublished" datetime="2019-12-02T21:14:10+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="1-1-基本语法"><a href="#1-1-基本语法" class="headerlink" title="1.1. 基本语法"></a>1.1. 基本语法</h2><p>通过一张图表来对正则表达式的基本进行一个回顾</p>
<table>
<thead>
<tr>
<th>single char</th>
<th>quantifiers(数量)</th>
<th>position(位置)</th>
</tr>
</thead>
<tbody><tr>
<td>\d 匹配数字</td>
<td>* 0个或者更多</td>
<td>^一行的开头</td>
</tr>
<tr>
<td>\w 匹配word(数字、字母)</td>
<td>+ 1个或更多，至少1个</td>
<td>$一行的结尾</td>
</tr>
<tr>
<td>\W 匹配<strong>非</strong>word(数字、字母)</td>
<td>? 0个或1个,一个Optional</td>
<td>\b 单词”结界”(word bounds)</td>
</tr>
<tr>
<td>\s 匹配white space(包括空格、tab等)</td>
<td>{min,max}出现次数在一个范围内</td>
<td></td>
</tr>
<tr>
<td>\S 匹配<strong>非</strong>white space(包括空格、tab等)</td>
<td>{n}匹配出现n次的</td>
<td></td>
</tr>
<tr>
<td>. 匹配任何，任何的字符</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="1-1-1-single-char"><a href="#1-1-1-single-char" class="headerlink" title="1.1.1. single char"></a>1.1.1. single char</h3><p>假设你有一段字符如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">There are some phone number 917-555-1234. Also， you can call me at 646.555.1234 and of course I am always reachable at (212)867-5309.</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>\w</code> </p>
<p>将匹配所有的单词，当然 () - 除外</p>
</li>
<li><p><code>\w\w\w</code> </p>
<p>发现匹配的有’<code>The</code>se <code>are</code> <code>som</code>e <code>pho</code>ne <code>number</code>s …’ </p>
<p>注意正则表达式是匹配一个连续串的规则，所以可以看到三个字母的单词可以匹配到，6个单词的也可以匹配到。</p>
</li>
<li><p><code>\s\s</code></p>
<p>匹配到一行中连续两个空格</p>
</li>
</ul>
<h3 id="1-1-2-position"><a href="#1-1-2-position" class="headerlink" title="1.1.2. position"></a>1.1.2. position</h3><p>回到刚才的问题之前，先熟悉下<code>^</code> <code>$</code> 和 <code>\b</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">This is somthing</span><br><span class="line">is about</span><br><span class="line">a blah</span><br><span class="line">words</span><br><span class="line">sequence of words</span><br><span class="line">Hello and</span><br><span class="line">GoodBye and </span><br><span class="line">Go gogo!</span><br></pre></td></tr></table></figure>

<p>来看下各种正则所匹配的内容</p>
<ul>
<li><code>\w+</code> 这个应该毫无疑问，匹配所有的words</li>
<li><code>^\w+</code> 多了一个<code>^</code>，这样子，就只能匹配到每一行开头的单词了<code>This</code> <code>is</code> <code>a</code> <code>words</code> <code>sequence</code> <code>Hello</code> <code>GoodBye</code> <code>Go</code></li>
<li><code>\w+$</code> 这样就能匹配到每行的最后一个字母</li>
</ul>
<p>回到刚才的问题</p>
<blockquote>
<p>现在想找5个字母组成的单词</p>
</blockquote>
<p>就变得很简单了，使用单词结界符<code>\b</code></p>
<p>答案就是<code>\b\w{5}\b</code></p>
<h3 id="1-1-3-找个电话号码吧"><a href="#1-1-3-找个电话号码吧" class="headerlink" title="1.1.3. 找个电话号码吧"></a>1.1.3. 找个电话号码吧</h3><p>最后，找一个刚才出现的电话号<code>123-456-1231</code></p>
<p>用以上最基本的正则方法就是 <code>\d{3}-\d{3}-\d{4}</code>，这样就找到了。 但是有的时候，电话号码是<code>123.456.1234</code> 或者 <code>(212)867-4233</code>的结构怎么办呢？</p>
<p>正则表达式中的<code>或</code>或者其他表达方式，下面一一来介绍。</p>
<h2 id="1-2-字符分类-char-class"><a href="#1-2-字符分类-char-class" class="headerlink" title="1.2. 字符分类(char class)"></a>1.2. 字符分类(char class)</h2><p>前面记录了最基本的方法，接下来说一下分类符<code>[]</code></p>
<p>这个符号用来表示逻辑关系<code>或</code>，比如<code>[abc]</code>表示a或者b或c.<code>[-.]</code>表示符号<code>-</code>或者<code>.</code>号(<strong>注意这里，在[]中的.号代表的就是这个符号，但是如果在其外面，表示个匹配所有。 所以如果不在[]之中，想要匹配’.’，就要通过转意符号.</strong>)</p>
<h3 id="1-2-1-分类的简单应用"><a href="#1-2-1-分类的简单应用" class="headerlink" title="1.2.1. 分类的简单应用"></a>1.2.1. 分类的简单应用</h3><p>字符序列：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The lynk is quite a link don<span class="string">'t you think? l nk l(nk</span></span><br></pre></td></tr></table></figure>

<p>正则表达式： <code>l[yi (]nk</code></p>
<p>结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lynk  link  l nk   l(nk</span><br></pre></td></tr></table></figure>

<p>很容易理解的，就是表达<code>或</code>逻辑。</p>
<h3 id="1-2-2-匹配所有可能的电话号码"><a href="#1-2-2-匹配所有可能的电话号码" class="headerlink" title="1.2.2. 匹配所有可能的电话号码"></a>1.2.2. 匹配所有可能的电话号码</h3><p>好了，现在回到之前遗留的问题，有以下字段，请匹配所有可能的电话号码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">These are some phone numbers <span class="number">915</span><span class="number">-134</span><span class="number">-3122.</span> Also,</span><br><span class="line">you can call me at <span class="number">643.123</span><span class="number">.1333</span> and <span class="keyword">of</span> course,</span><br><span class="line">I<span class="string">'m always reachable at (212)867-5509</span></span><br></pre></td></tr></table></figure>

<p>好的，一步一步来，刚才我们使用<code>\d{3}-\d{3}-\d{4}</code>匹配了连字符的情况。现在我们可以很轻松的把<code>.</code>这种情况加进去了</p>
<p>第一步： <code>\d{3}[-.]\d{3}[-.]\d{4}</code></p>
<p>第二步: 为了能够匹配括号，可以使用?来，因为这是一个option选择。所以最后就成了</p>
<p><code>\(?\d{3}[-.)]\d{3}[-.]\d{4}</code></p>
<p><strong>这里还是要说明，在[]中，特殊字符不需要转义，可以直接使用，比如[.()],但是在外面，是需要转义的( .等</strong></p>
<h3 id="1-2-3-的特殊语法"><a href="#1-2-3-的特殊语法" class="headerlink" title="1.2.3. []的特殊语法"></a>1.2.3. []的特殊语法</h3><p>刚才介绍了最简单和基本的功能，但是有些特殊的地方需要注意</p>
<ul>
<li><ol>
<li><code>-</code> 连接符是第一个字符时</li>
</ol>
<p>比如<code>[-.]</code>的含义是连字符<code>-</code>或者点符<code>.</code>。 但是，如果当连字符不是第一个字符时，比如<code>[a-z]</code>，这就表示是从字母a到字符z。</p>
</li>
<li><ol start="2">
<li>[]中的^</li>
</ol>
<p><code>^</code>在之前介绍中，是表示一行开头，但是在<code>[]</code>中，有着不同的含义。 <code>[ab]</code> 表示a或者b <code>[^ab]</code> 啥都行，只要不是a或b(<code>anythings except a and b</code>)，相当于取反</p>
</li>
</ul>
<h3 id="1-2-4-和"><a href="#1-2-4-和" class="headerlink" title="1.2.4. []和()"></a>1.2.4. []和()</h3><p>除了使用<code>[]</code>表示或逻辑,<code>()</code>也是可以的。用法是<code>(a|b)</code>表示a或者b</p>
<p>比如下面的例子，匹配所有email</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gaoyaqi411@126.com  </span><br><span class="line">dyumc@google.net </span><br><span class="line">sam@sjtu.edu</span><br></pre></td></tr></table></figure>

<p>思路：</p>
<p>首先要想我到底相匹配什么，这里我想匹配的是</p>
<ol>
<li>任何一个以words开头的，一个或更多 <code>\w+</code></li>
<li>紧接着是一个<code>@</code>符号 <code>\w+@</code></li>
<li>接着有一个或者更多的words <code>\w+@\w+</code></li>
<li>接着一个<code>.</code>标点 <code>\w+@\w+\.</code></li>
<li>接着一个<code>com</code> <code>net</code> 或 <code>edu</code> <code>\w+@\w+\.(com|net|edu)</code></li>
</ol>
<p><strong>还是提醒注意第四步的.转义符号</strong></p>
<p>好了，这样几可以匹配以上的所有邮箱了。但是还有一个问题，因为邮箱用户名是可以有<code>.</code>的，比如<code>vincent.ko@126.com</code></p>
<p>其实仍然很简单，修复如下： <code>[\w.]+@\w+\.(com|net|edu)</code></p>
<h3 id="1-2-5-总结"><a href="#1-2-5-总结" class="headerlink" title="1.2.5. 总结"></a>1.2.5. 总结</h3><ol>
<li><code>[]</code>的作用，用英文表达就是”alternation”,表达一个或的逻辑；</li>
<li><code>/[-.(]/</code> 在符号中的连字符<code>-</code>放在第一位表示连字符本身，如果放在中间，表示”从..到..”，比如<code>[a-z]</code>表示a-z</li>
<li><code>[.)]</code> 括号中的特殊符号不需要转义，就表示其本身</li>
<li><code>[^ab]</code> 括号中的<code>^</code>表示非，anythings except <code>a</code> and <code>b</code></li>
<li><code>(a|b)</code>也可表示选择，但是它有更强大的功能….</li>
</ol>
<p>所以，<code>()</code>的强大功能是什么呢？ 分组捕获，这对序列的替换、交换是很有帮助的。 后面一节进行学习记录</p>
<h2 id="1-3-分组捕获-capturing-groups"><a href="#1-3-分组捕获-capturing-groups" class="headerlink" title="1.3. 分组捕获(capturing groups)"></a>1.3. 分组捕获(capturing groups)</h2><p>什么是分组捕获，现在回到之前电话号码的例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234</span><br><span class="line">915-412-1333</span><br><span class="line"></span><br><span class="line">//我想要保留区号，把后面的电话号码变为通用性的</span><br><span class="line">👇👇👇👇👇👇👇👇👇👇👇👇</span><br><span class="line"></span><br><span class="line">212-xxx-xxxx</span><br><span class="line">915-xxx-xxxx</span><br></pre></td></tr></table></figure>

<p>按照之前的做法<code>\d{3}-\d{3}-\d{4}</code>,这种匹配的方式，是将整个电话号码作为一个组(group)匹配起来。 我们把<code>212-555-1234</code>这样的叫<code>Group0</code>。</p>
<p>这个时候，如果我们加了一个括号<code>\d{3}-(\d{3})-\d{4}</code>，那么匹配到的<code>555</code>就叫<code>Group1</code>。 以此类推，如果有两个小括号<code>\d{3}-(\d{3})-(\d{4})</code>那么分组就是下面的情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234   Group0</span><br><span class="line">555            Group1</span><br><span class="line">1234           Group2</span><br></pre></td></tr></table></figure>

<h3 id="1-3-1-选择分组"><a href="#1-3-1-选择分组" class="headerlink" title="1.3.1. 选择分组"></a>1.3.1. 选择分组</h3><p>现在组已经分好，那么如何选择已经匹配的分组？</p>
<p>这里有两种方法，第一种使用<code>$</code>符号，比如<code>$1</code> 代表<code>555</code>,<code>$2</code>代表<code>1234</code>；第二种，使用<code>\</code>,比如<code>\1</code>代表<code>555</code>。两种的使用场景不一样，先讲<code>$</code></p>
<p>现在为了满足最开始的要求，我们可以这么做</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: \(?(\d&#123;<span class="number">3</span>&#125;)[-.)]\d&#123;<span class="number">3</span>&#125;[-.]\d&#123;<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">replace: $<span class="number">1</span>-xxx-xxxx</span><br></pre></td></tr></table></figure>

<p><strong>ps: 这里可以直接用JS的replace函数进行操作，但是正则不是JS专属的，所以这里先介绍通用方法，之后对JS部分进行总结</strong></p>
<h3 id="1-3-2-实景训练"><a href="#1-3-2-实景训练" class="headerlink" title="1.3.2. 实景训练"></a>1.3.2. 实景训练</h3><ol>
<li>现在有一个名单列表，但是姓和名称是反的，我需要把他交换过来</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shiffina, Daniel</span><br><span class="line">shifafl, Daniell</span><br><span class="line">shquer, Danny</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>实现方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: (\w+),\s(\w+)</span><br><span class="line"></span><br><span class="line">replace: $2 $1</span><br></pre></td></tr></table></figure>

<p>注意：<code>$0</code> 是所有匹配到的，所以第一个加括号的是<code>$1</code></p>
<ol start="2">
<li>匹配markdown中的link标签，并替换为html标签</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[google](http:<span class="comment">//google.com)</span></span><br><span class="line">[itp](http:<span class="comment">//itp.nyu.edu)</span></span><br><span class="line">[Coding Rainbow](http:<span class="comment">//codingrainbow.com)</span></span><br></pre></td></tr></table></figure>

<p>解析： 这道题有些坑，需要慢慢来。</p>
<p>看到这个，第一个想考虑匹配<code>[google]</code>这个东西，立马想到正则表达式<code>\[.*\]</code>。 这个是巨大的坑，在当前来看，它的确能正确匹配到上面的三条。 但是如果文本是这样的：</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-1.jpg" alt></p>
<p>看到了，第一行的内容会全部匹配下来，而不能区分<code>[google]</code>和<code>[test]</code>。 之所以这样，<strong>是因为.是贪婪的，他表示所有，所有能匹配到的，所以当然也包括了]，一直到这一行的最后一个]，它才停止。</strong></p>
<p>所以为了让它能正确匹配，需要去掉这种贪婪的属性。这里用到<code>？</code> 。 当<code>?</code>放在了<code>quantifiers</code>符号后，表示去掉贪婪属性，匹配到终止条件，即可停下。</p>
<p><code>\[.*?\]</code>这样子，就可以将<code>[google]</code>和<code>[test]</code>分开,效果如下：</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-2.jpg" alt></p>
<p>接下来完成所有内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg: \[(.*?)\]\((http.*?)\)</span><br><span class="line"></span><br><span class="line">replace: &lt;a href=&quot;$2&quot;&gt;$1&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-使用-选择器"><a href="#1-3-3-使用-选择器" class="headerlink" title="1.3.3. 使用\选择器"></a>1.3.3. 使用<code>\</code>选择器</h3><p><code>$</code>选择符是在替换的时候进行的标志或选择，但是如果在正则表达式本身，就要使用<code>\</code>选择了。比如以下的场景</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is is a a dog , I think think this is is really</span><br><span class="line">a a good good dog. Don&apos;t you you thinks so so ?</span><br></pre></td></tr></table></figure>

<p>我们想要匹配比如<code>is is</code> <code>so so</code>这样连续的序列，就用到了下面的表达方式: <code>(\w+)\s\1</code></p>
<p>效果:</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-3.jpg" alt></p>
<p>嗯，差不多达到效果，但是有一些小的bug。比如第一句话<code>This is is a</code> 这个就匹配不准确，会把第一个This的后面字母匹配进去。 <strong>这就用到第一节说的字符结界 \b了</strong>，就变成了<code>\b(\w+)\s\1\b</code></p>
<p>好了，大功告成，就不贴效果图了，自行脑补就好了。</p>
<h3 id="1-3-4-总结"><a href="#1-3-4-总结" class="headerlink" title="1.3.4. 总结"></a>1.3.4. 总结</h3><ol>
<li>分组捕获，使用()进行数据分组，编号0代表整个匹配项，选择的分组从1号开始</li>
<li>选择器可以使用<code>$1</code>和<code>\1</code>，但是使用场景不同，<code>\</code>用在正则表达式自己身上</li>
<li><code>?</code>符号可以禁止贪婪属性，放在<code>.*</code>之后，表示一次匹配遇到重点就可以停止。否则将会一直向后匹配。</li>
</ol>
<h2 id="1-4-在JavaScript中的应用"><a href="#1-4-在JavaScript中的应用" class="headerlink" title="1.4. 在JavaScript中的应用"></a>1.4. 在JavaScript中的应用</h2><p>在js中，主要的正则表达式都是涉及到string的应用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/w+/</span></span><br></pre></td></tr></table></figure>

<p>这两个分别是string和reg的字面量创建方法。当要使用正则来进行操作的时候，使用了<code>r.test()</code>和<code>str.match()</code> 以及<code>str.replace</code>等方法。</p>
<h3 id="1-4-1-reg-test"><a href="#1-4-1-reg-test" class="headerlink" title="1.4.1. reg.test()"></a>1.4.1. reg.test()</h3><p>正则表达式本身有一个test的方法，这个方法只能测试是否包含，返回一个bool变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;/</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'123'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'123ABC'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line">r.test(a)  <span class="comment">//true</span></span><br><span class="line">r.test(b) <span class="comment">//true</span></span><br><span class="line">r.test(c) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>嗯，这个很简单，而且用的实际不多，下面着重讲str上的一些方法。</p>
<h3 id="1-4-2-str-match"><a href="#1-4-2-str-match" class="headerlink" title="1.4.2. str.match()"></a>1.4.2. str.match()</h3><p>与test()不同，不只是返回bool变量，它会返回你所匹配到的内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/compus/</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"compus, I know something about you"</span></span><br><span class="line">r.test(s)  <span class="comment">//true</span></span><br><span class="line">s.match(r)  <span class="comment">//["compus"]</span></span><br><span class="line">s.match(reg) <span class="comment">//["compus"]</span></span><br></pre></td></tr></table></figure>

<p>等等，好像有点问题，为什么最后一个返回的也是”compus”？这不科学。</p>
<p>好吧，实际上，match()返回了第一个可以匹配的序列。想要实现之前的效果，就要用到JS里关于正则的几个flag</p>
<h4 id="1-4-2-1-flag"><a href="#1-4-2-1-flag" class="headerlink" title="1.4.2.1. flag"></a>1.4.2.1. flag</h4><p>这个标志就在建立正则的时候就要有的，主要有三个</p>
<table>
<thead>
<tr>
<th>flag</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>g</td>
<td>全部的，给我匹配全部的</td>
</tr>
<tr>
<td>i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>m</td>
<td>多行匹配</td>
</tr>
</tbody></table>
<p>所以为了解决刚才的问题，只要这样子设置reg就可以了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/g</span></span><br></pre></td></tr></table></figure>

<p>看下面一个练习</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/\d&#123;3&#125;[-.]d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(r)); <span class="comment">//["111-2313"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(rg));<span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>

<p>嗯，找电话号码，是的，很方便。但是还有一个问题，刚才说的分组，那么match会返回分组吗？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sr = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(sr)); <span class="comment">//["111-2313","111"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(srg)); <span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>

<p>所以结论是： 当使用了全局flag<code>g</code>的时候，不会返回分组，而是全部的匹配结果；如果没有使用<code>g</code>，会将匹配到的结果和分组以数组的形式返回。</p>
<p>那么如何实现全局的分组？</p>
<h3 id="1-4-3-reg-exec"><a href="#1-4-3-reg-exec" class="headerlink" title="1.4.3. reg.exec()"></a>1.4.3. reg.exec()</h3><p>从字面意思来看，正则表达式的执行方法。 这个方法可以实现匹配全局，并返回分组的结果。</p>
<blockquote>
<p>reg.exec()每次调用，返回一个匹配的结果，匹配结果和分组以数组的形式返回，不断的调用即可返回下一个结果，直到返回<code>null</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> ;</span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span>;</span><br><span class="line"><span class="keyword">var</span> result = srg.exec(str);</span><br><span class="line"><span class="keyword">while</span>(result !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    result = srg.exec(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>result包含的内容可能比想象中的多，它是一个数组，比如第一次执行，他的结果为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"133-2311"</span>, <span class="string">"133"</span>, <span class="attr">index</span>: <span class="number">36</span>, </span><br><span class="line">input: <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> groups: <span class="literal">undefined</span>]</span><br></pre></td></tr></table></figure>

<h3 id="1-4-4-str-split"><a href="#1-4-4-str-split" class="headerlink" title="1.4.4. str.split"></a>1.4.4. str.split</h3><p>现在来到了更强的功能上，先说下split，我们知道split是将字符串按照某个字符分隔开，比如有以下一段话，需要将其分割成单词。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"unicorns and rainbows And, Cupcakes"</span></span><br></pre></td></tr></table></figure>

<p>分割成单词，首先想到的是空格隔开，于是可以用下面方式实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">var</span> result1 = s.split(<span class="regexp">/\s/</span>);</span><br><span class="line"><span class="comment">//完全一样的效果</span></span><br><span class="line"><span class="comment">//["unicorns", "and", "rainbows", "And,", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<p>嗯，这样体现不出来正则的强大，而且最主要的是没有实现要求。因为还有一个”And,”。所以要用正则了，匹配条件是<code>逗号或者空格</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,\s]/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//["unicorns", "and", "rainbows", "And", "", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<p>结果仍然和需要的有出入，因为多了一个””。 我们并不是想让它分割的依据是<code>逗号或者空格</code>,依据应该是<code>逗号或空格所在的连续序列</code>。 在原来的基础上加一个<code>+</code>，改成<code>/[,\s]+/</code>，这个含义就是<code>一个单独的逗号，或者一个单独的空格</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,\s]+/</span>);</span><br><span class="line"><span class="comment">// ["unicorns", "and", "rainbows", "And", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-1-单词分割"><a href="#1-4-4-1-单词分割" class="headerlink" title="1.4.4.1. 单词分割"></a>1.4.4.1. 单词分割</h4><p>好了，拓展一下，实现一个段落的单词分割，一个正则表达式就是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,.!?\s]+/</span>)</span><br></pre></td></tr></table></figure>

<p>当然，有个最简单的方法，我们可以这样去做</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/\W+/</span>);</span><br></pre></td></tr></table></figure>

<p>接着，如果我们想将一个段落的句子都分隔开，一个可以实现的表达式就是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[.,!?]+/</span>)</span><br></pre></td></tr></table></figure>

<p>最后，有一个小需求，就是在分割句子的同时，还想把相应的分隔符保留下来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = </span><br><span class="line"><span class="string">"Hello,My name is Vincent. Nice to Meet you!What's your name? Haha."</span></span><br></pre></td></tr></table></figure>

<p>这是一个小小的<code>ponit</code>，记住<strong>如果想要保留分隔符，只要给匹配的内容分组即可</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="regexp">/([.,!?]+)/</span>)</span><br><span class="line"><span class="comment">//["Hello", ",", "My name is Vincent", ".", " Nice to Meet you", "!", "What's your name", "?", " Haha", ".", ""]</span></span><br></pre></td></tr></table></figure>

<p>可以看到，这样就会把分隔符也存储起来</p>
<h3 id="1-4-5-str-replace"><a href="#1-4-5-str-replace" class="headerlink" title="1.4.5. str.replace()"></a>1.4.5. str.replace()</h3><p>replace也是字符串的方法，它的基本用法是<code>str.replace(reg,replace|function)</code>，第一个参数是正则表达式，代表匹配的内容，第二个参数是替换的字符串或者一个回掉函数。</p>
<p><strong>注意，replace不会修改原字符串，只是返回一个修改后的字符串;除此外，正则表达式如果没有使用g标志，也和match一样，只匹配/替换第一个</strong></p>
<h4 id="1-4-5-1-最简单的替换"><a href="#1-4-5-1-最简单的替换" class="headerlink" title="1.4.5.1. 最简单的替换"></a>1.4.5.1. 最简单的替换</h4><blockquote>
<p>替换一个序列中的元音字母(aeiou)，将其替换成一个double。 比如x-&gt;xx</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent."</span></span><br><span class="line"><span class="keyword">var</span> result = s.replace(<span class="regexp">/([aeiou])/g</span>,<span class="string">"$1$1"</span>)</span><br><span class="line"><span class="comment">//"Heelloo,My naamee iis Viinceent."</span></span><br></pre></td></tr></table></figure>

<p><strong>注意，第二个参数必须是字符串; 注意不要忘记加g</strong></p>
<h4 id="1-4-5-2-牛x哄哄的function参数来了"><a href="#1-4-5-2-牛x哄哄的function参数来了" class="headerlink" title="1.4.5.2. 牛x哄哄的function参数来了"></a>1.4.5.2. 牛x哄哄的function参数来了</h4><p>嗯，这才是最强大的地方，第二参数传入function，先看一个最简单的示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent. What is your name?"</span></span><br><span class="line"><span class="keyword">var</span> newStr = s.replace(<span class="regexp">/\b\w&#123;4&#125;\b/g</span>,replacer)</span><br><span class="line"><span class="built_in">console</span>.log(newStr)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(match);</span><br><span class="line">    <span class="keyword">return</span> match.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">name</span></span><br><span class="line"><span class="comment">What</span></span><br><span class="line"><span class="comment">your</span></span><br><span class="line"><span class="comment">name</span></span><br><span class="line"><span class="comment">Hello,My NAME is Vincent. WHAT is YOUR NAME?</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>所以，函数的参数是匹配到的内容，返回的是需要替换的内容。好了，基本示例解释了基本用法，那么之前讨论的分组怎么办？如何实现分组呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分组</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match,group1,group2</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(group1);</span><br><span class="line">    <span class="built_in">console</span>.log(group2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果正则表达式分组处理，那么在回调函数中，函数的第二个、第三参数就是group1,group2。这样子，就可以做很多神奇的事情</p>
<h4 id="1-4-5-3-综合练习题"><a href="#1-4-5-3-综合练习题" class="headerlink" title="1.4.5.3. 综合练习题"></a>1.4.5.3. 综合练习题</h4><ol>
<li><p>判断一个字符串中出现次数最多的字符，并统计次数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'aaabbbcccaaabbbaaa'</span>;</span><br><span class="line"><span class="keyword">var</span> a = s.split(<span class="string">''</span>).sort().join(<span class="string">""</span>);  <span class="comment">//"aaaaaaaaabbbbbbccc"</span></span><br><span class="line"><span class="keyword">var</span> ans = a.match(<span class="regexp">/(\w)\1+/g</span>);</span><br><span class="line">ans.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.length - b.length;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ans is : '</span> + ans[ans.length<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="1-4-6-总结"><a href="#1-4-6-总结" class="headerlink" title="1.4.6. 总结"></a>1.4.6. 总结</h3><ol>
<li>在js中，正则表达式字面量<code>/reg/</code>和字符串字面量<code>&quot;str&quot;</code>用于创建正则和字符串。其中正则上有两个方法<code>reg.test()</code>和<code>reg.exec()</code></li>
<li><code>reg.test(str)</code>方法，返回布尔变量，用于指示是否有所匹配； <code>reg.exec(str)</code>有点类似与迭代器，每次执行，返回匹配结果和分组，直到返回为<code>null</code>结束。</li>
<li>字符串方法主要有<code>str.match(reg)</code>,<code>str.split(reg)</code>和<code>str.replace(reg,str|function)</code> 三种方法。</li>
<li><code>match</code>比较特殊，如果正则包含了分组，且没有<code>g</code>标志，则返回匹配内容和分组; 如果没有分组，且有<code>g</code>标志，返回所有匹配内容</li>
<li><code>split</code>方法主要用于字符串分割，如果想要保存分隔符，记得将匹配内容分组(用小括号包起来)</li>
<li><code>replace</code>是最强大的方法，当使用回掉函数时，返回值就是替换值; 参数分别为<code>匹配值</code> <code>group1</code> <code>group2</code>…</li>
</ol>
<p><a href="https://juejin.im/post/5b5db5b8e51d4519155720d2#heading-1" target="_blank" rel="noopener">原文链接</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/12/02/原生JS-对DOM-类名的操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/12/02/原生JS-对DOM-类名的操作/" class="post-title-link" itemprop="url">原生JS 对DOM 类名的操作</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-02 20:56:46 / 修改时间：21:12:28" itemprop="dateCreated datePublished" datetime="2019-12-02T20:56:46+08:00">2019-12-02</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="原生JS-对某个-class-类名的添加、删除以及判断是否含有某个类名的操作"><a href="#原生JS-对某个-class-类名的添加、删除以及判断是否含有某个类名的操作" class="headerlink" title="原生JS 对某个 class 类名的添加、删除以及判断是否含有某个类名的操作"></a>原生JS 对某个 <code>class</code> 类名的添加、删除以及判断是否含有某个类名的操作</h1><h2 id="为-lt-div-gt-添加class"><a href="#为-lt-div-gt-添加class" class="headerlink" title="为 &lt;div&gt; 添加class"></a>为 <code>&lt;div&gt;</code> 添加class</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'div'</span>).classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br></pre></td></tr></table></figure>

<p>如果是通过类名获取的话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">'div'</span>)[<span class="number">0</span>].classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br></pre></td></tr></table></figure>

<p>如果是使用新增的 <code>querySelector</code> 的话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.div'</span>).classList.add(<span class="string">'ttt'</span>, <span class="string">'ttt2'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="从-div-移除多个类"><a href="#从-div-移除多个类" class="headerlink" title="从 div 移除多个类"></a>从 div 移除多个类</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'div'</span>).classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">'div'</span>)[<span class="number">0</span>].classList.add(<span class="string">'自定义类名'</span>, <span class="string">'第二个'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.div'</span>).classList.add(<span class="string">'ttt'</span>, <span class="string">'ttt2'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="检查是否包含某个-class-类名"><a href="#检查是否包含某个-class-类名" class="headerlink" title="检查是否包含某个 class 类名"></a>检查是否包含某个 class 类名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myDiv.classList.contains(<span class="string">'myCssClass'</span>); <span class="comment">//return true or false</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/28/JS-口袋书-一些好的文章总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/28/JS-口袋书-一些好的文章总结/" class="post-title-link" itemprop="url">JS 口袋书--一些好的文章总结</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-28 22:08:31 / 修改时间：22:23:44" itemprop="dateCreated datePublished" datetime="2019-11-28T22:08:31+08:00">2019-11-28</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-口袋书"><a href="#JS-口袋书" class="headerlink" title="JS 口袋书"></a>JS 口袋书</h1><p><a href="https://juejin.im/post/5d9bd0dfe51d4577fe41b667" target="_blank" rel="noopener">【JS 口袋书】第 1 和 2 章：JS简介及基础</a></p>
<p><a href="https://juejin.im/post/5d9d21a7f265da5ba74524a4" target="_blank" rel="noopener">【JS 口袋书】第 3 章：JavaScript 函数</a></p>
<p><a href="https://juejin.im/post/5d9e72d0f265da5b5e2d9583" target="_blank" rel="noopener">【JS 口袋书】第 4 章：JS 引擎底层的工作原理</a></p>
<p><a href="https://juejin.im/post/5da3ba47f265da5b926bd061" target="_blank" rel="noopener">【JS 口袋书】第 5 章：JS 对象生命周期的秘密</a></p>
<p><a href="https://juejin.im/post/5da65ed26fb9a04df26c2e0d" target="_blank" rel="noopener">【JS 口袋书】第 6 章：JS 中的闭包与模块</a></p>
<p><a href="https://juejin.im/post/5da7b143e51d45249338d5cd" target="_blank" rel="noopener">【JS 口袋书】第 7 章：JS 中的类型转换与比较</a></p>
<p><a href="https://juejin.im/post/5dae44d26fb9a04e17209711" target="_blank" rel="noopener">【JS 口袋书】第 8 章：以更细的角度来看 JS 中的 this</a></p>
<p><a href="https://juejin.im/post/5daf98dcf265da5b9c3d14d6" target="_blank" rel="noopener">【JS 口袋书】第 9 章：使用 JS 操作 HTML 元素</a></p>
<p><a href="https://juejin.im/post/5db8d33cf265da4d0a68d0a3" target="_blank" rel="noopener">【JS 口袋书】第 10 章：使用异步 JavaScript</a></p>
<p><a href="https://juejin.im/post/5dbb74a251882521ab6e4ca5" target="_blank" rel="noopener">【JS 口袋书】第 11 章：HTML 表单及 localStorage 的使用</a></p>
<p>还有一些比较高赞的文章</p>
<p><a href="https://juejin.im/post/5d2d146bf265da1b9163c5c9" target="_blank" rel="noopener">8个问题看你是否真的懂 JS</a></p>
<p><a href="https://juejin.im/post/5dba2249f265da4cef190484" target="_blank" rel="noopener">通过 41 个 问答方式快速了解学习 Git</a></p>
<p><a href="https://juejin.im/post/5db62f1bf265da4d560906ab" target="_blank" rel="noopener">13 个 JS 数组精简技巧，一起来看看</a></p>
<p><a href="https://juejin.im/post/5d82c12ff265da03a31d6f92" target="_blank" rel="noopener">通过实现25个数组方法来理解及高效使用数组方法(长文,建议收藏)</a></p>
<p><a href="https://juejin.im/post/5d6c53476fb9a06acc009e00" target="_blank" rel="noopener">50 个JS 必须懂的面试题为你助力金九银十</a></p>
<p><a href="https://juejin.im/post/5d34fdfff265da1b897b0c8d" target="_blank" rel="noopener">21 个VSCode 快捷键，让代码更快，更有趣</a></p>
<p><a href="https://juejin.im/post/5d2e657ae51d4510b71da69d" target="_blank" rel="noopener">Proxy 的巧用</a></p>
<p><a href="https://juejin.im/post/5d2284dc51882579df4a4cee" target="_blank" rel="noopener">如何使用 Set 来提高代码的性能</a></p>
<p><a href="https://juejin.im/post/5d1a9d195188251c03259348" target="_blank" rel="noopener">8 个有用的 JS 技巧</a></p>
<p><a href="https://juejin.im/post/5cfd9d30f265da1b94213d28" target="_blank" rel="noopener">我还没搞懂 JS 中 this 指向及继承，直到有人向我这样解释它</a></p>
<p><a href="https://juejin.im/post/5cf468a9f265da1bb77652aa" target="_blank" rel="noopener">我从来不理解JavaScript闭包，直到有人这样向我解释它</a></p>
<p><a href="https://juejin.im/post/5ca6bf5151882543fc5e3bb0" target="_blank" rel="noopener">灵活使用 console 让 js 调试更简单</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/27/JS-工具函数总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/27/JS-工具函数总结/" class="post-title-link" itemprop="url">JS 工具函数总结</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-27 22:29:35 / 修改时间：22:58:20" itemprop="dateCreated datePublished" datetime="2019-11-27T22:29:35+08:00">2019-11-27</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS-工具函数总结"><a href="#JS-工具函数总结" class="headerlink" title="JS 工具函数总结"></a>JS 工具函数总结</h1><h2 id="1-第一部分：数组"><a href="#1-第一部分：数组" class="headerlink" title="1. 第一部分：数组"></a>1. 第一部分：数组</h2><h3 id="1-all：布尔全等判断"><a href="#1-all：布尔全等判断" class="headerlink" title="1. all：布尔全等判断"></a>1. <code>all</code>：布尔全等判断</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> all = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.every(fn);</span><br><span class="line"></span><br><span class="line">all([<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x &gt; <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">all([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-allEqual：检查数组各项相等"><a href="#2-allEqual：检查数组各项相等" class="headerlink" title="2. allEqual：检查数组各项相等"></a>2. <code>allEqual</code>：检查数组各项相等</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> allEqual = <span class="function"><span class="params">arr</span> =&gt;</span> arr.every(<span class="function"><span class="params">val</span> =&gt;</span> val === arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]); <span class="comment">// false</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="3-approximatelyEqual：约等于"><a href="#3-approximatelyEqual：约等于" class="headerlink" title="3. approximatelyEqual：约等于"></a>3. <code>approximatelyEqual</code>：约等于</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> approximatelyEqual = <span class="function">(<span class="params">v1, v2, epsilon = <span class="number">0.001</span></span>) =&gt;</span> <span class="built_in">Math</span>.abs(v1 - v2) &lt; epsilon;</span><br><span class="line"></span><br><span class="line">approximatelyEqual(<span class="built_in">Math</span>.PI / <span class="number">2.0</span>, <span class="number">1.5708</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="4-arrayToCSV：数组转CSV格式（带空格的字符串）"><a href="#4-arrayToCSV：数组转CSV格式（带空格的字符串）" class="headerlink" title="4. arrayToCSV：数组转CSV格式（带空格的字符串）"></a>4. <code>arrayToCSV</code>：数组转<code>CSV</code>格式（带空格的字符串）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrayToCSV = <span class="function">(<span class="params">arr, delimiter = <span class="string">','</span></span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="string">`"<span class="subst">$&#123;x&#125;</span>"`</span>).join(delimiter)).join(<span class="string">'\n'</span>);</span><br><span class="line">  </span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]]); <span class="comment">// '"a","b"\n"c","d"'</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]], <span class="string">';'</span>); <span class="comment">// '"a";"b"\n"c";"d"'</span></span><br></pre></td></tr></table></figure>

<h3 id="5-arrayToHtmlList：数组转li列表"><a href="#5-arrayToHtmlList：数组转li列表" class="headerlink" title="5. arrayToHtmlList：数组转li列表"></a>5. <code>arrayToHtmlList</code>：数组转<code>li</code>列表</h3><p>此代码段将数组的元素转换为<code>&lt;li&gt;</code>标签，并将其附加到给定ID的列表中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayToHtmlList = <span class="function">(<span class="params">arr, listID</span>) =&gt;</span></span><br><span class="line">  (<span class="function"><span class="params">el</span> =&gt;</span> (</span><br><span class="line">    (el = <span class="built_in">document</span>.querySelector(<span class="string">'#'</span> + listID)),</span><br><span class="line">    (el.innerHTML += arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">`&lt;li&gt;<span class="subst">$&#123;item&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">''</span>))</span><br><span class="line">  ))();</span><br><span class="line">  </span><br><span class="line">arrayToHtmlList([<span class="string">'item 1'</span>, <span class="string">'item 2'</span>], <span class="string">'myListID'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-average：平均数"><a href="#6-average：平均数" class="headerlink" title="6. average：平均数"></a>6. <code>average</code>：平均数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function">(<span class="params">...nums</span>) =&gt;</span> nums.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / nums.length;</span><br><span class="line">average(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 2</span></span><br><span class="line">average(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="7-averageBy：数组对象属性平均数"><a href="#7-averageBy：数组对象属性平均数" class="headerlink" title="7. averageBy：数组对象属性平均数"></a>7. <code>averageBy</code>：数组对象属性平均数</h3><p>此代码段将获取数组对象属性的平均值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> averageBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) /</span><br><span class="line">  arr.length;</span><br><span class="line">  </span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], o =&gt; o.n); <span class="comment">// 5</span></span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], <span class="string">'n'</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h3 id="8-bifurcate：拆分断言后的数组"><a href="#8-bifurcate：拆分断言后的数组" class="headerlink" title="8. bifurcate：拆分断言后的数组"></a>8. <code>bifurcate</code>：拆分断言后的数组</h3><p>可以根据每个元素返回的值，使用<code>reduce()</code>和<code>push()</code> 将元素添加到第二次参数<code>fn</code>中 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcate = <span class="function">(<span class="params">arr, filter</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]);</span><br><span class="line">bifurcate([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>]); </span><br><span class="line"><span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure>

<h3 id="9-castArray：其它类型转数组"><a href="#9-castArray：其它类型转数组" class="headerlink" title="9. castArray：其它类型转数组"></a>9. <code>castArray</code>：其它类型转数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> castArray = <span class="function"><span class="params">val</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(val) ? val : [val]);</span><br><span class="line"></span><br><span class="line">castArray(<span class="string">'foo'</span>); <span class="comment">// ['foo']</span></span><br><span class="line">castArray([<span class="number">1</span>]); <span class="comment">// [1]</span></span><br><span class="line">castArray(<span class="number">1</span>); <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure>

<h3 id="10-compact：去除数组中的无效-无用值"><a href="#10-compact：去除数组中的无效-无用值" class="headerlink" title="10. compact：去除数组中的无效/无用值"></a>10. <code>compact</code>：去除数组中的无效/无用值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"></span><br><span class="line">compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'e'</span> * <span class="number">23</span>, <span class="literal">NaN</span>, <span class="string">'s'</span>, <span class="number">34</span>]); </span><br><span class="line"><span class="comment">// [ 1, 2, 3, 'a', 's', 34 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="11-countOccurrences：检测数值出现次数"><a href="#11-countOccurrences：检测数值出现次数" class="headerlink" title="11. countOccurrences：检测数值出现次数"></a>11. <code>countOccurrences</code>：检测数值出现次数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === val ? a + <span class="number">1</span> : a), <span class="number">0</span>);</span><br><span class="line">countOccurrences([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="12-deepFlatten：递归扁平化数组"><a href="#12-deepFlatten：递归扁平化数组" class="headerlink" title="12. deepFlatten：递归扁平化数组"></a>12. <code>deepFlatten</code>：递归扁平化数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function"><span class="params">arr</span> =&gt;</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v)));</span><br><span class="line"></span><br><span class="line">deepFlatten([<span class="number">1</span>, [<span class="number">2</span>], [[<span class="number">3</span>], <span class="number">4</span>], <span class="number">5</span>]); <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<h3 id="13-difference：寻找差异（并返回第一个数组独有的"><a href="#13-difference：寻找差异（并返回第一个数组独有的" class="headerlink" title="13. difference：寻找差异（并返回第一个数组独有的"></a>13. <code>difference</code>：寻找差异（并返回第一个数组独有的</h3><p>此代码段查找两个数组之间的差异，并返回第一个数组独有的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">difference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure>

<h3 id="14-differenceBy：先执行再寻找差异"><a href="#14-differenceBy：先执行再寻找差异" class="headerlink" title="14. differenceBy：先执行再寻找差异"></a>14. <code>differenceBy</code>：先执行再寻找差异</h3><p>在将给定函数应用于两个列表的每个元素之后，此方法返回两个数组之间的差异。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">differenceBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [1.2]</span></span><br><span class="line">differenceBy([&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], v =&gt; v.x); <span class="comment">// [ &#123; x: 2 &#125; ]</span></span><br></pre></td></tr></table></figure>

<h3 id="15-dropWhile：删除不符合条件的值"><a href="#15-dropWhile：删除不符合条件的值" class="headerlink" title="15. dropWhile：删除不符合条件的值"></a>15. <code>dropWhile</code>：删除不符合条件的值</h3><p>此代码段从数组顶部开始删除元素，直到传递的函数返回为<code>true</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[<span class="number">0</span>])) arr = arr.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">dropWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &gt;= <span class="number">3</span>); <span class="comment">// [3,4]</span></span><br></pre></td></tr></table></figure>

<h3 id="16-flatten：指定深度扁平化数组"><a href="#16-flatten：指定深度扁平化数组" class="headerlink" title="16. flatten：指定深度扁平化数组"></a>16. <code>flatten</code>：指定深度扁平化数组</h3><p>此代码段第二参数可指定深度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr, depth = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Array</span>.isArray(v) ? flatten(v, depth - <span class="number">1</span>) : v), []);</span><br><span class="line"></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>], <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>], <span class="number">2</span>); <span class="comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="17-indexOfAll：返回数组中某值的所有索引"><a href="#17-indexOfAll：返回数组中某值的所有索引" class="headerlink" title="17. indexOfAll：返回数组中某值的所有索引"></a>17. <code>indexOfAll</code>：返回数组中某值的所有索引</h3><p>此代码段可用于获取数组中某个值的所有索引，如果此值中未包含该值，则返回一个空数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> indexOfAll = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);</span><br><span class="line"></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// [0,3]</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h3 id="18-intersection：两数组的交集"><a href="#18-intersection：两数组的交集" class="headerlink" title="18. intersection：两数组的交集"></a>18. <code>intersection</code>：两数组的交集</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">intersection([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="19-intersectionWith：两数组都符合条件的交集"><a href="#19-intersectionWith：两数组都符合条件的交集" class="headerlink" title="19. intersectionWith：两数组都符合条件的交集"></a>19. <code>intersectionWith</code>：两数组都符合条件的交集</h3><p>此片段可用于在对两个数组的每个元素执行了函数之后，返回两个数组中存在的元素列表。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> intersectionBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">intersectionBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [2.1]</span></span><br></pre></td></tr></table></figure>

<h3 id="20-intersectionWith：先比较后返回交集"><a href="#20-intersectionWith：先比较后返回交集" class="headerlink" title="20. intersectionWith：先比较后返回交集"></a>20. <code>intersectionWith</code>：先比较后返回交集</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionWith = <span class="function">(<span class="params">a, b, comp</span>) =&gt;</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> b.findIndex(<span class="function"><span class="params">y</span> =&gt;</span> comp(x, y)) !== <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">intersectionWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3.9</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1.5, 3, 0]</span></span><br></pre></td></tr></table></figure>

<h3 id="21-minN：返回指定长度的升序数组"><a href="#21-minN：返回指定长度的升序数组" class="headerlink" title="21. minN：返回指定长度的升序数组"></a>21. <code>minN</code>：返回指定长度的升序数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> minN = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> [...arr].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b).slice(<span class="number">0</span>, n);</span><br><span class="line"></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1]</span></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure>

<h3 id="22-negate：根据条件反向筛选"><a href="#22-negate：根据条件反向筛选" class="headerlink" title="22. negate：根据条件反向筛选"></a>22. <code>negate</code>：根据条件反向筛选</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> negate = <span class="function"><span class="params">func</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> !func(...args);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>].filter(negate(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)); <span class="comment">// [ 1, 3, 5 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="23-randomIntArrayInRange：生成两数之间指定长度的随机数组"><a href="#23-randomIntArrayInRange：生成两数之间指定长度的随机数组" class="headerlink" title="23. randomIntArrayInRange：生成两数之间指定长度的随机数组"></a>23. <code>randomIntArrayInRange</code>：生成两数之间指定长度的随机数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomIntArrayInRange = <span class="function">(<span class="params">min, max, n = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: n &#125;, () =&gt; <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min);</span><br><span class="line">  </span><br><span class="line">randomIntArrayInRange(<span class="number">12</span>, <span class="number">35</span>, <span class="number">10</span>); <span class="comment">// [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</span></span><br></pre></td></tr></table></figure>

<h3 id="24-sample：在指定数组中获取随机数"><a href="#24-sample：在指定数组中获取随机数" class="headerlink" title="24. sample：在指定数组中获取随机数"></a>24. <code>sample</code>：在指定数组中获取随机数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sample = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)];</span><br><span class="line"></span><br><span class="line">sample([<span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>

<h3 id="25-sampleSize：在指定数组中获取指定长度的随机数"><a href="#25-sampleSize：在指定数组中获取指定长度的随机数" class="headerlink" title="25. sampleSize：在指定数组中获取指定长度的随机数"></a>25. <code>sampleSize</code>：在指定数组中获取指定长度的随机数</h3><p>此代码段可用于从数组中获取指定长度的随机数，直至穷尽数组。 <strong>使用Fisher-Yates算法对数组中的元素进行随机选择。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sampleSize = <span class="function">(<span class="params">[...arr], n = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr.slice(<span class="number">0</span>, n);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3,1]</span></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// [2,3,1]</span></span><br></pre></td></tr></table></figure>

<h3 id="26-shuffle：“洗牌”-数组"><a href="#26-shuffle：“洗牌”-数组" class="headerlink" title="26. shuffle：“洗牌” 数组"></a>26. <code>shuffle</code>：“洗牌” 数组</h3><p>此代码段使用<code>Fisher-Yates</code>算法随机排序数组的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> shuffle = <span class="function">(<span class="params">[...arr]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">shuffle(foo); <span class="comment">// [2, 3, 1], foo = [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="27-nest：根据parent-id生成树结构（阿里一面真题）"><a href="#27-nest：根据parent-id生成树结构（阿里一面真题）" class="headerlink" title="27. nest：根据parent_id生成树结构（阿里一面真题）"></a>27. <code>nest</code>：根据<code>parent_id</code>生成树结构（阿里一面真题）</h3><p>根据每项的<code>parent_id</code>，生成具体树形结构的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nest = <span class="function">(<span class="params">items, id = <span class="literal">null</span>, link = <span class="string">'parent_id'</span></span>) =&gt;</span></span><br><span class="line">  items</span><br><span class="line">    .filter(<span class="function"><span class="params">item</span> =&gt;</span> item[link] === id)</span><br><span class="line">    .map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; ...item, <span class="attr">children</span>: nest(items, item.id) &#125;));</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> comments = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">parent_id</span>: <span class="literal">null</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">parent_id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">parent_id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">parent_id</span>: <span class="number">4</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> nestedComments = nest(comments); <span class="comment">// [&#123; id: 1, parent_id: null, children: [...] &#125;]</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%A0%91%E5%BD%A2%E6%95%B0%E7%BB%84%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C.jpg" alt></p>
<h2 id="2-第二部分：函数"><a href="#2-第二部分：函数" class="headerlink" title="2. 第二部分：函数"></a>2. 第二部分：函数</h2><h3 id="1-attempt：捕获函数运行异常"><a href="#1-attempt：捕获函数运行异常" class="headerlink" title="1. attempt：捕获函数运行异常"></a>1. <code>attempt</code>：捕获函数运行异常</h3><p>该代码段执行一个函数，返回结果或捕获的错误对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onst attempt = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> e <span class="keyword">instanceof</span> <span class="built_in">Error</span> ? e : <span class="keyword">new</span> <span class="built_in">Error</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> elements = attempt(<span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.querySelectorAll(selector);</span><br><span class="line">&#125;, <span class="string">'&gt;_&gt;'</span>);</span><br><span class="line"><span class="keyword">if</span> (elements <span class="keyword">instanceof</span> <span class="built_in">Error</span>) elements = []; <span class="comment">// elements = []</span></span><br></pre></td></tr></table></figure>

<h3 id="2-defer：推迟执行"><a href="#2-defer：推迟执行" class="headerlink" title="2. defer：推迟执行"></a>2. <code>defer</code>：推迟执行</h3><p>此代码段延迟了函数的执行，直到清除了当前调用堆栈。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defer = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> setTimeout(fn, <span class="number">1</span>, ...args);</span><br><span class="line"></span><br><span class="line">defer(<span class="built_in">console</span>.log, <span class="string">'a'</span>), <span class="built_in">console</span>.log(<span class="string">'b'</span>); <span class="comment">// logs 'b' then 'a'</span></span><br></pre></td></tr></table></figure>

<h3 id="3-runPromisesInSeries：运行多个Promises"><a href="#3-runPromisesInSeries：运行多个Promises" class="headerlink" title="3. runPromisesInSeries：运行多个Promises"></a>3. <code>runPromisesInSeries</code>：运行多个<code>Promises</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> runPromisesInSeries = <span class="function"><span class="params">ps</span> =&gt;</span> ps.reduce(<span class="function">(<span class="params">p, next</span>) =&gt;</span> p.then(next), <span class="built_in">Promise</span>.resolve());</span><br><span class="line"><span class="keyword">const</span> delay = <span class="function"><span class="params">d</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">r</span> =&gt;</span> setTimeout(r, d));</span><br><span class="line"></span><br><span class="line">runPromisesInSeries([<span class="function"><span class="params">()</span> =&gt;</span> delay(<span class="number">1000</span>), () =&gt; delay(<span class="number">2000</span>)]);</span><br><span class="line"><span class="comment">//依次执行每个Promises ，总共需要3秒钟才能完成</span></span><br></pre></td></tr></table></figure>

<h3 id="4-timeTaken：计算函数执行时间"><a href="#4-timeTaken：计算函数执行时间" class="headerlink" title="4. timeTaken：计算函数执行时间"></a>4. <code>timeTaken</code>：计算函数执行时间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> timeTaken = <span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'timeTaken'</span>);</span><br><span class="line">  <span class="keyword">const</span> r = callback();</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'timeTaken'</span>);</span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">timeTaken(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">10</span>)); <span class="comment">// 1024, (logged): timeTaken: 0.02099609375ms</span></span><br></pre></td></tr></table></figure>

<h3 id="5-createEventHub：简单的发布-订阅模式"><a href="#5-createEventHub：简单的发布-订阅模式" class="headerlink" title="5. createEventHub：简单的发布/订阅模式"></a>5. <code>createEventHub</code>：简单的发布/订阅模式</h3><p>创建一个发布/订阅（发布-订阅）事件集线，有<code>emit</code>，<code>on</code>和<code>off</code>方法。</p>
<ol>
<li>使用<code>Object.create(null)</code>创建一个空的<code>hub</code>对象。</li>
<li><code>emit</code>，根据<code>event</code>参数解析处理程序数组，然后<code>.forEach()</code>通过传入数据作为参数来运行每个处理程序。</li>
<li><code>on</code>，为事件创建一个数组（若不存在则为空数组），然后<code>.push()</code>将处理程序添加到该数组。</li>
<li><code>off</code>，用<code>.findIndex()</code>在事件数组中查找处理程序的索引，并使用<code>.splice()</code>删除。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createEventHub = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  hub: <span class="built_in">Object</span>.create(<span class="literal">null</span>),</span><br><span class="line">  emit(event, data) &#123;</span><br><span class="line">    (<span class="keyword">this</span>.hub[event] || []).forEach(<span class="function"><span class="params">handler</span> =&gt;</span> handler(data));</span><br><span class="line">  &#125;,</span><br><span class="line">  on(event, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.hub[event]) <span class="keyword">this</span>.hub[event] = [];</span><br><span class="line">    <span class="keyword">this</span>.hub[event].push(handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  off(event, handler) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = (<span class="keyword">this</span>.hub[event] || []).findIndex(<span class="function"><span class="params">h</span> =&gt;</span> h === handler);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">-1</span>) <span class="keyword">this</span>.hub[event].splice(i, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.hub[event].length === <span class="number">0</span>) <span class="keyword">delete</span> <span class="keyword">this</span>.hub[event];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data);</span><br><span class="line"><span class="keyword">const</span> hub = createEventHub();</span><br><span class="line"><span class="keyword">let</span> increment = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅，监听不同事件</span></span><br><span class="line">hub.on(<span class="string">'message'</span>, handler);</span><br><span class="line">hub.on(<span class="string">'message'</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">'Message event fired'</span>));</span><br><span class="line">hub.on(<span class="string">'increment'</span>, () =&gt; increment++);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发布：发出事件以调用所有订阅给它们的处理程序，并将数据作为参数传递给它们</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, <span class="string">'hello world'</span>); <span class="comment">// 打印 'hello world' 和 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, &#123; <span class="attr">hello</span>: <span class="string">'world'</span> &#125;); <span class="comment">// 打印 对象 和 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'increment'</span>); <span class="comment">// increment = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止订阅</span></span><br><span class="line">hub.off(<span class="string">'message'</span>, handler);</span><br></pre></td></tr></table></figure>

<h3 id="6-memoize：缓存函数"><a href="#6-memoize：缓存函数" class="headerlink" title="6. memoize：缓存函数"></a>6. <code>memoize</code>：缓存函数</h3><p>通过实例化一个<code>Map</code>对象来创建一个空的缓存。</p>
<p>通过检查输入值的函数输出是否已缓存，返回存储一个参数的函数，该参数将被提供给已记忆的函数；如果没有，则存储并返回它。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoize = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">const</span> cached = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cache.has(val) ? cache.get(val) : cache.set(val, fn.call(<span class="keyword">this</span>, val)) &amp;&amp; cache.get(val);</span><br><span class="line">  &#125;;</span><br><span class="line">  cached.cache = cache;</span><br><span class="line">  <span class="keyword">return</span> cached;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>Ps: 这个版本可能不是很清晰，还有Vue源码版的：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create a cached version of a pure function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cached</span>&lt;<span class="title">F</span>: <span class="title">Function</span>&gt; (<span class="params">fn: F</span>): <span class="title">F</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">return</span> (<span class="function"><span class="keyword">function</span> <span class="title">cachedFn</span> (<span class="params">str: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> hit = cache[str]</span><br><span class="line">    <span class="keyword">return</span> hit || (cache[str] = fn(str))</span><br><span class="line">  &#125;: any)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-once：只调用一次的函数"><a href="#7-once：只调用一次的函数" class="headerlink" title="7. once：只调用一次的函数"></a>7. <code>once</code>：只调用一次的函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> once = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> called = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!called) &#123;</span><br><span class="line">      called = <span class="literal">true</span></span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startApp = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>, event); <span class="comment">// document.body, MouseEvent</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, once(startApp)); <span class="comment">// 只执行一次startApp</span></span><br></pre></td></tr></table></figure>

<h3 id="8-flattenObject：以键的路径扁平化对象"><a href="#8-flattenObject：以键的路径扁平化对象" class="headerlink" title="8. flattenObject：以键的路径扁平化对象"></a>8. <code>flattenObject</code>：以键的路径扁平化对象</h3><p>使用递归。</p>
<ol>
<li>利用<code>Object.keys(obj)</code>联合<code>Array.prototype.reduce()</code>，以每片叶子节点转换为扁平的路径节点。</li>
<li>如果键的值是一个对象，则函数使用调用适当的自身<code>prefix</code>以创建路径<code>Object.assign()</code>。</li>
<li>否则，它将适当的前缀键值对添加到累加器对象。</li>
<li><code>prefix</code>除非您希望每个键都有一个前缀，否则应始终省略第二个参数。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flattenObject = <span class="function">(<span class="params">obj, prefix = <span class="string">''</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).reduce(<span class="function">(<span class="params">acc, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> pre = prefix.length ? prefix + <span class="string">'.'</span> : <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[k] === <span class="string">'object'</span>) <span class="built_in">Object</span>.assign(acc, flattenObject(obj[k], pre + k));</span><br><span class="line">    <span class="keyword">else</span> acc[pre + k] = obj[k];</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  </span><br><span class="line">flattenObject(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">1</span> &#125; &#125;, <span class="attr">d</span>: <span class="number">1</span> &#125;); <span class="comment">// &#123; 'a.b.c': 1, d: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-unflattenObject：以键的路径展开对象"><a href="#9-unflattenObject：以键的路径展开对象" class="headerlink" title="9. unflattenObject：以键的路径展开对象"></a>9. <code>unflattenObject</code>：以键的路径展开对象</h3><p>与上面的相反，展开对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unflattenObject = <span class="function"><span class="params">obj</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).reduce(<span class="function">(<span class="params">acc, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (k.indexOf(<span class="string">'.'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> keys = k.split(<span class="string">'.'</span>);</span><br><span class="line">      <span class="built_in">Object</span>.assign(</span><br><span class="line">        acc,</span><br><span class="line">        <span class="built_in">JSON</span>.parse(</span><br><span class="line">          <span class="string">'&#123;'</span> +</span><br><span class="line">            keys.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (i !== keys.length - <span class="number">1</span> ? <span class="string">`"<span class="subst">$&#123;v&#125;</span>":&#123;`</span> : <span class="string">`"<span class="subst">$&#123;v&#125;</span>":`</span>)).join(<span class="string">''</span>) +</span><br><span class="line">            obj[k] +</span><br><span class="line">            <span class="string">'&#125;'</span>.repeat(keys.length)</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> acc[k] = obj[k];</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  </span><br><span class="line">unflattenObject(&#123; <span class="string">'a.b.c'</span>: <span class="number">1</span>, <span class="attr">d</span>: <span class="number">1</span> &#125;); <span class="comment">// &#123; a: &#123; b: &#123; c: 1 &#125; &#125;, d: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<p>这个的用途，在做<code>Tree</code>组件或复杂表单时取值非常舒服。</p>
<h2 id="3-第三部分：字符串"><a href="#3-第三部分：字符串" class="headerlink" title="3. 第三部分：字符串"></a>3. 第三部分：字符串</h2><h3 id="1-byteSize：返回字符串的字节长度"><a href="#1-byteSize：返回字符串的字节长度" class="headerlink" title="1.byteSize：返回字符串的字节长度"></a>1.<code>byteSize</code>：返回字符串的字节长度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> byteSize = <span class="function"><span class="params">str</span> =&gt;</span> <span class="keyword">new</span> Blob([str]).size;</span><br><span class="line"></span><br><span class="line">byteSize(<span class="string">'😀'</span>); <span class="comment">// 4</span></span><br><span class="line">byteSize(<span class="string">'Hello World'</span>); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>

<h3 id="2-capitalize：首字母大写"><a href="#2-capitalize：首字母大写" class="headerlink" title="2. capitalize：首字母大写"></a>2. <code>capitalize</code>：首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = <span class="function">(<span class="params">[first, ...rest]</span>) =&gt;</span></span><br><span class="line">  first.toUpperCase() + rest.join(<span class="string">''</span>);</span><br><span class="line">  </span><br><span class="line">capitalize(<span class="string">'fooBar'</span>); <span class="comment">// 'FooBar'</span></span><br><span class="line">capitalize(<span class="string">'fooBar'</span>, <span class="literal">true</span>); <span class="comment">// 'Foobar'</span></span><br></pre></td></tr></table></figure>

<h3 id="3-capitalizeEveryWord：每个单词首字母大写"><a href="#3-capitalizeEveryWord：每个单词首字母大写" class="headerlink" title="3. capitalizeEveryWord：每个单词首字母大写"></a>3. <code>capitalizeEveryWord</code>：每个单词首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalizeEveryWord = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/\b[a-z]/g</span>, char =&gt; char.toUpperCase());</span><br><span class="line"></span><br><span class="line">capitalizeEveryWord(<span class="string">'hello world!'</span>); <span class="comment">// 'Hello World!'</span></span><br></pre></td></tr></table></figure>

<h3 id="4-decapitalize：首字母小写"><a href="#4-decapitalize：首字母小写" class="headerlink" title="4. decapitalize：首字母小写"></a>4. <code>decapitalize</code>：首字母小写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> decapitalize = <span class="function">(<span class="params">[first, ...rest]</span>) =&gt;</span></span><br><span class="line">  first.toLowerCase() + rest.join(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">decapitalize(<span class="string">'FooBar'</span>); <span class="comment">// 'fooBar'</span></span><br><span class="line">decapitalize(<span class="string">'FooBar'</span>); <span class="comment">// 'fooBar'</span></span><br></pre></td></tr></table></figure>

<h3 id="5-luhnCheck：银行卡号码校验（luhn算法）"><a href="#5-luhnCheck：银行卡号码校验（luhn算法）" class="headerlink" title="5. luhnCheck：银行卡号码校验（luhn算法）"></a>5. <code>luhnCheck</code>：银行卡号码校验（<code>luhn</code>算法）</h3><p><code>Luhn</code>算法的实现，用于验证各种标识号，例如信用卡号，IMEI号，国家提供商标识号等。</p>
<p>与<code>String.prototype.split(&#39;&#39;)</code>结合使用，以获取数字数组。获得最后一个数字。实施<code>luhn</code>算法。如果被整除，则返回，否则返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> luhnCheck = <span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = (num + <span class="string">''</span>)</span><br><span class="line">    .split(<span class="string">''</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">parseInt</span>(x));</span><br><span class="line">  <span class="keyword">let</span> lastDigit = arr.splice(<span class="number">0</span>, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> sum = arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (i % <span class="number">2</span> !== <span class="number">0</span> ? acc + val : acc + ((val * <span class="number">2</span>) % <span class="number">9</span>) || <span class="number">9</span>), <span class="number">0</span>);</span><br><span class="line">  sum += lastDigit;</span><br><span class="line">  <span class="keyword">return</span> sum % <span class="number">10</span> === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">luhnCheck(<span class="string">'4485275742308327'</span>); <span class="comment">// true</span></span><br><span class="line">luhnCheck(<span class="number">6011329933655299</span>); <span class="comment">//  false</span></span><br><span class="line">luhnCheck(<span class="number">123456789</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="补充：银行卡号码的校验规则："><a href="#补充：银行卡号码的校验规则：" class="headerlink" title="补充：银行卡号码的校验规则："></a>补充：<strong>银行卡号码的校验规则</strong>：</h4><p>关于<code>luhn</code>算法，可以参考以下文章：</p>
<blockquote>
<p><a href="https://www.cnblogs.com/cc11001100/p/9357177.html" target="_blank" rel="noopener">银行卡号码校验算法（Luhn算法，又叫模10算法）</a></p>
</blockquote>
<p>银行卡号码的校验采用<code>Luhn</code>算法，校验过程大致如下：</p>
<ol>
<li>从右到左给卡号字符串编号，最右边第一位是1，最右边第二位是2，最右边第三位是3….</li>
<li>从右向左遍历，对每一位字符t执行第三个步骤，并将每一位的计算结果相加得到一个数s。</li>
<li>对每一位的计算规则：如果这一位是奇数位，则返回t本身，如果是偶数位，则先将t乘以2得到一个数n，如果n是一位数（小于10），直接返回n，否则将n的个位数和十位数相加返回。</li>
<li>如果s能够整除10，则此号码有效，否则号码无效。</li>
</ol>
<p>因为最终的结果会对10取余来判断是否能够整除10，所以又叫做模10算法。</p>
<p>当然，还是库比较香: <strong>bankcardinfo</strong></p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E9%93%B6%E8%A1%8C%E5%8D%A1%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%B8%AA%E5%BA%93.jpg" alt></p>
<h3 id="6-splitLines：将多行字符串拆分为行数组。"><a href="#6-splitLines：将多行字符串拆分为行数组。" class="headerlink" title="6. splitLines：将多行字符串拆分为行数组。"></a>6. <code>splitLines</code>：将多行字符串拆分为行数组。</h3><p>使用<code>String.prototype.split()</code>和正则表达式匹配换行符并创建一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> splitLines = <span class="function"><span class="params">str</span> =&gt;</span> str.split(<span class="regexp">/\r?\n/</span>);</span><br><span class="line"></span><br><span class="line">splitLines(<span class="string">'This\nis a\nmultiline\nstring.\n'</span>); <span class="comment">// ['This', 'is a', 'multiline', 'string.' , '']</span></span><br></pre></td></tr></table></figure>

<h3 id="7-stripHTMLTags：删除字符串中的HTMl标签"><a href="#7-stripHTMLTags：删除字符串中的HTMl标签" class="headerlink" title="7. stripHTMLTags：删除字符串中的HTMl标签"></a>7. <code>stripHTMLTags</code>：删除字符串中的<code>HTMl</code>标签</h3><p>从字符串中删除<code>HTML / XML</code>标签。</p>
<p>使用正则表达式从字符串中删除<code>HTML / XML</code> 标记。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stripHTMLTags = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/&lt;[^&gt;]*&gt;/g</span>, <span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">stripHTMLTags(<span class="string">'&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;'</span>); <span class="comment">// 'lorem ipsum'</span></span><br></pre></td></tr></table></figure>

<h2 id="4-第四部分：对象"><a href="#4-第四部分：对象" class="headerlink" title="4. 第四部分：对象"></a>4. 第四部分：对象</h2><h3 id="1-dayOfYear：当前日期天数"><a href="#1-dayOfYear：当前日期天数" class="headerlink" title="1. dayOfYear：当前日期天数"></a>1. <code>dayOfYear</code>：当前日期天数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dayOfYear = <span class="function"><span class="params">date</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Math</span>.floor((date - <span class="keyword">new</span> <span class="built_in">Date</span>(date.getFullYear(), <span class="number">0</span>, <span class="number">0</span>)) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">dayOfYear(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// 285</span></span><br></pre></td></tr></table></figure>

<h3 id="2-forOwn：迭代属性并执行回调"><a href="#2-forOwn：迭代属性并执行回调" class="headerlink" title="2. forOwn：迭代属性并执行回调"></a>2. <code>forOwn</code>：迭代属性并执行回调</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> forOwn = <span class="function">(<span class="params">obj, fn</span>) =&gt;</span> <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> fn(obj[key], key, obj));</span><br><span class="line">forOwn(&#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">a</span>: <span class="number">1</span> &#125;, v =&gt; <span class="built_in">console</span>.log(v)); <span class="comment">// 'bar', 1</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Get-Time-From-Date：返回当前24小时制时间的字符串"><a href="#3-Get-Time-From-Date：返回当前24小时制时间的字符串" class="headerlink" title="3. Get Time From Date：返回当前24小时制时间的字符串"></a>3. <code>Get Time From Date</code>：返回当前24小时制时间的字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getColonTimeFromDate = <span class="function"><span class="params">date</span> =&gt;</span> date.toTimeString().slice(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">getColonTimeFromDate(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// "08:38:00"</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Get-Days-Between-Dates：返回日期间的天数"><a href="#4-Get-Days-Between-Dates：返回日期间的天数" class="headerlink" title="4. Get Days Between Dates：返回日期间的天数"></a>4. <code>Get Days Between Dates</code>：返回日期间的天数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getDaysDiffBetweenDates = <span class="function">(<span class="params">dateInitial, dateFinal</span>) =&gt;</span></span><br><span class="line">  (dateFinal - dateInitial) / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>);</span><br><span class="line">  </span><br><span class="line">getDaysDiffBetweenDates(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2019-01-01'</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2019-10-14'</span>)); <span class="comment">// 286</span></span><br></pre></td></tr></table></figure>

<h3 id="5-is：检查值是否为特定类型。"><a href="#5-is：检查值是否为特定类型。" class="headerlink" title="5. is：检查值是否为特定类型。"></a>5. <code>is</code>：检查值是否为特定类型。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> is = <span class="function">(<span class="params">type, val</span>) =&gt;</span> ![, <span class="literal">null</span>].includes(val) &amp;&amp; val.constructor === type;</span><br><span class="line"></span><br><span class="line">is(<span class="built_in">Array</span>, [<span class="number">1</span>]); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">ArrayBuffer</span>, <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Map</span>, <span class="keyword">new</span> <span class="built_in">Map</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">RegExp</span>, /./g); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Set</span>, <span class="keyword">new</span> <span class="built_in">Set</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">WeakMap</span>, <span class="keyword">new</span> <span class="built_in">WeakMap</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">WeakSet</span>, <span class="keyword">new</span> <span class="built_in">WeakSet</span>()); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">String</span>, <span class="string">''</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">String</span>, <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">''</span>)); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Number</span>, <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Number</span>, <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Boolean</span>, <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line">is(<span class="built_in">Boolean</span>, <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="6-isAfterDate：检查是否在某日期后"><a href="#6-isAfterDate：检查是否在某日期后" class="headerlink" title="6. isAfterDate：检查是否在某日期后"></a>6. <code>isAfterDate</code>：检查是否在某日期后</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAfterDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &gt; dateB;</span><br><span class="line"></span><br><span class="line">isAfterDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="7-isBeforeDate：检查是否在某日期前"><a href="#7-isBeforeDate：检查是否在某日期前" class="headerlink" title="7. isBeforeDate：检查是否在某日期前"></a>7. <code>isBeforeDate</code>：检查是否在某日期前</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBeforeDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &lt; dateB;</span><br><span class="line"></span><br><span class="line">isBeforeDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="8-tomorrow：获取明天的字符串格式时间"><a href="#8-tomorrow：获取明天的字符串格式时间" class="headerlink" title="8 tomorrow：获取明天的字符串格式时间"></a>8 <code>tomorrow</code>：获取明天的字符串格式时间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> tomorrow = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  t.setDate(t.getDate() + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> t.toISOString().split(<span class="string">'T'</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">tomorrow(); <span class="comment">// 2019-10-15 (如果明天是2019-10-15)</span></span><br></pre></td></tr></table></figure>

<h3 id="9-equals：全等判断"><a href="#9-equals：全等判断" class="headerlink" title="9. equals：全等判断"></a>9. <code>equals</code>：全等判断</h3><p>在两个变量之间进行深度比较以确定它们是否全等。</p>
<p><strong>此代码段精简的核心在于Array.prototype.every()的使用。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> equals = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (a <span class="keyword">instanceof</span> <span class="built_in">Date</span> &amp;&amp; b <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> a.getTime() === b.getTime();</span><br><span class="line">  <span class="keyword">if</span> (!a || !b || (<span class="keyword">typeof</span> a !== <span class="string">'object'</span> &amp;&amp; <span class="keyword">typeof</span> b !== <span class="string">'object'</span>)) <span class="keyword">return</span> a === b;</span><br><span class="line">  <span class="keyword">if</span> (a.prototype !== b.prototype) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(a);</span><br><span class="line">  <span class="keyword">if</span> (keys.length !== <span class="built_in">Object</span>.keys(b).length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> keys.every(<span class="function"><span class="params">k</span> =&gt;</span> equals(a[k], b[k]));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">equals(&#123; <span class="attr">a</span>: [<span class="number">2</span>, &#123; <span class="attr">e</span>: <span class="number">3</span> &#125;], <span class="attr">b</span>: [<span class="number">4</span>], <span class="attr">c</span>: <span class="string">'foo'</span> &#125;, &#123; <span class="attr">a</span>: [<span class="number">2</span>, &#123; <span class="attr">e</span>: <span class="number">3</span> &#125;], <span class="attr">b</span>: [<span class="number">4</span>], <span class="attr">c</span>: <span class="string">'foo'</span> &#125;); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="5-第五部分：数字"><a href="#5-第五部分：数字" class="headerlink" title="5. 第五部分：数字"></a>5. 第五部分：数字</h2><h3 id="1-randomIntegerInRange：生成指定范围的随机整数"><a href="#1-randomIntegerInRange：生成指定范围的随机整数" class="headerlink" title="1. randomIntegerInRange：生成指定范围的随机整数"></a>1. <code>randomIntegerInRange</code>：生成指定范围的随机整数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomIntegerInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line"></span><br><span class="line">randomIntegerInRange(<span class="number">0</span>, <span class="number">5</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="2-randomNumberInRange：生成指定范围的随机小数"><a href="#2-randomNumberInRange：生成指定范围的随机小数" class="headerlink" title="2. randomNumberInRange：生成指定范围的随机小数"></a>2. <code>randomNumberInRange</code>：生成指定范围的随机小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomNumberInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.random() * (max - min) + min;</span><br><span class="line"></span><br><span class="line">randomNumberInRange(<span class="number">2</span>, <span class="number">10</span>); <span class="comment">// 6.0211363285087005</span></span><br></pre></td></tr></table></figure>

<h3 id="3-round：四舍五入到指定位数"><a href="#3-round：四舍五入到指定位数" class="headerlink" title="3. round：四舍五入到指定位数"></a>3. <code>round</code>：四舍五入到指定位数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> round = <span class="function">(<span class="params">n, decimals = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Number</span>(<span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(<span class="string">`<span class="subst">$&#123;n&#125;</span>e<span class="subst">$&#123;decimals&#125;</span>`</span>)&#125;</span>e-<span class="subst">$&#123;decimals&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">round(<span class="number">1.005</span>, <span class="number">2</span>); <span class="comment">// 1.01</span></span><br></pre></td></tr></table></figure>

<h3 id="4-sum：计算数组或多个数字的总和"><a href="#4-sum：计算数组或多个数字的总和" class="headerlink" title="4. sum：计算数组或多个数字的总和"></a>4. <code>sum</code>：计算数组或多个数字的总和</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">...arr</span>) =&gt;</span> [...arr].reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">// 10</span></span><br><span class="line">sum(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h3 id="5-toCurrency：简单的货币单位转换"><a href="#5-toCurrency：简单的货币单位转换" class="headerlink" title="5. toCurrency：简单的货币单位转换"></a>5. <code>toCurrency</code>：简单的货币单位转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toCurrency = <span class="function">(<span class="params">n, curr, LanguageFormat = <span class="literal">undefined</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Intl</span>.NumberFormat(LanguageFormat, &#123; <span class="attr">style</span>: <span class="string">'currency'</span>, <span class="attr">currency</span>: curr &#125;).format(n);</span><br><span class="line">  </span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'EUR'</span>); <span class="comment">// €123,456.79</span></span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'USD'</span>, <span class="string">'en-us'</span>); <span class="comment">// $123,456.79  </span></span><br><span class="line">toCurrency(<span class="number">123456.789</span>, <span class="string">'USD'</span>, <span class="string">'fa'</span>); <span class="comment">// ۱۲۳٬۴۵۶٫۷۹</span></span><br><span class="line">toCurrency(<span class="number">322342436423.2435</span>, <span class="string">'JPY'</span>); <span class="comment">// ¥322,342,436,423</span></span><br></pre></td></tr></table></figure>

<h2 id="6-第六部分：浏览器操作及其它"><a href="#6-第六部分：浏览器操作及其它" class="headerlink" title="6. 第六部分：浏览器操作及其它"></a>6. 第六部分：浏览器操作及其它</h2><h3 id="1-bottomVisible：检查页面底部是否可见"><a href="#1-bottomVisible：检查页面底部是否可见" class="headerlink" title="1. bottomVisible：检查页面底部是否可见"></a>1. <code>bottomVisible</code>：检查页面底部是否可见</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bottomVisible = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.clientHeight + <span class="built_in">window</span>.scrollY &gt;=</span><br><span class="line">  (<span class="built_in">document</span>.documentElement.scrollHeight || <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line"></span><br><span class="line">bottomVisible(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Create-Directory：检查创建目录"><a href="#2-Create-Directory：检查创建目录" class="headerlink" title="2. Create Directory：检查创建目录"></a>2. <code>Create Directory</code>：检查创建目录</h3><p>此代码段调用<code>fs</code>模块的<code>existsSync()</code>检查目录是否存在，如果不存在，则<code>mkdirSync()</code>创建该目录。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> createDirIfNotExists = <span class="function"><span class="params">dir</span> =&gt;</span> (!fs.existsSync(dir) ? fs.mkdirSync(dir) : <span class="literal">undefined</span>);</span><br><span class="line">createDirIfNotExists(<span class="string">'test'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-currentURL：返回当前链接url"><a href="#3-currentURL：返回当前链接url" class="headerlink" title="3. currentURL：返回当前链接url"></a>3. <code>currentURL</code>：返回当前链接<code>url</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currentURL = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.location.href;</span><br><span class="line"></span><br><span class="line">currentURL(); <span class="comment">// 'https://juejin.im'</span></span><br></pre></td></tr></table></figure>

<h3 id="4-distance：返回两点间的距离"><a href="#4-distance：返回两点间的距离" class="headerlink" title="4. distance：返回两点间的距离"></a>4. <code>distance</code>：返回两点间的距离</h3><p>该代码段通过计算欧几里得距离来返回两点之间的距离。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> distance = <span class="function">(<span class="params">x0, y0, x1, y1</span>) =&gt;</span> <span class="built_in">Math</span>.hypot(x1 - x0, y1 - y0);</span><br><span class="line"></span><br><span class="line">distance(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2.23606797749979</span></span><br></pre></td></tr></table></figure>

<h3 id="5-elementContains：检查是否包含子元素"><a href="#5-elementContains：检查是否包含子元素" class="headerlink" title="5. elementContains：检查是否包含子元素"></a>5. <code>elementContains</code>：检查是否包含子元素</h3><p>此代码段检查父元素是否包含子元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elementContains = <span class="function">(<span class="params">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);</span><br><span class="line"></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'head'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'title'</span>)); <span class="comment">// true</span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'body'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'body'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="6-getStyle：返回指定元素的生效样式"><a href="#6-getStyle：返回指定元素的生效样式" class="headerlink" title="6. getStyle：返回指定元素的生效样式"></a>6. <code>getStyle</code>：返回指定元素的生效样式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getStyle = <span class="function">(<span class="params">el, ruleName</span>) =&gt;</span> getComputedStyle(el)[ruleName];</span><br><span class="line"></span><br><span class="line">getStyle(<span class="built_in">document</span>.querySelector(<span class="string">'p'</span>), <span class="string">'font-size'</span>); <span class="comment">// '16px'</span></span><br></pre></td></tr></table></figure>

<h3 id="7-getType：返回值或变量的类型名"><a href="#7-getType：返回值或变量的类型名" class="headerlink" title="7. getType：返回值或变量的类型名"></a>7. <code>getType</code>：返回值或变量的类型名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getType = <span class="function"><span class="params">v</span> =&gt;</span></span><br><span class="line">  v === <span class="literal">undefined</span> ? <span class="string">'undefined'</span> : v === <span class="literal">null</span> ? <span class="string">'null'</span> : v.constructor.name.toLowerCase();</span><br><span class="line">  </span><br><span class="line">getType(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])); <span class="comment">// 'set'</span></span><br><span class="line">getType([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 'array'</span></span><br></pre></td></tr></table></figure>

<h3 id="8-hasClass：校验指定元素的类名"><a href="#8-hasClass：校验指定元素的类名" class="headerlink" title="8. hasClass：校验指定元素的类名"></a>8. <code>hasClass</code>：校验指定元素的类名</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hasClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.contains(className);</span><br><span class="line">hasClass(<span class="built_in">document</span>.querySelector(<span class="string">'p.special'</span>), <span class="string">'special'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="9-hide：隐藏所有的指定标签"><a href="#9-hide：隐藏所有的指定标签" class="headerlink" title="9. hide：隐藏所有的指定标签"></a>9. <code>hide</code>：隐藏所有的指定标签</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hide = <span class="function">(<span class="params">...el</span>) =&gt;</span> [...el].forEach(<span class="function"><span class="params">e</span> =&gt;</span> (e.style.display = <span class="string">'none'</span>));</span><br><span class="line"></span><br><span class="line">hide(<span class="built_in">document</span>.querySelectorAll(<span class="string">'img'</span>)); <span class="comment">// 隐藏所有&lt;img&gt;标签</span></span><br></pre></td></tr></table></figure>

<h3 id="10-httpsRedirect：HTTP-跳转-HTTPS"><a href="#10-httpsRedirect：HTTP-跳转-HTTPS" class="headerlink" title="10. httpsRedirect：HTTP 跳转 HTTPS"></a>10. <code>httpsRedirect</code>：<code>HTTP</code> 跳转 <code>HTTPS</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> httpsRedirect = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (location.protocol !== <span class="string">'https:'</span>) location.replace(<span class="string">'https://'</span> + location.href.split(<span class="string">'//'</span>)[<span class="number">1</span>]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">httpsRedirect(); <span class="comment">// 若在`http://www.baidu.com`, 则跳转到`https://www.baidu.com`</span></span><br></pre></td></tr></table></figure>

<h3 id="11-insertAfter：在指定元素之后插入新元素"><a href="#11-insertAfter：在指定元素之后插入新元素" class="headerlink" title="11. insertAfter：在指定元素之后插入新元素"></a>11. <code>insertAfter</code>：在指定元素之后插入新元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertAfter = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'afterend'</span>, htmlString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;div id="myId"&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span></span><br><span class="line">insertAfter(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;after&lt;/p&gt;'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="12-insertBefore：在指定元素之前插入新元素"><a href="#12-insertBefore：在指定元素之前插入新元素" class="headerlink" title="12. insertBefore：在指定元素之前插入新元素"></a>12. <code>insertBefore</code>：在指定元素之前插入新元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertBefore = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'beforebegin'</span>, htmlString);</span><br><span class="line"></span><br><span class="line">insertBefore(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;before&lt;/p&gt;'</span>); <span class="comment">// &lt;p&gt;before&lt;/p&gt; &lt;div id="myId"&gt;...&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="13-isBrowser：检查是否为浏览器环境"><a href="#13-isBrowser：检查是否为浏览器环境" class="headerlink" title="13. isBrowser：检查是否为浏览器环境"></a>13. <code>isBrowser</code>：检查是否为浏览器环境</h3><p>此代码段可用于确定当前运行时环境是否为浏览器。这有助于避免在服务器（节点）上运行前端模块时出错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowser = <span class="function"><span class="params">()</span> =&gt;</span> ![<span class="keyword">typeof</span> <span class="built_in">window</span>, <span class="keyword">typeof</span> <span class="built_in">document</span>].includes(<span class="string">'undefined'</span>);</span><br><span class="line"></span><br><span class="line">isBrowser(); <span class="comment">// true (browser)</span></span><br><span class="line">isBrowser(); <span class="comment">// false (Node)</span></span><br></pre></td></tr></table></figure>

<h3 id="14-isBrowserTab：检查当前标签页是否活动"><a href="#14-isBrowserTab：检查当前标签页是否活动" class="headerlink" title="14. isBrowserTab：检查当前标签页是否活动"></a>14. <code>isBrowserTab</code>：检查当前标签页是否活动</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowserTabFocused = <span class="function"><span class="params">()</span> =&gt;</span> !<span class="built_in">document</span>.hidden;</span><br><span class="line"></span><br><span class="line">isBrowserTabFocused(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="15-nodeListToArray：转换nodeList为数组"><a href="#15-nodeListToArray：转换nodeList为数组" class="headerlink" title="15. nodeListToArray：转换nodeList为数组"></a>15. <code>nodeListToArray</code>：转换<code>nodeList</code>为数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeListToArray = <span class="function"><span class="params">nodeList</span> =&gt;</span> [...nodeList];</span><br><span class="line"></span><br><span class="line">nodeListToArray(<span class="built_in">document</span>.childNodes); <span class="comment">// [ &lt;!DOCTYPE html&gt;, html ]</span></span><br></pre></td></tr></table></figure>

<h3 id="16-Random-Hexadecimal-Color-Code：随机十六进制颜色"><a href="#16-Random-Hexadecimal-Color-Code：随机十六进制颜色" class="headerlink" title="16. Random Hexadecimal Color Code：随机十六进制颜色"></a>16. <code>Random Hexadecimal Color Code</code>：随机十六进制颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> randomHexColorCode = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> n = (<span class="built_in">Math</span>.random() * <span class="number">0xfffff</span> * <span class="number">1000000</span>).toString(<span class="number">16</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'#'</span> + n.slice(<span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">randomHexColorCode(); <span class="comment">// "#e34155"</span></span><br></pre></td></tr></table></figure>

<h3 id="17-scrollToTop：平滑滚动至顶部"><a href="#17-scrollToTop：平滑滚动至顶部" class="headerlink" title="17. scrollToTop：平滑滚动至顶部"></a>17. <code>scrollToTop</code>：平滑滚动至顶部</h3><p>该代码段可用于平滑滚动到当前页面的顶部</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">scrollToTop();</span><br></pre></td></tr></table></figure>

<h3 id="18-smoothScroll：滚动到指定元素区域"><a href="#18-smoothScroll：滚动到指定元素区域" class="headerlink" title="18. smoothScroll：滚动到指定元素区域"></a>18. <code>smoothScroll</code>：滚动到指定元素区域</h3><p>该代码段可将指定元素平滑滚动到浏览器窗口的可见区域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> smoothScroll = <span class="function"><span class="params">element</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.querySelector(element).scrollIntoView(&#123;</span><br><span class="line">    behavior: <span class="string">'smooth'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">smoothScroll(<span class="string">'#fooBar'</span>); </span><br><span class="line">smoothScroll(<span class="string">'.fooBar'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="19-detectDeviceType：检测移动-PC设备"><a href="#19-detectDeviceType：检测移动-PC设备" class="headerlink" title="19. detectDeviceType：检测移动/PC设备"></a>19. <code>detectDeviceType</code>：检测移动/PC设备</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> detectDeviceType = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)</span><br><span class="line">    ? <span class="string">'Mobile'</span></span><br><span class="line">    : <span class="string">'Desktop'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="20-getScrollPosition：返回当前的滚动位置"><a href="#20-getScrollPosition：返回当前的滚动位置" class="headerlink" title="20. getScrollPosition：返回当前的滚动位置"></a>20. <code>getScrollPosition</code>：返回当前的滚动位置</h3><p>默认参数为<code>window</code> ，<code>pageXOffset(pageYOffset)</code>为第一选择，没有则用<code>scrollLeft(scrollTop)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPosition = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123;</span><br><span class="line">  x: el.pageXOffset !== <span class="literal">undefined</span> ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">  y: el.pageYOffset !== <span class="literal">undefined</span> ? el.pageYOffset : el.scrollTop</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">getScrollPosition(); <span class="comment">// &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="21-size：获取不同类型变量的字节长度"><a href="#21-size：获取不同类型变量的字节长度" class="headerlink" title="21. size：获取不同类型变量的字节长度"></a>21. <code>size</code>：获取不同类型变量的字节长度</h3><p>这个的实现非常巧妙，利用<code>Blob</code>类文件对象的特性，获取对象的长度。</p>
<p>另外，多重三元运算符，是真香。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> size = <span class="function"><span class="params">val</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.isArray(val)</span><br><span class="line">    ? val.length</span><br><span class="line">    : val &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">'object'</span></span><br><span class="line">    ? val.size || val.length || <span class="built_in">Object</span>.keys(val).length</span><br><span class="line">    : <span class="keyword">typeof</span> val === <span class="string">'string'</span></span><br><span class="line">    ? <span class="keyword">new</span> Blob([val]).size</span><br><span class="line">    : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">size([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// 5</span></span><br><span class="line">size(<span class="string">'size'</span>); <span class="comment">// 4</span></span><br><span class="line">size(&#123; <span class="attr">one</span>: <span class="number">1</span>, <span class="attr">two</span>: <span class="number">2</span>, <span class="attr">three</span>: <span class="number">3</span> &#125;); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="22-escapeHTML：转义HTML"><a href="#22-escapeHTML：转义HTML" class="headerlink" title="22. escapeHTML：转义HTML"></a>22. <code>escapeHTML</code>：转义<code>HTML</code></h3><p>当然是用来防<code>XSS</code>攻击啦。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> escapeHTML = <span class="function"><span class="params">str</span> =&gt;</span></span><br><span class="line">  str.replace(</span><br><span class="line">    /[&amp;<span class="xml"><span class="tag">&lt;&gt;</span>'"]/g,</span></span><br><span class="line"><span class="xml">    tag =&gt;</span></span><br><span class="line"><span class="xml">      (&#123;</span></span><br><span class="line"><span class="xml">        '&amp;': '<span class="symbol">&amp;amp;</span>',</span></span><br><span class="line"><span class="xml">        '<span class="tag">&lt;<span class="name">':</span> '&amp;<span class="attr">lt</span>;',</span></span></span><br><span class="line"><span class="xml">        '&gt;': '<span class="symbol">&amp;gt;</span>',</span></span><br><span class="line"><span class="xml">        "'": '<span class="symbol">&amp;#39;</span>',</span></span><br><span class="line"><span class="xml">        '"': '<span class="symbol">&amp;quot;</span>'</span></span><br><span class="line"><span class="xml">      &#125;[tag] || tag)</span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"></span><br><span class="line"><span class="xml">escapeHTML('<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Me &amp; you<span class="tag">&lt;/<span class="name">a</span>&gt;</span>'); // '<span class="symbol">&amp;lt;</span>a href=<span class="symbol">&amp;quot;</span>#<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span>Me <span class="symbol">&amp;amp;</span> you<span class="symbol">&amp;lt;</span>/a<span class="symbol">&amp;gt;</span>'</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/27/JS-原生从初级到高级/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/27/JS-原生从初级到高级/" class="post-title-link" itemprop="url">JS 原生从初级到高级</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-27 20:30:54 / 修改时间：22:31:50" itemprop="dateCreated datePublished" datetime="2019-11-27T20:30:54+08:00">2019-11-27</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS原生从初级到高级-近1-5万字"><a href="#JS原生从初级到高级-近1-5万字" class="headerlink" title="JS原生从初级到高级 近1.5万字"></a>JS原生从初级到高级 近1.5万字</h1><h2 id="1、函数"><a href="#1、函数" class="headerlink" title="1、函数"></a>1、函数</h2><h3 id="1-1-函数的三种定义方法"><a href="#1-1-函数的三种定义方法" class="headerlink" title="1-1 函数的三种定义方法"></a>1-1 函数的三种定义方法</h3><h4 id="1-1-1-函数声明"><a href="#1-1-1-函数声明" class="headerlink" title="1-1-1 函数声明"></a>1-1-1 函数声明</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;<span class="comment">//匿名函数</span></span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line">()=&gt;&#123;&#125;<span class="comment">//如果&#123;&#125;内容只有一行&#123;&#125;和return关键字可省,</span></span><br></pre></td></tr></table></figure>

<h4 id="1-1-2-函数表达式（函数字面量）"><a href="#1-1-2-函数表达式（函数字面量）" class="headerlink" title="1-1-2 函数表达式（函数字面量）"></a>1-1-2 函数表达式（函数字面量）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES5</span></span><br><span class="line"><span class="keyword">var</span> sum=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line"><span class="keyword">let</span> sum=<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;<span class="comment">//如果&#123;&#125;内容只有一行&#123;&#125;和return关键字可省,</span></span><br></pre></td></tr></table></figure>

<h4 id="1-1-3-构造函数"><a href="#1-1-3-构造函数" class="headerlink" title="1.1.3 构造函数"></a>1.1.3 构造函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span> , <span class="string">'return a + b'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-1-4-三种方式的对比"><a href="#1-1-4-三种方式的对比" class="headerlink" title="1-1-4 三种方式的对比"></a>1-1-4 三种方式的对比</h4><ul>
<li>1、函数声明有预解析,而且函数声明的优先级高于变量</li>
<li>2、使用Function构造函数定义函数的方式是一个函数表达式,这种方式会导致解析两次代码，影响性能。第一次解析常规的JavaScript代码，第二次解析传入构造函数的字符串</li>
</ul>
<h3 id="1-2-ES-5-中函数的4种调用"><a href="#1-2-ES-5-中函数的4种调用" class="headerlink" title="1-2 ES 5 中函数的4种调用"></a>1-2 ES 5 中函数的4种调用</h3><p><strong>在ES5中函数内容的this指向和调用方法有关</strong></p>
<h4 id="1-2-1-函数调用模式"><a href="#1-2-1-函数调用模式" class="headerlink" title="1-2-1 函数调用模式"></a>1-2-1 函数调用模式</h4><p>包括函数名()和匿名函数调用,this指向window</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//这个属于函数名调用，this指向window</span></span><br><span class="line">&#125;</span><br><span class="line">getSum()</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//匿名函数调用，this指向window</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getSum=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//实际上也是函数名调用，window</span></span><br><span class="line">&#125;</span><br><span class="line">getSum()</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-方法调用"><a href="#1-2-2-方法调用" class="headerlink" title="1-2-2 方法调用"></a>1-2-2 方法调用</h4><p>对象.方法名(),this指向对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objList = &#123;</span><br><span class="line">   name: <span class="string">'methods'</span>,</span><br><span class="line">   getSum: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//objList对象</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">objList.getSum()</span><br></pre></td></tr></table></figure>

<h4 id="1-2-3-构造器调用"><a href="#1-2-3-构造器调用" class="headerlink" title="1-2-3 构造器调用"></a>1-2-3 构造器调用</h4><p>new 构造函数名(),this指向实例化的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//是构造函数调用，指向实例化的对象personOne</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> personOne = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-间接调用"><a href="#1-2-4-间接调用" class="headerlink" title="1-2-4 间接调用"></a>1-2-4 间接调用</h4><p>利用call和apply来实现,this就是call和apply对应的第一个参数,如果不传值或者第一个值为null,undefined时this指向window</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo.apply(<span class="string">'我是apply改变的this值'</span>);<span class="comment">//我是apply改变的this值</span></span><br><span class="line">foo.call(<span class="string">'我是call改变的this值'</span>);<span class="comment">//我是call改变的this值</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-ES-6-中函数的调用"><a href="#1-3-ES-6-中函数的调用" class="headerlink" title="1-3 ES 6 中函数的调用"></a>1-3 ES 6 中函数的调用</h3><p>箭头函数不可以当作构造函数使用，也就是不能用new命令实例化一个对象，否则会抛出一个错误 箭头函数的this是和定义时有关和调用无关 调用就是函数调用模式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//window</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrowFun = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//window</span></span><br><span class="line">&#125;</span><br><span class="line">arrowFun()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrowObj = &#123;</span><br><span class="line">  arrFun: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   (<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>)<span class="comment">//this指向的是arrowObj对象</span></span><br><span class="line">   &#125;)()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> arrowObj.arrFun();</span><br></pre></td></tr></table></figure>

<h3 id="1-4-call-apply和bind"><a href="#1-4-call-apply和bind" class="headerlink" title="1-4 call,apply和bind"></a>1-4 call,apply和bind</h3><ul>
<li>1、IE5之前不支持call和apply,bind是ES5出来的</li>
<li>2、call和apply可以调用函数,改变this,实现继承和借用别的对象的方法</li>
</ul>
<h4 id="1-4-1call和apply定义"><a href="#1-4-1call和apply定义" class="headerlink" title="1-4-1call和apply定义"></a>1-4-1call和apply定义</h4><p>调用方法,用一个对象替换掉另一个对象(this) 对象.call(新this对象,实参1,实参2,实参3…..) 对象.apply(新this对象,[实参1,实参2,实参3…..])</p>
<h4 id="1-4-2-call和apply用法"><a href="#1-4-2-call和apply用法" class="headerlink" title="1-4-2 call和apply用法"></a>1-4-2 call和apply用法</h4><p>1.间接调用函数,改变作用域的this值</p>
<p>2.劫持其他对象的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  name:<span class="string">"张三"</span>,</span><br><span class="line">  logName:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar=&#123;</span><br><span class="line">  name:<span class="string">"李四"</span></span><br><span class="line">&#125;;</span><br><span class="line">foo.logName.call(bar);<span class="comment">//李四</span></span><br><span class="line">实质是call改变了foo的<span class="keyword">this</span>指向为bar,并调用该函数</span><br></pre></td></tr></table></figure>

<p>3.两个函数实现继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;   </span><br><span class="line">  <span class="keyword">this</span>.name = name;   </span><br><span class="line">  <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);   </span><br><span class="line">  &#125;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;  </span><br><span class="line">  Animal.call(<span class="keyword">this</span>, name);  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">"Black Cat"</span>);   </span><br><span class="line">cat.showName(); <span class="comment">//Black Cat</span></span><br></pre></td></tr></table></figure>

<p>4.为类数组(arguments和nodeList)添加数组方法push,pop</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">Array</span>.prototype.push.call(<span class="built_in">arguments</span>,<span class="string">'王五'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);<span class="comment">//['张三','李四','王五']</span></span><br><span class="line">&#125;)(<span class="string">'张三'</span>,<span class="string">'李四'</span>)</span><br></pre></td></tr></table></figure>

<p>5.合并数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"><span class="keyword">let</span> arr2=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]; </span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arr1,arr2); <span class="comment">//将arr2合并到了arr1中</span></span><br></pre></td></tr></table></figure>

<p>6.求数组最大值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr)</span><br></pre></td></tr></table></figure>

<p>7.判断字符类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;)  返回<span class="built_in">Object</span></span><br><span class="line">使用方法就是</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([])  返回 array</span><br></pre></td></tr></table></figure>

<h4 id="1-4-3-bind"><a href="#1-4-3-bind" class="headerlink" title="1-4-3  bind"></a>1-4-3  bind</h4><p>bind是function的一个函数扩展方法，<br>bind以后代码重新绑定了func内部的this指向,返回一个函数,不会调用方法,<strong>不兼容IE8</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'李四'</span></span><br><span class="line"> <span class="keyword">var</span> foo = &#123;</span><br><span class="line">   name: <span class="string">"张三"</span>,</span><br><span class="line">   logName: <span class="function"><span class="keyword">function</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, age);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> fooNew = foo.logName;</span><br><span class="line"> <span class="keyword">var</span> fooNewBind = foo.logName.bind(foo);</span><br><span class="line"> fooNew(<span class="number">10</span>)<span class="comment">//李四,10</span></span><br><span class="line"> fooNewBind(<span class="number">11</span>)<span class="comment">//张三,11  因为bind改变了fooNewBind里面的this指向</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-call-apply和bind原生实现"><a href="#1-4-4-call-apply和bind原生实现" class="headerlink" title="1-4-4 call,apply和bind原生实现"></a>1-4-4 call,apply和bind原生实现</h4><p>call实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.newCall = <span class="function"><span class="keyword">function</span>(<span class="params">context, ...parameter</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">typeof</span> context === <span class="string">'object'</span> || <span class="keyword">typeof</span> context === <span class="string">'function'</span>) &#123;</span><br><span class="line">    context = context || <span class="built_in">window</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    context = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line">  context[fn] = <span class="keyword">this</span>  </span><br><span class="line">  <span class="keyword">const</span> res =context[fn](...parameter)</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Abiel'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">age,sex</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, age, sex);</span><br><span class="line">&#125;</span><br><span class="line">sayHi.newCall (person, <span class="number">25</span>, <span class="string">'男'</span>); <span class="comment">// Abiel 25 男</span></span><br></pre></td></tr></table></figure>

<p>apply实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.newApply = <span class="function"><span class="keyword">function</span>(<span class="params">context, parameter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> context === <span class="string">'object'</span> || <span class="keyword">typeof</span> context === <span class="string">'function'</span>) &#123;</span><br><span class="line">    context = context || <span class="built_in">window</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    context = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> fn = <span class="built_in">Symbol</span>()</span><br><span class="line">  context[fn] = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> res=context[fn](...parameter);</span><br><span class="line">  <span class="keyword">delete</span> context[fn]</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">"Abiel"</span></span><br><span class="line">  &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, age, sex);</span><br><span class="line">  &#125;</span><br><span class="line">    sayHi.newApply (person,[ <span class="number">25</span>, <span class="string">'男'</span>]) <span class="comment">//Abiel 25 男</span></span><br></pre></td></tr></table></figure>

<p>call 和 apply 封装对比:其实核心代码是一样的,只不过 call 需要对第二个形参解构</p>
<p>bind实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context,...innerArgs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> me = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...finnalyArgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> me.call(context,...innerArgs,...finnalyArgs)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Abiel'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">age,sex</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, age, sex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> personSayHi = sayHi.bind(person, <span class="number">25</span>)</span><br><span class="line">personSayHi(<span class="string">'男'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-5-三者异同"><a href="#1-4-5-三者异同" class="headerlink" title="1-4-5 三者异同"></a>1-4-5 三者异同</h4><p>同:都是改变this指向,都可接收参数 </p>
<p>异:bind和call是接收单个参数,apply是接收数组</p>
<h3 id="1-5-函数的节流和防抖"><a href="#1-5-函数的节流和防抖" class="headerlink" title="1-5 函数的节流和防抖"></a>1-5 函数的节流和防抖</h3><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>类型</td>
<td>概念</td>
<td>应用</td>
</tr>
<tr>
<td>节流</td>
<td>事件触发后每隔一段时间触发一次,可触发多次</td>
<td>scroll,resize事件一段时间触发多次</td>
</tr>
<tr>
<td>防抖</td>
<td>事件触发动作完成后一段时间触发一次</td>
<td>scroll,resize事件触发完后一段时间触发</td>
</tr>
</tbody></table>
<p>节流:</p>
<h4 id="1-5-1-节流"><a href="#1-5-1-节流" class="headerlink" title="1-5-1 节流"></a>1-5-1 节流</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">   // html 部分</span><br><span class="line">   <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">   *&#123;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">margin</span>:<span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css">   <span class="selector-class">.scroll-box</span>&#123;</span></span><br><span class="line">       width : 100%;</span><br><span class="line">       height : 500px;</span><br><span class="line"><span class="css">       <span class="selector-tag">background</span><span class="selector-pseudo">:blue</span>;</span></span><br><span class="line">       overflow : auto;</span><br><span class="line">   &#125;    </span><br><span class="line"><span class="css">   <span class="selector-class">.scroll-item</span>&#123;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">height</span><span class="selector-pseudo">:1000px</span>;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">width</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"scroll-box"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"scroll-item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">       <span class="comment">// js 部分</span></span></span><br><span class="line"><span class="javascript">       <span class="keyword">let</span> throttle = <span class="function"><span class="keyword">function</span> (<span class="params">func, delay</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">let</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">         if (!timer) &#123;</span><br><span class="line"><span class="javascript">           timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">             func.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span></span><br><span class="line"><span class="javascript">             <span class="comment">// 或者直接 func()</span></span></span><br><span class="line"><span class="javascript">             timer = <span class="literal">null</span>;</span></span><br><span class="line">           &#125;, delay);</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">         <span class="comment">// 处理函数</span></span></span><br><span class="line"><span class="javascript">         <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span></span><br><span class="line"><span class="javascript">         <span class="built_in">console</span>.log(<span class="built_in">Math</span>.random());</span></span><br><span class="line">         &#125;</span><br><span class="line"><span class="javascript">       <span class="comment">// 测试用例</span></span></span><br><span class="line"><span class="javascript">       <span class="built_in">document</span>.getElementsByClassName(<span class="string">'scroll-box'</span>)[<span class="number">0</span>].addEventListener(<span class="string">"scroll"</span>, debounce(handle,<span class="number">3000</span>));</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-5-2-防抖"><a href="#1-5-2-防抖" class="headerlink" title="1-5-2 防抖"></a>1-5-2 防抖</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	    <span class="comment">// html 部分同上</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// js 部分</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> debounce = <span class="function"><span class="keyword">function</span> (<span class="params">fn, wait</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> timeout = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (timeout !== <span class="literal">null</span>) clearTimeout(timeout);<span class="comment">//如果多次触发将上次记录延迟清除掉</span></span></span><br><span class="line"><span class="javascript">      timeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 或者直接 fn()</span></span></span><br><span class="line"><span class="javascript">        timeout = <span class="literal">null</span>;</span></span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">     <span class="comment">// 处理函数</span></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="built_in">Math</span>.random());</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="comment">// 测试用例</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.getElementsByClassName(<span class="string">'scroll-box'</span>)[<span class="number">0</span>].addEventListener(<span class="string">"scroll"</span>, debounce(handle, <span class="number">3000</span>));</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-6-原型链"><a href="#1-6-原型链" class="headerlink" title="1-6.原型链"></a>1-6.原型链</h3><h4 id="1-6-1-定义"><a href="#1-6-1-定义" class="headerlink" title="1-6-1 定义"></a>1-6-1 定义</h4><p>对象继承属性的一个链条</p>
<h4 id="1-6-2构造函数-实例与原型对象的关系"><a href="#1-6-2构造函数-实例与原型对象的关系" class="headerlink" title="1-6-2构造函数,实例与原型对象的关系"></a>1-6-2构造函数,实例与原型对象的关系</h4><p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/JS%E5%8E%9F%E5%9E%8B%E9%93%BE.jpg" alt="JS原型链"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123; <span class="keyword">this</span>.name = name; &#125;<span class="comment">//person是构造函数</span></span><br><span class="line"><span class="keyword">var</span> o3personTwo = <span class="keyword">new</span> Person(<span class="string">'personTwo'</span>)<span class="comment">//personTwo是实例</span></span><br></pre></td></tr></table></figure>

<p>![](<a href="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/JS" target="_blank" rel="noopener">https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/JS</a> 原型链举例.jpg)</p>
<p>原型对象都有一个默认的constructor属性指向构造函数</p>
<h4 id="1-6-3-创建实例的方法"><a href="#1-6-3-创建实例的方法" class="headerlink" title="1-6-3 创建实例的方法"></a>1-6-3 创建实例的方法</h4><p>1.字面量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="string">'name'</span>:<span class="string">'张三'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>2.Object构造函数创建</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Obj=<span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">Obj.name=<span class="string">'张三'</span></span><br></pre></td></tr></table></figure>

<p>3.使用工厂模式创建对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"> o.name = name;</span><br><span class="line"> <span class="keyword">return</span> o; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = createPerson(<span class="string">'张三'</span>);</span><br></pre></td></tr></table></figure>

<p>4.使用构造函数创建对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">'张三'</span>);</span><br></pre></td></tr></table></figure>

<h4 id="1-6-4-new运算符"><a href="#1-6-4-new运算符" class="headerlink" title="1-6-4 new运算符"></a>1-6-4 new运算符</h4><p>1.创了一个新对象;<br>2.this指向构造函数;<br>3.构造函数有返回,会替换new出来的对象,如果没有就是new出来的对象<br>4.手动封装一个new运算符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> new2 = <span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="built_in">Object</span>.create(func.prototype);<span class="comment">//创建对象</span></span><br><span class="line">    <span class="keyword">var</span> k = func.call(o);<span class="comment">//改变this指向，把结果付给k</span></span><br><span class="line">    <span class="keyword">if</span> (k &amp;&amp; k <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;<span class="comment">//判断k的类型是不是对象</span></span><br><span class="line">        <span class="keyword">return</span> k;&amp;emsp;<span class="comment">//是，返回k</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> o;<span class="comment">//不是返回返回构造函数的执行结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-6-5-对象的原型链"><a href="#1-6-5-对象的原型链" class="headerlink" title="1-6-5 对象的原型链"></a>1-6-5 对象的原型链</h4><p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE.jpg" alt></p>
<h3 id="1-7-继承的方式"><a href="#1-7-继承的方式" class="headerlink" title="1-7 继承的方式"></a>1-7 继承的方式</h3><p>JS是一门弱类型动态语言,封装和继承是他的两大特性</p>
<h4 id="1-7-1-原型链继承"><a href="#1-7-1-原型链继承" class="headerlink" title="1-7-1 原型链继承"></a>1-7-1 原型链继承</h4><p>将父类的实例作为子类的原型 </p>
<p>1.代码实现 </p>
<p>定义父类:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个动物类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Animal'</span>;</span><br><span class="line">  <span class="comment">// 实例方法</span></span><br><span class="line">  <span class="keyword">this</span>.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'正在睡觉！'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原型方法</span></span><br><span class="line">Animal.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'正在吃：'</span> + food);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>子类:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.name = <span class="string">'cat'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&amp;emsp;Test Code</span></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);<span class="comment">//cat</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.eat(<span class="string">'fish'</span>));<span class="comment">//cat正在吃：fish  undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep());<span class="comment">//cat正在睡觉！ undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">//true </span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>2.优缺点 </p>
<p>简单易于实现,但是要想为子类新增属性和方法，必须要在new Animal()这样的语句之后执行,无法实现多继承</p>
<h4 id="1-7-2-构造继承"><a href="#1-7-2-构造继承" class="headerlink" title="1.7.2 构造继承"></a>1.7.2 构造继承</h4><p>实质是利用call来改变Cat中的this指向 </p>
<p>1.代码实现 </p>
<p>子类:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.优缺点 </p>
<p>可以实现多继承,不能继承原型属性/方法</p>
<h4 id="1-7-3-实例继承"><a href="#1-7-3-实例继承" class="headerlink" title="1.7.3 实例继承"></a>1.7.3 实例继承</h4><p>为父类实例添加新特性，作为子类实例返回 </p>
<p>1.代码实现 </p>
<p>子类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance = <span class="keyword">new</span> Animal();</span><br><span class="line">  instance.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.优缺点 </p>
<p>不限制调用方式,但不能实现多继承</p>
<h4 id="1-7-4-拷贝继承"><a href="#1-7-4-拷贝继承" class="headerlink" title="1.7.4 拷贝继承"></a>1.7.4 拷贝继承</h4><p>将父类的属性和方法拷贝一份到子类中 </p>
<p>1.子类:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> animal = <span class="keyword">new</span> Animal();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> animal)&#123;</span><br><span class="line">    Cat.prototype[p] = animal[p];</span><br><span class="line">  &#125;</span><br><span class="line">  Cat.prototype.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.优缺点 </p>
<p>支持多继承,但是效率低占用内存</p>
<h4 id="1-7-5-组合继承"><a href="#1-7-5-组合继承" class="headerlink" title="1.7.5 组合继承"></a>1.7.5 组合继承</h4><p>通过调用父类构造，继承父类的属性并保留传参的优点，然后通过将父类实例作为子类原型，实现函数复用 </p>
<p>1.子类:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.constructor = Cat;</span><br></pre></td></tr></table></figure>

<h4 id="1-7-6-寄生组合继承"><a href="#1-7-6-寄生组合继承" class="headerlink" title="1.7.6 寄生组合继承"></a>1.7.6 寄生组合继承</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 创建一个没有实例方法的类</span></span><br><span class="line">  <span class="keyword">var</span> Super = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">  Super.prototype = Animal.prototype;</span><br><span class="line">  <span class="comment">//将实例作为子类的原型</span></span><br><span class="line">  Cat.prototype = <span class="keyword">new</span> Super();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="1-7-7-ES6的extends继承"><a href="#1-7-7-ES6的extends继承" class="headerlink" title="1.7.7 ES6的extends继承"></a>1.7.7 ES6的extends继承</h4><p>ES6 的继承机制是先创造父类的实例对象this（所以必须先调用super方法），然后再用子类的构造函数修改this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//constructor是构造方法</span></span><br><span class="line">    <span class="keyword">constructor</span>(skin, language) &#123;</span><br><span class="line">        <span class="keyword">this</span>.skin = skin;</span><br><span class="line">        <span class="keyword">this</span>.language = language;</span><br><span class="line">    &#125;</span><br><span class="line">    say() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'我是父类'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(skin, language, positon) &#123;</span><br><span class="line">        <span class="comment">//console.log(this);//报错</span></span><br><span class="line">        <span class="keyword">super</span>(skin, language);</span><br><span class="line">        <span class="comment">//super();相当于父类的构造函数</span></span><br><span class="line">        <span class="comment">//console.log(this);调用super后得到了this，不报错，this指向子类，相当于调用了父类.prototype.constructor.call(this)</span></span><br><span class="line">        <span class="keyword">this</span>.positon = positon;</span><br><span class="line">    &#125;</span><br><span class="line">    aboutMe() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.skin&#125;</span> <span class="subst">$&#123;<span class="keyword">this</span>.language&#125;</span>  <span class="subst">$&#123;<span class="keyword">this</span>.positon&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用只能通过new的方法得到实例,再调用里面的方法</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Chinese(<span class="string">'红色'</span>, <span class="string">'中文'</span>, <span class="string">'香港'</span>);</span><br><span class="line">obj.aboutMe();</span><br><span class="line">obj.say();</span><br></pre></td></tr></table></figure>

<h3 id="1-8-高阶函数"><a href="#1-8-高阶函数" class="headerlink" title="1.8.高阶函数"></a>1.8.高阶函数</h3><h4 id="1-8-1定义"><a href="#1-8-1定义" class="headerlink" title="1.8.1定义"></a>1.8.1定义</h4><p>函数的参数是函数或返回函数</p>
<h3 id="1-8-2-常见的高阶函数"><a href="#1-8-2-常见的高阶函数" class="headerlink" title="1.8.2 常见的高阶函数"></a>1.8.2 常见的高阶函数</h3><p><code>map</code>,<code>reduce</code>,<code>filter</code>,<code>sort</code></p>
<h3 id="1-8-3-柯里化"><a href="#1-8-3-柯里化" class="headerlink" title="1.8.3 柯里化"></a>1.8.3 柯里化</h3><p>1.定义:只传递给函数一部分参数来调用它，让它返回一个函数去处理剩下的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn(a,b,c,d)=&gt;fn(a)(b)(c)(d)</span><br></pre></td></tr></table></figure>

<p>2.代码实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currying = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> len = fn.length</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">curr</span> (<span class="params">...args1</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (args1.length &gt;= len) &#123;</span><br><span class="line">         <span class="keyword">return</span> fn(...args1)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">...args2</span>) =&gt;</span> curr(...args1, ...args2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-8-4-反柯里化"><a href="#1-8-4-反柯里化" class="headerlink" title="1.8.4 反柯里化"></a>1.8.4 反柯里化</h4><p>1.定义:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj.func(arg1, arg2)=&gt;func(obj, arg1, arg2)</span><br></pre></td></tr></table></figure>

<p>2.代码实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.uncurrying = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Function</span>.prototype.call.apply(that, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"Hello "</span> + <span class="keyword">this</span>.value +<span class="string">" "</span>+[].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sayHiuncurrying=sayHi.uncurrying();</span><br><span class="line"><span class="built_in">console</span>.log(sayHiuncurrying(&#123;<span class="attr">value</span>:<span class="string">'world'</span>&#125;,<span class="string">"hahaha"</span>));</span><br></pre></td></tr></table></figure>

<h4 id="1-8-5偏函数"><a href="#1-8-5偏函数" class="headerlink" title="1.8.5偏函数"></a>1.8.5偏函数</h4><p>1.定义:指定部分参数来返回一个新的定制函数的形式 </p>
<p>2.例子:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> foo(a,b,<span class="number">8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-对象"><a href="#2-对象" class="headerlink" title="2.对象"></a>2.对象</h2><h3 id="2-1-对象的声明方法"><a href="#2-1-对象的声明方法" class="headerlink" title="2.1.对象的声明方法"></a>2.1.对象的声明方法</h3><h4 id="2-1-1-字面量"><a href="#2-1-1-字面量" class="headerlink" title="2.1.1 字面量"></a>2.1.1 字面量</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test2 = &#123;<span class="attr">x</span>:<span class="number">123</span>,<span class="attr">y</span>:<span class="number">345</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(test2);<span class="comment">//&#123;x:123,y:345&#125;;</span></span><br><span class="line"><span class="built_in">console</span>.log(test2.x);<span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(test2.__proto__.x);<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(test2.__proto__.x === test2.x);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-构造函数"><a href="#2-1-2-构造函数" class="headerlink" title="2.1.2 构造函数"></a>2.1.2 构造函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test1 = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123;<span class="attr">x</span>:<span class="number">123</span>,<span class="attr">y</span>:<span class="number">345</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(test1);<span class="comment">//&#123;x:123,y:345&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(test1.x);<span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(test1.__proto__.x);<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(test1.__proto__.x === test1.x);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>new的作用: </p>
<p>1.创了一个新对象; </p>
<p>2.this指向构造函数; </p>
<p>3.构造函数有返回,会替换new出来的对象,如果没有就是new出来的对象</p>
<h4 id="2-1-3-内置方法"><a href="#2-1-3-内置方法" class="headerlink" title="2.1.3 内置方法"></a>2.1.3 内置方法</h4><p>Obejct.create(obj,descriptor),obj是对象,describe描述符属性(可选)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = <span class="built_in">Object</span>.create(&#123;<span class="attr">x</span>:<span class="number">123</span>,<span class="attr">y</span>:<span class="number">345</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(test);<span class="comment">//&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(test.x);<span class="comment">//123</span></span><br><span class="line"><span class="built_in">console</span>.log(test.__proto__.x);<span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(test.__proto__.x === test.x);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-1-4-三种方法的优缺点"><a href="#2-1-4-三种方法的优缺点" class="headerlink" title="2.1.4 三种方法的优缺点"></a>2.1.4 三种方法的优缺点</h4><p>1.功能:都能实现对象的声明,并能够赋值和取值<br> 2.继承性:内置方法创建的对象继承到<strong>proto</strong>属性上<br> 3.隐藏属性:三种声明方法会默认为内部的每个成员（属性或方法）生成一些隐藏属性，这些隐藏属性是可以读取和可配置的,属性分类见下面<br> 4.属性读取:<code>Object.getOwnPropertyDescriptor()或getOwnPropertyDescriptor()</code><br> 5.属性设置:<code>Object.definePropertype或Object.defineProperties</code></p>
<h3 id="2-2-对象的属性"><a href="#2-2-对象的属性" class="headerlink" title="2.2.对象的属性"></a>2.2.对象的属性</h3><h4 id="2-2-1-属性分类"><a href="#2-2-1-属性分类" class="headerlink" title="2.2.1 属性分类"></a>2.2.1 属性分类</h4><p>1.数据属性4个特性: <code>configurable(可配置),``enumerable(可枚举)</code>,<code>writable(可修改),``value(属性值)</code></p>
<p>2.访问器属性2个特性: <code>get(获取)</code>,<code>set(设置)</code></p>
<p>3.内部属性 由JavaScript引擎内部使用的属性; 不能直接访问,但是可以通过对象内置方法间接访问,如:<code>[[Prototype]]</code>可以通过                <code>Object.getPrototypeOf()</code>访问; 内部属性用<code>[[]]</code>包围表示,是一个抽象操作,没有对应字符串类型的属性名,如<code>[[Prototype]]</code></p>
<h4 id="2-2-2-属性描述符"><a href="#2-2-2-属性描述符" class="headerlink" title="2.2.2 属性描述符"></a>2.2.2 属性描述符</h4><p>1.定义:将一个属性的所有特性编码成一个对象返回</p>
<p>2.描述符的属性有:数据属性和访问器属性</p>
<p>3.使用范围: 作为方法<code>Object.defineProperty</code> <code>Object.getOwnPropertyDescriptor</code>, <code>Object.create</code>的第二个参数</p>
<h4 id="2-2-3-属性描述符的默认值"><a href="#2-2-3-属性描述符的默认值" class="headerlink" title="2.2.3 属性描述符的默认值"></a>2.2.3 属性描述符的默认值</h4><p>1.访问对象存在的属性</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>特性名</td>
<td>默认值</td>
</tr>
<tr>
<td>value</td>
<td>对应属性值</td>
</tr>
<tr>
<td>get</td>
<td>对应属性值</td>
</tr>
<tr>
<td>set</td>
<td>undefined</td>
</tr>
<tr>
<td>writable</td>
<td>true</td>
</tr>
<tr>
<td>enumerable</td>
<td>true</td>
</tr>
<tr>
<td>configurable</td>
<td>true</td>
</tr>
</tbody></table>
<p>所以通过上面三种声明方法已存在的属性都是有这些默认描述符</p>
<p>2.访问对象不存在的属性</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>特性名</td>
<td>默认值</td>
</tr>
<tr>
<td>value</td>
<td>undefined</td>
</tr>
<tr>
<td>get</td>
<td>undefined</td>
</tr>
<tr>
<td>set</td>
<td>undefined</td>
</tr>
<tr>
<td>writable</td>
<td>false</td>
</tr>
<tr>
<td>enumerable</td>
<td>false</td>
</tr>
<tr>
<td>configurable</td>
<td>false</td>
</tr>
</tbody></table>
<ol start="3">
<li>描述符属性的使用规则</li>
</ol>
<p><code>get</code>,<code>set</code>与<code>wriable</code>,<code>value</code>是互斥的,如果有交集设置会报错</p>
<h4 id="2-2-4-属性定义"><a href="#2-2-4-属性定义" class="headerlink" title="2.2.4 属性定义"></a>2.2.4 属性定义</h4><p>1.定义属性的函数有两个:<code>Object.defineProperty</code>和<code>Object.defineProperties</code>.例如: <code>Object.defineProperty(obj, propName, desc)</code></p>
<p>2.在引擎内部,会转换成这样的方法调用: <code>obj.[[DefineOwnProperty]] (propName, desc, true)</code></p>
<h4 id="2-2-5-属性赋值"><a href="#2-2-5-属性赋值" class="headerlink" title="2.2.5 属性赋值"></a>2.2.5 属性赋值</h4><p>1.赋值运算符(=)就是在调用[[Put]].比如: obj.prop = v;</p>
<p>2.在引擎内部,会转换成这样的方法调用: <code>obj.[[Put]] (&quot;prop&quot;, v, isStrictModeOn)</code></p>
<h4 id="2-2-6-判断对象的属性"><a href="#2-2-6-判断对象的属性" class="headerlink" title="2.2.6 判断对象的属性"></a>2.2.6 判断对象的属性</h4><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>名称</td>
<td>含义</td>
<td>用法</td>
</tr>
<tr>
<td>in</td>
<td>如果指定的属性在指定的对象或其原型链中，则in 运算符返回true</td>
<td>‘name’ in test //true</td>
</tr>
<tr>
<td>hasOwnProperty()</td>
<td>只判断自身属性</td>
<td>test.hasOwnProperty(‘name’) //true</td>
</tr>
<tr>
<td>.或[]</td>
<td>对象或原型链上不存在该属性，则会返回undefined</td>
<td>test.name //“lei” test[“name”] //“lei”</td>
</tr>
</tbody></table>
<h3 id="2-3-Symbol"><a href="#2-3-Symbol" class="headerlink" title="2.3 Symbol"></a>2.3 Symbol</h3><h4 id="2-3-1概念"><a href="#2-3-1概念" class="headerlink" title="2.3.1概念"></a>2.3.1概念</h4><p>是一种数据类型; 不能new,因为Symbol是一个原始类型的值，不是对象。</p>
<h4 id="2-3-2-定义方法"><a href="#2-3-2-定义方法" class="headerlink" title="2.3.2 定义方法"></a>2.3.2 定义方法</h4><p>Symbol(),可以传参 var s1 = Symbol(); var s2 = Symbol(); s1 === s2 // false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参数的情况</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);</span><br><span class="line">s1 === s2 <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-3-用法"><a href="#2-3-3-用法" class="headerlink" title="2.3.3 用法"></a>2.3.3 用法</h4><p>1.不能与其他类型的值进行运算; </p>
<p>2.作为属性名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">'Hello!'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">'Hello!'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种写法</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, mySymbol, &#123; <span class="attr">value</span>: <span class="string">'Hello!'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上写法都得到同样结果</span></span><br><span class="line">a[mySymbol] <span class="comment">// "Hello!"</span></span><br></pre></td></tr></table></figure>

<p>3.作为对象属性名时，不能用点运算符,可以用[]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> name = <span class="built_in">Symbol</span>();</span><br><span class="line">a.name = <span class="string">'lili'</span>;</span><br><span class="line">a[name] = <span class="string">'lucy'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a.name,a[name]);</span><br></pre></td></tr></table></figure>

<p>4.遍历不会被for…in、for…of和Object.keys()、Object.getOwnPropertyNames()取到该属性</p>
<h4 id="2-3-4-Symbol-for"><a href="#2-3-4-Symbol-for" class="headerlink" title="2.3.4 Symbol.for"></a>2.3.4 Symbol.for</h4><p>1.定义:在全局中搜索有没有以该参数作为名称的Symbol值，如果有，就返回这个Symbol值，否则就新建并返回一个以该字符串为名称的Symbol值</p>
<p> 2.举例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>);</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>);</span><br><span class="line">s1 === s2 <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-5-Symbol-keyFor"><a href="#2-3-5-Symbol-keyFor" class="headerlink" title="2.3.5 Symbol.keyFor"></a>2.3.5 Symbol.keyFor</h4><p>1.定义:返回一个已登记的Symbol类型值的key </p>
<p>2.举例:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Symbol</span>.for(<span class="string">"foo"</span>);</span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(s1) <span class="comment">// "foo"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);</span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(s2) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-遍历"><a href="#2-4-遍历" class="headerlink" title="2.4.遍历"></a>2.4.遍历</h3><h4 id="2-4-1-一级对象遍历方法"><a href="#2-4-1-一级对象遍历方法" class="headerlink" title="2.4.1 一级对象遍历方法"></a>2.4.1 一级对象遍历方法</h4><table>
<thead>
<tr>
<th>方法</th>
<th>特性</th>
</tr>
</thead>
<tbody><tr>
<td>for … in</td>
<td>遍历对象自身的和继承的可枚举属性(不含Symbol属性)</td>
</tr>
<tr>
<td>Object.keys(obj)</td>
<td>返回一个数组,包括对象自身的(不含继承的)所有可枚举属性(不含Symbol属性)</td>
</tr>
<tr>
<td>Object.getOwnPropertyNames(obj)</td>
<td>返回一个数组,包括对象自身的所有可枚举和不可枚举属性(不含Symbol属性)</td>
</tr>
<tr>
<td>Object.getOwnPropertySymbols(obj)</td>
<td>返回一个数组,包含对象自身的所有Symbol属性</td>
</tr>
<tr>
<td>Reflect.ownKeys(obj)</td>
<td>返回一个数组,包含对象自身的所有(不枚举、可枚举和Symbol)属性</td>
</tr>
<tr>
<td>Reflect.enumerate(obj)</td>
<td>返回一个Iterator对象,遍历对象自身的和继承的所有可枚举属性(不含Symbol属性)</td>
</tr>
</tbody></table>
<p>总结:</p>
<p>1.只有Object.getOwnPropertySymbols(obj)和Reflect.ownKeys(obj)可以拿到Symbol属性 </p>
<p>2.只有Reflect.ownKeys(obj)可以拿到不可枚举属性</p>
<h4 id="2-4-2-多级对象遍历"><a href="#2-4-2-多级对象遍历" class="headerlink" title="2.4.2 多级对象遍历"></a>2.4.2 多级对象遍历</h4><p>数据模型:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> treeNodes = [</span><br><span class="line">    &#123;</span><br><span class="line">     id: <span class="number">1</span>,</span><br><span class="line">     name: <span class="string">'1'</span>,</span><br><span class="line">     children: [</span><br><span class="line">       &#123;</span><br><span class="line">        id: <span class="number">11</span>,</span><br><span class="line">        name: <span class="string">'11'</span>,</span><br><span class="line">        children: [</span><br><span class="line">         &#123;</span><br><span class="line">          id: <span class="number">111</span>,</span><br><span class="line">          name: <span class="string">'111'</span>,</span><br><span class="line">          children:[]</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            id: <span class="number">112</span>,</span><br><span class="line">            name: <span class="string">'112'</span></span><br><span class="line">           &#125;</span><br><span class="line">          ]</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">          id: <span class="number">12</span>,</span><br><span class="line">          name: <span class="string">'12'</span>,</span><br><span class="line">          children: []</span><br><span class="line">         &#125;</span><br><span class="line">         ],</span><br><span class="line">         users: []</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br></pre></td></tr></table></figure>

<p>递归:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parseTreeJson = <span class="function"><span class="keyword">function</span>(<span class="params">treeNodes</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!treeNodes || !treeNodes.length) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = treeNodes.length; i &lt; len; i++) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> childs = treeNodes[i].children;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(treeNodes[i].id);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(childs &amp;&amp; childs.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                 parseTreeJson(childs);</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'------------- 递归实现 ------------------'</span>);</span><br><span class="line">    parseTreeJson(treeNodes);</span><br></pre></td></tr></table></figure>

<h3 id="2-5-深度拷贝"><a href="#2-5-深度拷贝" class="headerlink" title="2.5.深度拷贝"></a>2.5.深度拷贝</h3><h4 id="2-5-1-Object-assign"><a href="#2-5-1-Object-assign" class="headerlink" title="2.5.1 Object.assign"></a>2.5.1 Object.assign</h4><p>1.定义:将源对象（source）的所有可枚举属性，复制到目标对象（target） </p>
<p>2.用法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">合并多个对象</span><br><span class="line"><span class="keyword">var</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2);</span><br></pre></td></tr></table></figure>

<p>3.注意: 这个是伪深度拷贝,只能拷贝第一层</p>
<h4 id="2-5-2-JSON-stringify"><a href="#2-5-2-JSON-stringify" class="headerlink" title="2.5.2 JSON.stringify"></a>2.5.2 JSON.stringify</h4><p>1.原理:是将对象转化为字符串,而字符串是简单数据类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify())</span><br></pre></td></tr></table></figure>

<h4 id="2-5-3-递归拷贝"><a href="#2-5-3-递归拷贝" class="headerlink" title="2.5.3 递归拷贝"></a>2.5.3 递归拷贝</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">source</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> targetObj = source.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;; <span class="comment">// 判断复制的目标是数组还是对象</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> keys <span class="keyword">in</span> source)&#123; <span class="comment">// 遍历目标</span></span><br><span class="line">    <span class="keyword">if</span>(source.hasOwnProperty(keys))&#123;</span><br><span class="line">      <span class="keyword">if</span>(source[keys] &amp;&amp; <span class="keyword">typeof</span> source[keys] === <span class="string">'object'</span>)&#123; <span class="comment">// 如果值是对象，就递归一下</span></span><br><span class="line">        targetObj[keys] = source[keys].constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">        targetObj[keys] = deepClone(source[keys]);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123; <span class="comment">// 如果不是，就直接赋值</span></span><br><span class="line">        targetObj[keys] = source[keys];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> targetObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-数据拦截"><a href="#2-6-数据拦截" class="headerlink" title="2.6.数据拦截"></a>2.6.数据拦截</h3><p>定义:利用对象内置方法,设置属性,进而改变对象的属性值</p>
<h4 id="2-6-1-Object-defineProterty"><a href="#2-6-1-Object-defineProterty" class="headerlink" title="2.6.1 Object.defineProterty"></a>2.6.1 Object.defineProterty</h4><p>1.ES5出来的方法; </p>
<p>2.三个参数:对象(必填),属性值(必填),描述符(可选);</p>
<p>3.defineProterty的描述符属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据属性:value,writable,configurable,enumerable</span><br><span class="line">访问器属性:get,set</span><br><span class="line">注:不能同时设置value和writable,这两对属性是互斥的</span><br></pre></td></tr></table></figure>

<p>4.拦截对象的两种情况:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">''</span>,<span class="attr">age</span>:<span class="string">''</span>,<span class="attr">sex</span>:<span class="string">''</span>  &#125;,</span><br><span class="line">    defaultName = [<span class="string">"这是姓名默认值1"</span>,<span class="string">"这是年龄默认值1"</span>,<span class="string">"这是性别默认值1"</span>];</span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">      <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> defaultName;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">set</span>(value) &#123;</span><br><span class="line">        defaultName = value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(obj.name);</span><br><span class="line">  <span class="built_in">console</span>.log(obj.age);</span><br><span class="line">  <span class="built_in">console</span>.log(obj.sex);</span><br><span class="line">  obj.name = <span class="string">"这是改变值1"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(obj.name);</span><br><span class="line">  <span class="built_in">console</span>.log(obj.age);</span><br><span class="line">  <span class="built_in">console</span>.log(obj.sex);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> objOne=&#123;&#125;,defaultNameOne=<span class="string">"这是默认值2"</span>;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, <span class="string">'name'</span>, &#123;</span><br><span class="line">      <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> defaultNameOne;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">set</span>(value) &#123;</span><br><span class="line">        defaultNameOne = value;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(objOne.name);</span><br><span class="line">  objOne.name = <span class="string">"这是改变值2"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(objOne.name);</span><br></pre></td></tr></table></figure>

<p>5.拦截数组变化的情况</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a=&#123;&#125;;</span><br><span class="line">bValue=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a,<span class="string">"b"</span>,&#123;</span><br><span class="line">    <span class="keyword">set</span>:function(value)&#123;</span><br><span class="line">        bValue=value;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"setted"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">get</span>:function()&#123;</span><br><span class="line">        <span class="keyword">return</span> bValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">a.b;<span class="comment">//1</span></span><br><span class="line">a.b=[];<span class="comment">//setted</span></span><br><span class="line">a.b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];<span class="comment">//setted</span></span><br><span class="line">a.b[<span class="number">1</span>]=<span class="number">10</span>;<span class="comment">//无输出</span></span><br><span class="line">a.b.push(<span class="number">4</span>);<span class="comment">//无输出</span></span><br><span class="line">a.b.length=<span class="number">5</span>;<span class="comment">//无输出</span></span><br><span class="line">a.b;<span class="comment">//[1,10,3,4,undefined];</span></span><br></pre></td></tr></table></figure>

<p>结论:defineProperty无法检测数组索引赋值,改变数组长度的变化; 但是通过数组方法来操作可以检测到</p>
<p>多级嵌套对象监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">let</span> info = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">"object"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    definePro(obj, i, obj[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">definePro</span>(<span class="params">obj, key, value</span>) </span>&#123;</span><br><span class="line">  observe(value);</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function(newval) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"检测变化"</span>, newval);</span><br><span class="line">      value = newval;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">definePro(info, <span class="string">"friends"</span>, &#123; <span class="attr">name</span>: <span class="string">"张三"</span> &#125;);</span><br><span class="line">info.friends.name = <span class="string">"李四"</span>;</span><br></pre></td></tr></table></figure>

<p>6.存在的问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">不能监听数组索引赋值和改变长度的变化</span><br><span class="line">必须深层遍历嵌套的对象,因为defineProterty只能劫持对象的属性,因此我们需要对每个对象的每个属性进行遍历，如果属性值也是对象那么需要深度遍历,显然能劫持一个完整的对象是更好的选择</span><br></pre></td></tr></table></figure>

<h4 id="2-6-2-proxy"><a href="#2-6-2-proxy" class="headerlink" title="2.6.2 proxy"></a>2.6.2 proxy</h4><p>1.ES6出来的方法,实质是对对象做了一个拦截,并提供了13个处理方法</p>
<p>2.两个参数:对象和行为函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, key, receiver) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"get"</span>, key);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, key, value, receiver) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"set"</span>, key, value);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, value, receiver);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, handler);</span><br><span class="line">  proxy.name = <span class="string">"李四"</span>;</span><br><span class="line">  proxy.age = <span class="number">24</span>;</span><br></pre></td></tr></table></figure>

<p>涉及到多级对象或者多级数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//传递两个参数，一个是object, 一个是proxy的handler</span></span><br><span class="line"><span class="comment">//如果是不是嵌套的object，直接加上proxy返回，如果是嵌套的object，那么进入addSubProxy进行递归。 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toDeepProxy</span>(<span class="params">object, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!isPureObject(object)) addSubProxy(object, handler); </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(object, handler);</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是一个递归函数，目的是遍历object的所有属性，如果不是pure object,那么就继续遍历object的属性的属性，如果是pure object那么就加上proxy</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addSubProxy</span>(<span class="params">object, handler</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> object) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( <span class="keyword">typeof</span> object[prop] == <span class="string">'object'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isPureObject(object[prop])) addSubProxy(object[prop], handler);</span><br><span class="line">                object[prop] = <span class="keyword">new</span> <span class="built_in">Proxy</span>(object[prop], handler);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        object = <span class="keyword">new</span> <span class="built_in">Proxy</span>(object, handler)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//是不是一个pure object,意思就是object里面没有再嵌套object了</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isPureObject</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> object!== <span class="string">'object'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> object) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> object[prop] == <span class="string">'object'</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> object = &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">        first: &#123;</span><br><span class="line">            four: <span class="number">5</span>,</span><br><span class="line">            second: &#123;</span><br><span class="line">                third: <span class="string">'ssss'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    class: 5,</span><br><span class="line">    arr: [<span class="number">1</span>, <span class="number">2</span>, &#123;<span class="attr">arr1</span>:<span class="number">10</span>&#125;],</span><br><span class="line">    age: &#123;</span><br><span class="line">        age1: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这是一个嵌套了对象和数组的数组</span></span><br><span class="line"><span class="keyword">let</span> objectArr = [&#123;<span class="attr">name</span>:&#123;<span class="attr">first</span>:<span class="string">'ss'</span>&#125;, <span class="attr">arr1</span>:[<span class="number">1</span>,<span class="number">2</span>]&#125;, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是proxy的handler</span></span><br><span class="line"><span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, property) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'get:'</span> + property)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, property);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, property, value) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'set:'</span> + property + <span class="string">'='</span> + value);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, property, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//变成监听对象</span></span><br><span class="line">object = toDeepProxy(object, handler);</span><br><span class="line">objectArr = toDeepProxy(objectArr, handler);</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行一系列操作</span></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'pro'</span>)</span><br><span class="line">objectArr.length</span><br><span class="line">objectArr[<span class="number">3</span>];</span><br><span class="line">objectArr[<span class="number">2</span>]=<span class="number">10</span></span><br><span class="line">objectArr[<span class="number">0</span>].name.first = <span class="string">'ss'</span></span><br><span class="line">objectArr[<span class="number">0</span>].arr1[<span class="number">0</span>]</span><br><span class="line">object.name.first.second.third = <span class="string">'yyyyy'</span></span><br><span class="line">object.class = <span class="number">6</span>;</span><br><span class="line">object.name.first.four</span><br><span class="line">object.arr[<span class="number">2</span>].arr1</span><br><span class="line">object.age.age1 = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'pro'</span>)</span><br></pre></td></tr></table></figure>

<p>3.问题和优点 reflect对象没有构造函数 可以监听数组索引赋值,改变数组长度的变化, 是直接监听对象的变化,不用深层遍历</p>
<h4 id="2-6-3-defineProterty和proxy的对比"><a href="#2-6-3-defineProterty和proxy的对比" class="headerlink" title="2.6.3 defineProterty和proxy的对比"></a>2.6.3 defineProterty和proxy的对比</h4><p>1.defineProterty是es5的标准,proxy是es6的标准;</p>
<p>2.proxy可以监听到数组索引赋值,改变数组长度的变化;</p>
<p>3.proxy是监听对象,不用深层遍历,defineProterty是监听属性;</p>
<p>3.利用defineProterty实现双向数据绑定(vue2.x采用的核心)</p>
<p> 4.利用proxy实现双向数据绑定(vue3.x会采用)</p>
<h2 id="3-数组"><a href="#3-数组" class="headerlink" title="3.数组"></a>3.数组</h2><p>数组基本上考察数组方法多一点,所以这里就单纯介绍常见的场景数组的方法,还有很多场景后续补充;<br> 本文主要从应用来讲数组api的一些骚操作;<br> 如一行代码扁平化n维数组、数组去重、求数组最大值、数组求和、排序、对象和数组的转化等；<br> 上面这些应用场景你可以用一行代码实现？</p>
<h3 id="3-1-扁平化n维数组"><a href="#3-1-扁平化n维数组" class="headerlink" title="3.1 扁平化n维数组"></a>3.1 扁平化n维数组</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>]].flat(<span class="number">1</span>) <span class="comment">//[1,2,3]</span></span><br><span class="line">[<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>]]].flat(<span class="number">2</span>) <span class="comment">//[1,2,3,4,5]</span></span><br><span class="line">[<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>]]].toString()  <span class="comment">//'1,2,3,4,5'</span></span><br><span class="line">[<span class="number">1</span>[<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>[...]].flat(<span class="literal">Infinity</span>) <span class="comment">//[1,2,3,4...n]</span></span><br></pre></td></tr></table></figure>

<p>Array.flat(n)是ES10扁平数组的api,n表示维度,n值为Infinity时维度为无限大</p>
<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(arr.some(<span class="function"><span class="params">item</span>=&gt;</span><span class="built_in">Array</span>.isArray(item))) &#123;</span><br><span class="line">        arr = [].concat(...arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">flatten([<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>]]) <span class="comment">//[1,2,3]</span></span><br><span class="line">flatten([<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>]]) <span class="comment">//[1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<p>实质是利用递归和数组合并方法concat实现扁平</p>
<h3 id="3-2-去重"><a href="#3-2-去重" class="headerlink" title="3.2 去重"></a>3.2 去重</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>])) <span class="comment">//[1,2,3,4]</span></span><br><span class="line">[...new <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>])] <span class="comment">//[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<p>set是ES6新出来的一种一种定义不重复数组的数据类型 Array.from是将类数组转化为数组 …是扩展运算符,将set里面的值转化为字符串 </p>
<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.distinct = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> map = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> result = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> n <span class="keyword">of</span> <span class="keyword">this</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(n <span class="keyword">in</span> map)) &#123;</span><br><span class="line">            map[n] = <span class="number">1</span></span><br><span class="line">            result.push(n)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>].distinct(); <span class="comment">//[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<p>取新数组存值,循环两个数组值相比较</p>
<h3 id="3-3排序"><a href="#3-3排序" class="headerlink" title="3.3排序"></a>3.3排序</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// [1, 2,3,4],默认是升序</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">// [4,3,2,1] 降序</span></span><br></pre></td></tr></table></figure>

<p>sort是js内置的排序方法,参数为一个函数 </p>
<p>2.开始篇 </p>
<p>冒泡排序:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.bubleSort=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr=<span class="keyword">this</span>,</span><br><span class="line">        len = arr.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> outer = len; outer &gt;= <span class="number">2</span>; outer--) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> inner = <span class="number">0</span>; inner &lt;= outer - <span class="number">1</span>; inner++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[inner] &gt; arr[inner + <span class="number">1</span>]) &#123;</span><br><span class="line">          <span class="comment">//升序</span></span><br><span class="line">          [arr[inner], arr[inner + <span class="number">1</span>]] = [arr[inner + <span class="number">1</span>], arr[inner]];</span><br><span class="line">          <span class="built_in">console</span>.log([arr[inner], arr[inner + <span class="number">1</span>]]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].bubleSort() <span class="comment">//[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<p>选择排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="built_in">Array</span>.prototype.selectSort=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> arr=<span class="keyword">this</span>,</span><br><span class="line">          len = arr.length;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = i, len = arr.length; j &lt; len; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; arr[j]) &#123;</span><br><span class="line">      [arr[i], arr[j]] = [arr[j], arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].selectSort() <span class="comment">//[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4最大值"><a href="#3-4最大值" class="headerlink" title="3.4最大值"></a>3.4最大值</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.max(...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//4</span></span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="keyword">this</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//4</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce( <span class="function">(<span class="params">prev, cur,curIndex,arr</span>)=&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">Math</span>.max(prev,cur);</span><br><span class="line">&#125;,<span class="number">0</span>) <span class="comment">//4</span></span><br></pre></td></tr></table></figure>

<p>Math.max()是Math对象内置的方法,参数是字符串; reduce是ES5的数组api,参数有函数和默认初始值; 函数有四个参数,pre(上一次的返回值),cur(当前值),curIndex(当前值索引),arr(当前数组)</p>
<p>2.开始篇 </p>
<p>先排序再取值</p>
<h3 id="3-5求和"><a href="#3-5求和" class="headerlink" title="3.5求和"></a>3.5求和</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce(<span class="function"><span class="keyword">function</span> (<span class="params">prev, cur</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> prev + cur;</span><br><span class="line"> &#125;,<span class="number">0</span>) <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = arr.length;</span><br><span class="line">  <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (len == <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>] + sum(arr.slice(<span class="number">1</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">sum([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]) <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p>利用slice截取改变数组,再利用递归求和</p>
<h3 id="3-6合并"><a href="#3-6合并" class="headerlink" title="3.6合并"></a>3.6合并</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].concat([<span class="number">5</span>,<span class="number">6</span>]) <span class="comment">//[1,2,3,4,5,6]</span></span><br><span class="line">[...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],...[<span class="number">4</span>,<span class="number">5</span>]] <span class="comment">//[1,2,3,4,5,6]</span></span><br><span class="line"><span class="keyword">let</span> arrA = [<span class="number">1</span>, <span class="number">2</span>], arrB = [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arrA, arrB))<span class="comment">//arrA值为[1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">  [<span class="number">5</span>,<span class="number">6</span>].map(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">   arr.push(item)</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="comment">//arr值为[1,2,3,4,5,6],注意不能直接return出来,return后只会返回[5,6]</span></span><br></pre></td></tr></table></figure>

<h3 id="3-7判断是否包含值"><a href="#3-7判断是否包含值" class="headerlink" title="3.7判断是否包含值"></a>3.7判断是否包含值</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].includes(<span class="number">4</span>) <span class="comment">//false</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].indexOf(<span class="number">4</span>) <span class="comment">//-1 如果存在换回索引</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].find(<span class="function">(<span class="params">item</span>)=&gt;</span>item===<span class="number">3</span>)) <span class="comment">//3 如果数组中无值返回undefined</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].findIndex(<span class="function">(<span class="params">item</span>)=&gt;</span>item===<span class="number">3</span>)) <span class="comment">//2 如果数组中无值返回-1</span></span><br></pre></td></tr></table></figure>

<p>includes(),find(),findIndex()是ES6的api</p>
<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].some(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item===<span class="number">3</span></span><br><span class="line">&#125;) <span class="comment">//true 如果不包含返回false</span></span><br></pre></td></tr></table></figure>

<h3 id="3-8类数组转化"><a href="#3-8类数组转化" class="headerlink" title="3.8类数组转化"></a>3.8类数组转化</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>) <span class="comment">//arguments是类数组(伪数组)</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>)</span><br><span class="line"><span class="built_in">Array</span>.from(<span class="built_in">arguments</span>)</span><br><span class="line">[...arguments]</span><br></pre></td></tr></table></figure>

<p>类数组:表示有length属性,但是不具备数组的方法<br> call,apply:是改变slice里面的this指向arguments,所以arguments也可调用数组的方法<br> Array.from是将类似数组或可迭代对象创建为数组<br> <code>...</code>是将类数组扩展为字符串,再定义为数组</p>
<p>2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.slice = <span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;  </span><br><span class="line">      <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>();  </span><br><span class="line">      start = start || <span class="number">0</span>;  </span><br><span class="line">      end = end || <span class="keyword">this</span>.length; <span class="comment">//this指向调用的对象，当用了call后，能够改变this的指向，也就是指向传进来的对象，这是关键  </span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> i = start; i &lt; end; i++)&#123;  </span><br><span class="line">           result.push(<span class="keyword">this</span>[i]);  </span><br><span class="line">      &#125;  </span><br><span class="line">      <span class="keyword">return</span> result;  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-9每一项设置值"><a href="#3-9每一项设置值" class="headerlink" title="3.9每一项设置值"></a>3.9每一项设置值</h3><p>1.终极篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].fill(<span class="literal">false</span>) <span class="comment">//[false,false,false]</span></span><br></pre></td></tr></table></figure>

<p>fill是ES6的方法 2.开始篇</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">()</span> =&gt;</span> <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-10每一项是否满足"><a href="#3-10每一项是否满足" class="headerlink" title="3.10每一项是否满足"></a>3.10每一项是否满足</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].every(<span class="function"><span class="params">item</span>=&gt;</span>&#123;<span class="keyword">return</span> item&gt;<span class="number">2</span>&#125;) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>every是ES5的api,每一项满足返回 true</p>
<h3 id="3-11有一项满足"><a href="#3-11有一项满足" class="headerlink" title="3.11有一项满足"></a>3.11有一项满足</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].some(<span class="function"><span class="params">item</span>=&gt;</span>&#123;<span class="keyword">return</span> item&gt;<span class="number">2</span>&#125;) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>some是ES5的api,有一项满足返回 true</p>
<h3 id="3-12-过滤数组"><a href="#3-12-过滤数组" class="headerlink" title="3.12.过滤数组"></a>3.12.过滤数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].filter(<span class="function"><span class="params">item</span>=&gt;</span>&#123;<span class="keyword">return</span> item&gt;<span class="number">2</span>&#125;) <span class="comment">//[3]</span></span><br></pre></td></tr></table></figure>

<h3 id="3-13对象和数组转化"><a href="#3-13对象和数组转化" class="headerlink" title="3.13对象和数组转化"></a>3.13对象和数组转化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(&#123;<span class="attr">name</span>:<span class="string">'张三'</span>,<span class="attr">age</span>:<span class="number">14</span>&#125;) <span class="comment">//['name','age']</span></span><br><span class="line"><span class="built_in">Object</span>.values(&#123;<span class="attr">name</span>:<span class="string">'张三'</span>,<span class="attr">age</span>:<span class="number">14</span>&#125;) <span class="comment">//['张三',14]</span></span><br><span class="line"><span class="built_in">Object</span>.entries(&#123;<span class="attr">name</span>:<span class="string">'张三'</span>,<span class="attr">age</span>:<span class="number">14</span>&#125;) <span class="comment">//[[name,'张三'],[age,14]]</span></span><br><span class="line"><span class="built_in">Object</span>.fromEntries([name,<span class="string">'张三'</span>],[age,<span class="number">14</span>]) <span class="comment">//ES10的api,Chrome不支持 , firebox输出&#123;name:'张三',age:14&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-14-对象数组"><a href="#3-14-对象数组" class="headerlink" title="3.14 对象数组"></a>3.14 对象数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">count</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">count</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">count</span>:<span class="number">3</span>&#125;].reduce(<span class="function">(<span class="params">p, e</span>)=&gt;</span>p+(e.count), <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h2 id="4-数据结构篇"><a href="#4-数据结构篇" class="headerlink" title="4.数据结构篇"></a>4.数据结构篇</h2><blockquote>
<p>数据结构是计算机存储、组织数据的方式,算法是系统描述解决问题的策略。了解基本的数据结构和算法可以提高代码的性能和质量。<br>也是程序猿进阶的一个重要技能。<br>手撸代码实现栈,队列,链表,字典,二叉树,动态规划和贪心算法</p>
</blockquote>
<h3 id="4-1-栈"><a href="#4-1-栈" class="headerlink" title="4.1 栈"></a>4.1 栈</h3><p>栈的特点：先进后出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">      <span class="keyword">this</span>.items = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 入栈</span></span><br><span class="line">    push(element) &#123;</span><br><span class="line">      <span class="keyword">this</span>.items.push(element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 出栈</span></span><br><span class="line">    pop() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.items.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 末位</span></span><br><span class="line">    <span class="keyword">get</span> peek() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.items.length - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否为空栈</span></span><br><span class="line">    <span class="keyword">get</span> isEmpty() &#123;</span><br><span class="line">      <span class="keyword">return</span> !<span class="keyword">this</span>.items.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 长度</span></span><br><span class="line">    <span class="keyword">get</span> size() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.items.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清空栈</span></span><br><span class="line">    clear() &#123;</span><br><span class="line">      <span class="keyword">this</span>.items = [];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 实例化一个栈</span></span><br><span class="line">  <span class="keyword">const</span> stack = <span class="keyword">new</span> Stack();</span><br><span class="line">  <span class="built_in">console</span>.log(stack.isEmpty); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加元素</span></span><br><span class="line">  stack.push(<span class="number">5</span>);</span><br><span class="line">  stack.push(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取属性再添加</span></span><br><span class="line">  <span class="built_in">console</span>.log(stack.peek); <span class="comment">// 8</span></span><br><span class="line">  stack.push(<span class="number">11</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(stack.size); <span class="comment">// 3</span></span><br><span class="line">  <span class="built_in">console</span>.log(stack.isEmpty); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-队列"><a href="#4-2-队列" class="headerlink" title="4.2 队列"></a>4.2 队列</h3><p>队列：先进先出 class Queue { constructor(items) { this.items = items || []; }</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">  enqueue(element) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items.push(element);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  dequeue() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.shift();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  front() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  clear() &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> isEmpty() &#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="keyword">this</span>.items.length;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  print() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.items.toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queue = <span class="keyword">new</span> Queue();</span><br><span class="line"><span class="built_in">console</span>.log(queue.isEmpty); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">queue.enqueue(<span class="string">"John"</span>);</span><br><span class="line">queue.enqueue(<span class="string">"Jack"</span>);</span><br><span class="line">queue.enqueue(<span class="string">"Camila"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(queue.size); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(queue.isEmpty); <span class="comment">// false</span></span><br><span class="line">queue.dequeue();</span><br><span class="line">queue.dequeue();</span><br></pre></td></tr></table></figure>

<h3 id="4-3-链表"><a href="#4-3-链表" class="headerlink" title="4.3 链表"></a>4.3 链表</h3><p>链表:<br>存贮有序元素的集合;<br>但是不同于数组,每个元素是一个存贮元素本身的节点和指向下一个元素引用组成<br>要想访问链表中间的元素,需要从起点开始遍历找到所需元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(element) &#123;</span><br><span class="line">      <span class="keyword">this</span>.element = element;</span><br><span class="line">      <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 链表</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">      <span class="keyword">this</span>.head = <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">this</span>.length = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 追加元素</span></span><br><span class="line">    append(element) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = <span class="keyword">new</span> Node(element);</span><br><span class="line">      <span class="keyword">let</span> current = <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.head === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.head = node;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        current = <span class="keyword">this</span>.head;</span><br><span class="line">        <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">          current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line">        current.next = node;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.length++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 任意位置插入元素</span></span><br><span class="line">    insert(position, element) &#123;</span><br><span class="line">      <span class="keyword">if</span> (position &gt;= <span class="number">0</span> &amp;&amp; position &lt;= <span class="keyword">this</span>.length) &#123;</span><br><span class="line">        <span class="keyword">const</span> node = <span class="keyword">new</span> Node(element);</span><br><span class="line">        <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line">        <span class="keyword">let</span> previous = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (position === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.head = node;</span><br><span class="line">          node.next = current;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">while</span> (index++ &lt; position) &#123;</span><br><span class="line">            previous = current;</span><br><span class="line">            current = current.next;</span><br><span class="line">          &#125;</span><br><span class="line">          node.next = current;</span><br><span class="line">          previous.next = node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.length++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 移除指定位置元素</span></span><br><span class="line">    removeAt(position) &#123;</span><br><span class="line">      <span class="comment">// 检查越界值</span></span><br><span class="line">      <span class="keyword">if</span> (position &gt; <span class="number">-1</span> &amp;&amp; position &lt; length) &#123;</span><br><span class="line">        <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line">        <span class="keyword">let</span> previous = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (position === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.head = current.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">while</span> (index++ &lt; position) &#123;</span><br><span class="line">            previous = current;</span><br><span class="line">            current = current.next;</span><br><span class="line">          &#125;</span><br><span class="line">          previous.next = current.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.length--;</span><br><span class="line">        <span class="keyword">return</span> current.element;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 寻找元素下标</span></span><br><span class="line">    findIndex(element) &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line">      <span class="keyword">let</span> index = <span class="number">-1</span>;</span><br><span class="line">      <span class="keyword">while</span> (current) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element === current.element) &#123;</span><br><span class="line">          <span class="keyword">return</span> index + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">        current = current.next;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除指定文档</span></span><br><span class="line">    remove(element) &#123;</span><br><span class="line">      <span class="keyword">const</span> index = <span class="keyword">this</span>.findIndex(element);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.removeAt(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    isEmpty() &#123;</span><br><span class="line">      <span class="keyword">return</span> !<span class="keyword">this</span>.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    size() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 转为字符串</span></span><br><span class="line">    toString() &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line">      <span class="keyword">let</span> string = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">while</span> (current) &#123;</span><br><span class="line">        string += <span class="string">` <span class="subst">$&#123;current.element&#125;</span>`</span>;</span><br><span class="line">        current = current.next;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> string;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> linkedList = <span class="keyword">new</span> LinkedList();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(linkedList);</span><br><span class="line">  linkedList.append(<span class="number">2</span>);</span><br><span class="line">  linkedList.append(<span class="number">6</span>);</span><br><span class="line">  linkedList.append(<span class="number">24</span>);</span><br><span class="line">  linkedList.append(<span class="number">152</span>);</span><br><span class="line"></span><br><span class="line">  linkedList.insert(<span class="number">3</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(linkedList);</span><br><span class="line">  <span class="built_in">console</span>.log(linkedList.findIndex(<span class="number">24</span>));</span><br></pre></td></tr></table></figure>

<h3 id="4-4-字典"><a href="#4-4-字典" class="headerlink" title="4.4 字典"></a>4.4 字典</h3><p>字典：类似对象，以key，value存贮值 class Dictionary { constructor() { this.items = {}; }</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">set</span>(key, value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items[key] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span>(key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  remove(key) &#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.items[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> keys() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.items);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> values() &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">  也可以使用ES7中的values方法</span></span><br><span class="line"><span class="comment">  return Object.values(this.items)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在这里我们通过循环生成一个数组并输出</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.items).reduce(<span class="function">(<span class="params">r, c, i</span>) =&gt;</span> &#123;</span><br><span class="line">      r.push(<span class="keyword">this</span>.items[c]);</span><br><span class="line">      <span class="keyword">return</span> r;</span><br><span class="line">    &#125;, []);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> dictionary = <span class="keyword">new</span> Dictionary();</span><br><span class="line">dictionary.set(<span class="string">"Gandalf"</span>, <span class="string">"gandalf@email.com"</span>);</span><br><span class="line">dictionary.set(<span class="string">"John"</span>, <span class="string">"johnsnow@email.com"</span>);</span><br><span class="line">dictionary.set(<span class="string">"Tyrion"</span>, <span class="string">"tyrion@email.com"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dictionary);</span><br><span class="line"><span class="built_in">console</span>.log(dictionary.keys);</span><br><span class="line"><span class="built_in">console</span>.log(dictionary.values);</span><br><span class="line"><span class="built_in">console</span>.log(dictionary.items);</span><br></pre></td></tr></table></figure>

<h3 id="4-5-二叉树"><a href="#4-5-二叉树" class="headerlink" title="4.5 二叉树"></a>4.5 二叉树</h3><p>特点：每个节点最多有两个子树的树结构 </p>
<p>class NodeTree { constructor(key) { this.key = key; this.left = null; this.right = null; } }</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinarySearchTree</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.root = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert(key) &#123;</span><br><span class="line">    <span class="keyword">const</span> newNode = <span class="keyword">new</span> NodeTree(key);</span><br><span class="line">    <span class="keyword">const</span> insertNode = <span class="function">(<span class="params">node, newNode</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (newNode.key &lt; node.key) &#123;</span><br><span class="line">        <span class="keyword">if</span> (node.left === <span class="literal">null</span>) &#123;</span><br><span class="line">          node.left = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          insertNode(node.left, newNode);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node.right === <span class="literal">null</span>) &#123;</span><br><span class="line">          node.right = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          insertNode(node.right, newNode);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.root) &#123;</span><br><span class="line">      <span class="keyword">this</span>.root = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      insertNode(<span class="keyword">this</span>.root, newNode);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//访问树节点的三种方式:中序,先序,后序</span></span><br><span class="line">  inOrderTraverse(callback) &#123;</span><br><span class="line">    <span class="keyword">const</span> inOrderTraverseNode = <span class="function">(<span class="params">node, callback</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">        inOrderTraverseNode(node.left, callback);</span><br><span class="line">        callback(node.key);</span><br><span class="line">        inOrderTraverseNode(node.right, callback);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    inOrderTraverseNode(<span class="keyword">this</span>.root, callback);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  min(node) &#123;</span><br><span class="line">    <span class="keyword">const</span> minNode = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> node ? (node.left ? minNode(node.left) : node) : <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> minNode(node || <span class="keyword">this</span>.root);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  max(node) &#123;</span><br><span class="line">    <span class="keyword">const</span> maxNode = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> node ? (node.right ? maxNode(node.right) : node) : <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> maxNode(node || <span class="keyword">this</span>.root);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tree = <span class="keyword">new</span> BinarySearchTree();</span><br><span class="line">tree.insert(<span class="number">11</span>);</span><br><span class="line">tree.insert(<span class="number">7</span>);</span><br><span class="line">tree.insert(<span class="number">5</span>);</span><br><span class="line">tree.insert(<span class="number">3</span>);</span><br><span class="line">tree.insert(<span class="number">9</span>);</span><br><span class="line">tree.insert(<span class="number">8</span>);</span><br><span class="line">tree.insert(<span class="number">10</span>);</span><br><span class="line">tree.insert(<span class="number">13</span>);</span><br><span class="line">tree.insert(<span class="number">12</span>);</span><br><span class="line">tree.insert(<span class="number">14</span>);</span><br><span class="line">tree.inOrderTraverse(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(tree.min());</span><br><span class="line"><span class="built_in">console</span>.log(tree.max());</span><br></pre></td></tr></table></figure>

<h2 id="5-算法篇"><a href="#5-算法篇" class="headerlink" title="5.算法篇"></a>5.算法篇</h2><h3 id="5-1-冒泡算法"><a href="#5-1-冒泡算法" class="headerlink" title="5.1 冒泡算法"></a>5.1 冒泡算法</h3><p>冒泡排序，选择排序，插入排序，此处不做赘述.</p>
<h3 id="5-2-斐波那契"><a href="#5-2-斐波那契" class="headerlink" title="5.2 斐波那契"></a>5.2 斐波那契</h3><p>特点：第三项等于前面两项之和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span>(<span class="params">num</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (num === <span class="number">1</span> || num === <span class="number">2</span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fibonacci(num - <span class="number">1</span>) + fibonacci(num - <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-动态规划"><a href="#5-3-动态规划" class="headerlink" title="5.3 动态规划"></a>5.3 动态规划</h3><p>特点：通过全局规划,将大问题分割成小问题来取最优解<br>案例：最少硬币找零<br>美国有以下面额(硬币）：d1=1, d2=5, d3=10, d4=25<br>如果要找36美分的零钱，我们可以用1个25美分、1个10美分和1个便士（ 1美分)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinCoinChange</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(coins) &#123;</span><br><span class="line">    <span class="keyword">this</span>.coins = coins</span><br><span class="line">    <span class="keyword">this</span>.cache = &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">makeChange(amount) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!amount) <span class="keyword">return</span> []</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.cache[amount]) <span class="keyword">return</span> <span class="keyword">this</span>.cache[amount]</span><br><span class="line">    <span class="keyword">let</span> min = [], newMin, newAmount</span><br><span class="line">    <span class="keyword">this</span>.coins.forEach(<span class="function"><span class="params">coin</span> =&gt;</span> &#123;</span><br><span class="line">        newAmount = amount - coin</span><br><span class="line">        <span class="keyword">if</span> (newAmount &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            newMin = <span class="keyword">this</span>.makeChange(newAmount)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newAmount &gt;= <span class="number">0</span> &amp;&amp; </span><br><span class="line">             (newMin.length &lt; min.length - <span class="number">1</span> || !min.length) &amp;&amp; </span><br><span class="line">             (newMin.length || !newAmount)) &#123;</span><br><span class="line">            min = [coin].concat(newMin)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span>.cache[amount] = min)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rninCoinChange = <span class="keyword">new</span> MinCoinChange([<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">25</span>])</span><br><span class="line"><span class="built_in">console</span>.log(rninCoinChange.makeChange(<span class="number">36</span>))</span><br><span class="line"><span class="comment">// [1, 10, 25]</span></span><br><span class="line"><span class="keyword">const</span> minCoinChange2 = <span class="keyword">new</span> MinCoinChange([<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">console</span>.log(minCoinChange2.makeChange(<span class="number">6</span>))</span><br><span class="line"><span class="comment">// [3, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="5-4-贪心算法"><a href="#5-4-贪心算法" class="headerlink" title="5.4 贪心算法"></a>5.4 贪心算法</h3><p>特点：通过最优解来解决问题 用贪心算法来解决2.3中的案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MinCoinChange</span>(<span class="params">coins</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> coins = coins;</span><br><span class="line"><span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line"><span class="keyword">this</span>.makeChange = <span class="function"><span class="keyword">function</span>(<span class="params">amount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> change = [],</span><br><span class="line">    total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = coins.length; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">var</span> coin = coins[i];</span><br><span class="line">    <span class="keyword">while</span> (total + coin &lt;= amount) &#123;</span><br><span class="line">      change.push(coin);</span><br><span class="line">      total += coin;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> change;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> minCoinChange = <span class="keyword">new</span> MinCoinChange([<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">25</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(minCoinChange.makeChange(<span class="number">36</span>));</span><br><span class="line"><span class="built_in">console</span>.log(minCoinChange.makeChange(<span class="number">34</span>));</span><br><span class="line"><span class="built_in">console</span>.log(minCoinChange.makeChange(<span class="number">6</span>));</span><br></pre></td></tr></table></figure>

<h2 id="6-设计模式"><a href="#6-设计模式" class="headerlink" title="6 设计模式"></a>6 设计模式</h2><blockquote>
<p>设计模式如果应用到项目中，可以实现代码的复用和解耦，提高代码质量。 本文主要介绍14种设计模式 写UI组件,封装框架必备</p>
</blockquote>
<h3 id="6-1-简单工厂模式"><a href="#6-1-简单工厂模式" class="headerlink" title="6.1 简单工厂模式"></a>6.1 简单工厂模式</h3><p>1.定义：又叫静态工厂方法，就是创建对象，并赋予属性和方法<br>2.应用：抽取类相同的属性和方法封装到对象上<br>3.代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">let</span> UserFactory = <span class="function"><span class="keyword">function</span> (<span class="params">role</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">opt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = opt.name;</span><br><span class="line">    <span class="keyword">this</span>.viewPage = opt.viewPage;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">switch</span> (role) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'superAdmin'</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> User(superAdmin);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'admin'</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> User(admin);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'user'</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> User(user);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'参数错误, 可选参数:superAdmin、admin、user'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="keyword">let</span> superAdmin = UserFactory(<span class="string">'superAdmin'</span>);</span><br><span class="line"><span class="keyword">let</span> admin = UserFactory(<span class="string">'admin'</span>) </span><br><span class="line"><span class="keyword">let</span> normalUser = UserFactory(<span class="string">'user'</span>)</span><br><span class="line"><span class="comment">//最后得到角色,可以调用</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2工厂方法模式"><a href="#6-2工厂方法模式" class="headerlink" title="6.2工厂方法模式"></a>6.2工厂方法模式</h3><p>1.定义：对产品类的抽象使其创建业务主要负责用于创建多类产品的实例<br>2.应用:创建实例<br>3.代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Factory=<span class="function"><span class="keyword">function</span>(<span class="params">type,content</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span> <span class="keyword">instanceof</span> Factory)&#123;</span><br><span class="line">    <span class="keyword">var</span> s=<span class="keyword">new</span> <span class="keyword">this</span>[type](content);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Factory(type,content);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//工厂原型中设置创建类型数据对象的属性</span></span><br><span class="line">Factory.prototype=&#123;</span><br><span class="line">  Java:<span class="function"><span class="keyword">function</span>(<span class="params">content</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Java值为'</span>,content);</span><br><span class="line">  &#125;,</span><br><span class="line">  PHP:<span class="function"><span class="keyword">function</span>(<span class="params">content</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'PHP值为'</span>,content);</span><br><span class="line">  &#125;,</span><br><span class="line">  Python:<span class="function"><span class="keyword">function</span>(<span class="params">content</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Python值为'</span>,content);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试用例</span></span><br><span class="line">Factory(<span class="string">'Python'</span>,<span class="string">'我是Python'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-3原型模式"><a href="#6-3原型模式" class="headerlink" title="6.3原型模式"></a>6.3原型模式</h3><p>1.定义:设置函数的原型属性 </p>
<p>2.应用:实现继承 </p>
<p>3.代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Animal'</span>;</span><br><span class="line">  <span class="comment">// 实例方法</span></span><br><span class="line">  <span class="keyword">this</span>.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'正在睡觉！'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原型方法</span></span><br><span class="line">Animal.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'正在吃：'</span> + food);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.name = <span class="string">'cat'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&amp;emsp;Test Code</span></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);<span class="comment">//cat</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.eat(<span class="string">'fish'</span>));<span class="comment">//cat正在吃：fish  undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep());<span class="comment">//cat正在睡觉！ undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">//true </span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4单例模式"><a href="#6-4单例模式" class="headerlink" title="6.4单例模式"></a>6.4单例模式</h3><p>1.定义:只允许被实例化依次的类  </p>
<p>2.应用:提供一个命名空间 </p>
<p>3.代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> singleCase = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;;</span><br><span class="line">singleCase.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取实例对象</span></span><br><span class="line"><span class="keyword">let</span> getInstance = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> instance = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!instance) &#123;<span class="comment">//相当于一个一次性阀门,只能实例化一次</span></span><br><span class="line">            instance = <span class="keyword">new</span> singleCase(name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// 测试单体模式的实例,所以one===two</span></span><br><span class="line"><span class="keyword">let</span> one = getInstance(<span class="string">"one"</span>);</span><br><span class="line"><span class="keyword">let</span> two = getInstance(<span class="string">"two"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-5外观模式"><a href="#6-5外观模式" class="headerlink" title="6.5外观模式"></a>6.5外观模式</h3><p>1.定义:为子系统中的一组接口提供一个一致的界面</p>
<p> 2.应用:简化复杂接口 </p>
<p>3.代码: <a href="https://www.cnblogs.com/linda586586/p/4237093.html" target="_blank" rel="noopener">外观模式</a></p>
<h3 id="6-6适配器模式"><a href="#6-6适配器模式" class="headerlink" title="6.6适配器模式"></a>6.6适配器模式</h3><p>1.定义:将一个接口转换成客户端需要的接口而不需要去修改客户端代码，使得不兼容的代码可以一起工作 </p>
<p>2.应用:适配函数参数 </p>
<p>3.代码: <a href="https://www.cnblogs.com/TomXu/archive/2012/04/11/2435452.html" target="_blank" rel="noopener">适配器模式</a></p>
<h3 id="6-7装饰者模式"><a href="#6-7装饰者模式" class="headerlink" title="6.7装饰者模式"></a>6.7装饰者模式</h3><p>1.定义:不改变原对象的基础上,给对象添加属性或方法 </p>
<p>2.代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decorator=<span class="function"><span class="keyword">function</span>(<span class="params">input,fn</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//获取事件源</span></span><br><span class="line">  <span class="keyword">let</span> input=<span class="built_in">document</span>.getElementById(input);</span><br><span class="line">  <span class="comment">//若事件源已经绑定事件</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> input.onclick==<span class="string">'function'</span>)&#123;</span><br><span class="line">    <span class="comment">//缓存事件源原有的回调函数</span></span><br><span class="line">    <span class="keyword">let</span> oldClickFn=input.onclick;</span><br><span class="line">    <span class="comment">//为事件源定义新事件</span></span><br><span class="line">    input.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//事件源原有回调函数</span></span><br><span class="line">      oldClickFn();</span><br><span class="line">      <span class="comment">//执行事件源新增回调函数</span></span><br><span class="line">      fn();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//未绑定绑定</span></span><br><span class="line">    input.onclick=fn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试用例</span></span><br><span class="line">decorator(<span class="string">'textInp'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'文本框执行啦'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">decorator(<span class="string">'btn'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'按钮执行啦'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-8桥接模式"><a href="#6-8桥接模式" class="headerlink" title="6.8桥接模式"></a>6.8桥接模式</h3><p>1.定义:将抽象部分与它的实现部分分离，使它们都可以独立地变化 </p>
<p>2.代码 <a href="https://www.cnblogs.com/TomXu/archive/2012/04/19/2437321.html" target="_blank" rel="noopener">桥接模式</a></p>
<h3 id="6-9模块方法模式"><a href="#6-9模块方法模式" class="headerlink" title="6.9模块方法模式"></a>6.9模块方法模式</h3><p>1.定义:定义一个模板,供以后传不同参数调用 </p>
<p>2.代码: <a href="https://blog.csdn.net/namechenfl/article/details/80685741" target="_blank" rel="noopener">模块方法模式</a></p>
<h3 id="6-10-观察者模式"><a href="#6-10-观察者模式" class="headerlink" title="6.10.观察者模式"></a>6.10.观察者模式</h3><p>1.作用:解决类与对象,对象与对象之间的耦合 </p>
<p>2.代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Observer=</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> _message=&#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//注册接口,</span></span><br><span class="line">        <span class="comment">//1.作用:将订阅者注册的消息推入到消息队列</span></span><br><span class="line">        <span class="comment">//2.参数:所以要传两个参数,消息类型和处理动作,</span></span><br><span class="line">        <span class="comment">//3.消息不存在重新创建,存在将消息推入到执行方法</span></span><br><span class="line">        </span><br><span class="line">      regist:<span class="function"><span class="keyword">function</span>(<span class="params">type,fn</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//如果消息不存在,创建</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> _message[type]===<span class="string">'undefined'</span>)&#123;</span><br><span class="line">          _message[type]=[fn];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="comment">//将消息推入到消息的执行动作</span></span><br><span class="line">          _message[type].push(fn);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//发布信息接口</span></span><br><span class="line">        <span class="comment">//1.作用:观察这发布消息将所有订阅的消息一次执行</span></span><br><span class="line">        <span class="comment">//2.参数:消息类型和动作执行传递参数</span></span><br><span class="line">        <span class="comment">//3.消息类型参数必须校验</span></span><br><span class="line">      fire:<span class="function"><span class="keyword">function</span>(<span class="params">type,args</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//如果消息没有注册,则返回</span></span><br><span class="line">        <span class="keyword">if</span>(!_message[type]) <span class="keyword">return</span>;</span><br><span class="line">          <span class="comment">//定义消息信息</span></span><br><span class="line">          <span class="keyword">var</span> events=&#123;</span><br><span class="line">            type:type, <span class="comment">//消息类型</span></span><br><span class="line">            args:args||&#123;&#125; <span class="comment">//消息携带数据</span></span><br><span class="line">          &#125;,</span><br><span class="line">          i=<span class="number">0</span>,</span><br><span class="line">          len=_message[type].length;</span><br><span class="line">          <span class="comment">//遍历消息</span></span><br><span class="line">          <span class="keyword">for</span>(;i&lt;len;i++)&#123;</span><br><span class="line">            <span class="comment">//依次执行注册消息</span></span><br><span class="line">            _message[type][i].call(<span class="keyword">this</span>,events);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//移除信息接口</span></span><br><span class="line">        <span class="comment">//1.作用:将订阅者注销消息从消息队列清除</span></span><br><span class="line">        <span class="comment">//2.参数:消息类型和执行的动作</span></span><br><span class="line">        <span class="comment">//3.消息参数校验</span></span><br><span class="line">      remove:<span class="function"><span class="keyword">function</span>(<span class="params">type,fn</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//如果消息动作队列存在</span></span><br><span class="line">        <span class="keyword">if</span>(_message[type] <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">          <span class="comment">//从最后一个消息动作序遍历</span></span><br><span class="line">          <span class="keyword">var</span> i=_message[type].length<span class="number">-1</span>;</span><br><span class="line">          <span class="keyword">for</span>(;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="comment">//如果存在该动作在消息队列中移除</span></span><br><span class="line">            _message[type][i]===fn&amp;&amp;_message[type].splice(i,<span class="number">1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试用例</span></span><br><span class="line">  <span class="comment">//1.订阅消息</span></span><br><span class="line">  Observer.regist(<span class="string">'test'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.type,e.args.msg);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.发布消息</span></span><br><span class="line">  Observer.fire(<span class="string">'test'</span>,&#123;<span class="attr">msg</span>:<span class="string">'传递参数1'</span>&#125;);</span><br><span class="line">  Observer.fire(<span class="string">'test'</span>,&#123;<span class="attr">msg</span>:<span class="string">'传递参数2'</span>&#125;);</span><br><span class="line">  Observer.fire(<span class="string">'test'</span>,&#123;<span class="attr">msg</span>:<span class="string">'传递参数3'</span>&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="6-11状态模式"><a href="#6-11状态模式" class="headerlink" title="6.11状态模式"></a>6.11状态模式</h3><p>1.定义:一个对象状态改变会导致行为变化 </p>
<p>2.作用:解决复杂的if判断 </p>
<p>3.代码 <a href="https://www.jianshu.com/p/ec9b9a1cd148" target="_blank" rel="noopener">状态模式</a></p>
<h2 id="6-12策略模式"><a href="#6-12策略模式" class="headerlink" title="6.12策略模式"></a>6.12策略模式</h2><p>1.定义:定义了一系列家族算法，并对每一种算法单独封装起来，让算法之间可以相互替换，独立于使用算法的客户</p>
<p> 2.代码 <a href="https://www.cnblogs.com/Medeor/p/5001841.html" target="_blank" rel="noopener">策略模式</a></p>
<h2 id="6-13-访问模式"><a href="#6-13-访问模式" class="headerlink" title="6.13.访问模式"></a>6.13.访问模式</h2><p>1.定义:通过继承封装一些该数据类型不具备的属性, </p>
<p>2.作用:让对象具备数组的操作方法 </p>
<p>3.代码: <a href="https://blog.csdn.net/itpinpai/article/details/51644922" target="_blank" rel="noopener">访问者模式</a></p>
<h3 id="6-14中介者模式"><a href="#6-14中介者模式" class="headerlink" title="6.14中介者模式"></a>6.14中介者模式</h3><p>1.定义:设置一个中间层,处理对象之间的交互</p>
<p> 2.代码: <a href="https://www.cnblogs.com/xiaohuochai/p/8042198.html" target="_blank" rel="noopener">中介者模式</a></p>
<h2 id="7-HTTP"><a href="#7-HTTP" class="headerlink" title="7. HTTP"></a>7. HTTP</h2><h3 id="7-1-什么是-HTTP"><a href="#7-1-什么是-HTTP" class="headerlink" title="7.1 什么是 HTTP"></a>7.1 什么是 HTTP</h3><p>HTTP 是一个连接客户端，网关和服务器的一个协议。</p>
<h3 id="7-2-特点"><a href="#7-2-特点" class="headerlink" title="7.2 特点"></a>7.2 特点</h3><p>支持客户/服务器模式：可以连接客户端和服务端；<br>简单快速：请求只需传送请求方法，路径和请求主体；<br>灵活：传输数据类型灵活；<br>无连接：请求结束立即断开；<br>无状态：无法记住上一次请求。</p>
<h3 id="7-3-怎么解决无状态和无连接"><a href="#7-3-怎么解决无状态和无连接" class="headerlink" title="7.3 怎么解决无状态和无连接"></a>7.3 怎么解决无状态和无连接</h3><p>无状态：HTTP 协议本身无法解决这个状态，只有通过 cookie 和 session 将状态做贮存，常见的场景是登录状态保持；</p>
<p>无连接：可以通过自身属性 Keep-Alive。</p>
<h3 id="7-4-请求过程"><a href="#7-4-请求过程" class="headerlink" title="7.4 请求过程"></a>7.4 请求过程</h3><p>HTTP(S) 请求地址 → DNS 解析 → 三次握手 → 发送请求 → 四次挥手</p>
<p>三次握手过程图片来源 CSDN）</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.jpg" alt></p>
<p>四次挥手过（图片来源 CSDN）</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.jpg" alt></p>
<h3 id="7-5-HTTP-0-9-3-0-对比"><a href="#7-5-HTTP-0-9-3-0-对比" class="headerlink" title="7.5 HTTP 0.9~3.0 对比"></a>7.5 HTTP 0.9~3.0 对比</h3><h4 id="7-5-1-HTTP-0-9"><a href="#7-5-1-HTTP-0-9" class="headerlink" title="7.5.1 HTTP 0.9"></a>7.5.1 HTTP 0.9</h4><p>只允许客户端发送 GET 这一种请求；<br>且不支持请求头，协议只支持纯文本；<br>无状态性，每个访问独立处理，完成断开；<br>无状态码。</p>
<h4 id="7-5-2-HTTP-1-0"><a href="#7-5-2-HTTP-1-0" class="headerlink" title="7.5.2 HTTP 1.0"></a>7.5.2 HTTP 1.0</h4><p>有身份认证，三次握手； 请求与响应支持头域； 请求头内容；</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Accept</td>
<td>可接受的 MIME 类型</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>数据可解码的格式</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>可接受语言</td>
</tr>
<tr>
<td>Connection</td>
<td>值 keep-alive 是长连接</td>
</tr>
<tr>
<td>Host</td>
<td>主机和端口</td>
</tr>
<tr>
<td>Pragma</td>
<td>是否缓存,指定 no-cache 返回刷新</td>
</tr>
<tr>
<td>Referer</td>
<td>页面路由</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>值为时间</td>
</tr>
</tbody></table>
<p>响应头内容；</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Connection</td>
<td>值 keep-alive 是长连接</td>
</tr>
<tr>
<td>Content-Type</td>
<td>返回文档类型,常见的值有 text/plain,text/html,text/json</td>
</tr>
<tr>
<td>Date</td>
<td>消息发送的时间</td>
</tr>
<tr>
<td>Server</td>
<td>服务器名字</td>
</tr>
<tr>
<td>Last-Modified</td>
<td>值为时间,s 返回的最后修改时间</td>
</tr>
<tr>
<td>Expires</td>
<td>缓存过期时间,b 和 s 时间做对比</td>
</tr>
</tbody></table>
<p>注意</p>
<p>expires 是响应头内容，返回一个固定的时间,缺陷是时间到了服务器要重新设置;<br> 请求头中如果有 If-Modified-Since，服务器会将时间与 last-modified 对比，相同返回 304;<br> 响应对象以一个响应状态行开始;<br> 响应对象不只限于超文本;<br> 支持 GET、HEAD、POST 方法;<br> 有状态码;<br> 支持长连接（但默认还是使用短连接）、缓存机制以及身份认证。</p>
<h4 id="7-5-3-HTTP-1-1"><a href="#7-5-3-HTTP-1-1" class="headerlink" title="7.5.3 HTTP 1.1"></a>7.5.3 HTTP 1.1</h4><p>请求头增加 Cache-Control</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Cache-Control</td>
<td>在1.1 引入的方法,指定请求和响应遵循的缓存机制,值有:public(b 和 s 都缓存),private(b 缓存),no-cache(不缓存),no-store(不缓存),max-age(缓存时间,s 为单位),min-fresh(最小更新时间),max-age=3600</td>
</tr>
<tr>
<td>If-None-Match</td>
<td>上次请求响应头返回的 etag 值响应头增加 Cache-Control，表示所有的缓存机制是否可以缓存及哪种类型 etag 返回的哈希值,第二次请求头携带去和服务器值对比</td>
</tr>
</tbody></table>
<p>注意</p>
<p>Cache-Control 的 max-age 返回是缓存的相对时间 Cache-Control 优先级比 expires 高 缺点：不能第一时间拿到最新修改文件</p>
<h4 id="7-5-4-HTTP-2-0"><a href="#7-5-4-HTTP-2-0" class="headerlink" title="7.5.4 HTTP 2.0"></a>7.5.4 HTTP 2.0</h4><p>采用二进制格式传输;<br>多路复用，其实就是将请求数据分成帧乱序发送到 TCP 中。TCP 只能有一个 steam，所以还是会阻塞;<br>报头压缩;<br>服务器推送主动向 B 端发送静态资源，避免往返延迟。</p>
<h4 id="7-5-5-HTTP-3-0"><a href="#7-5-5-HTTP-3-0" class="headerlink" title="7.5.5 HTTP 3.0"></a>7.5.5 HTTP 3.0</h4><p>1.是基于 QUIC 协议，基于 UDP<br> 2.特点:<br> 自定义连接机制：TCP 以 IP/端口标识,变化重新连接握手，UDP 是一 64 位 ID 标识，是无连接；<br> 自定义重传机制：TCP 使用序号和应答传输，QUIC 是使用递增序号传输； 无阻塞的多路复用：同一条 QUIC 可以创建多个 steam。</p>
<h4 id="7-5-6-HTTPS"><a href="#7-5-6-HTTPS" class="headerlink" title="7.5.6 HTTPS"></a>7.5.6 HTTPS</h4><p>1.https 是在 http 协议的基础上加了个 SSL；<br>2.主要包括：握手(凭证交换和验证)和记录协议(数据进行加密)。</p>
<h4 id="7-5-7-缓存"><a href="#7-5-7-缓存" class="headerlink" title="7.5.7 缓存"></a>7.5.7 缓存</h4><p>1.按协议分：协议层缓存和非 http 协议缓存：<br>    1.1协议层缓存：利用 http 协议头属性值设置；<br>    1.2非协议层缓存：利用 meta 标签的 http-equiv 属性值 Expires,set-cookie。</p>
<p>2.按缓存分：强缓存和协商缓存：<br>     2.1强缓存：利用 cache-control 和 expires 设置，直接返回一个过期时间，所以在缓存期间不请求，If-modify-since；<br>     2.2协商缓存：响应头返回 etag 或 last-modified 的哈希值，第二次请求头 If-none-match 或 IF-modify-since 携带上次哈希值，一致则返回 304。</p>
<p>作者：火狼1链接：<a href="https://juejin.im/post/5daeefc8e51d4524f007fb15来源：掘金著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。" target="_blank" rel="noopener">https://juejin.im/post/5daeefc8e51d4524f007fb15来源：掘金著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</a></p>
<p>3.协商缓存对比： etag 优先级高于 last-modified；<br> 4.etag 精度高，last-modified 精度是 s，1s 内 etag 修改多少次都会被记录； last-modified 性能好，etag 要得到 hash 值。</p>
<p>5.浏览器读取缓存流程： 会先判断强缓存；再判断协商缓存 etag(last-modified)是否存在；<br> 存在利用属性 If-None-match(If-Modified-since)携带值；<br> 请求服务器,服务器对比 etag(last-modified)，生效返回 304。</p>
<p>F5 刷新会忽略强缓存不会忽略协商缓存，ctrl+f5 都失效</p>
<h4 id="7-5-8-状态码"><a href="#7-5-8-状态码" class="headerlink" title="7.5.8 状态码"></a>7.5.8 状态码</h4><table>
<thead>
<tr>
<th>序列</th>
<th>详情</th>
</tr>
</thead>
<tbody><tr>
<td>1XX(通知)</td>
<td></td>
</tr>
<tr>
<td>2XX(成功)</td>
<td>200(成功)、201(服务器创建)、202(服务器接收未处理)、203(非授权信息)、204(未返回内容)、205(重置内容)、206(部分内容)</td>
</tr>
<tr>
<td>3XX(重定向)</td>
<td>301(永久移动)、302(临时移动)、303(查看其他位置)、304(未修改)、305(使用代理)、307(临时重定向)</td>
</tr>
<tr>
<td>4XX(客户端错误)</td>
<td>400(错误请求)、401(未授权)、403(禁止)、404(未找到)、405(方法禁用)、406(不接受)、407（需要代理授权）</td>
</tr>
<tr>
<td>5XX(服务器错误)</td>
<td>500(服务器异常)、501（尚未实施）、502（错误网关）、503（服务不可用）、504（网关超时）、505（HTTP 版本不受支持）</td>
</tr>
</tbody></table>
<h4 id="7-5-9-浏览器请求分析"><a href="#7-5-9-浏览器请求分析" class="headerlink" title="7.5.9 浏览器请求分析"></a>7.5.9 浏览器请求分析</h4><p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%B7%E6%B1%82%E5%88%86%E6%9E%90.jpg" alt></p>
<h4 id="7-5-10-总结"><a href="#7-5-10-总结" class="headerlink" title="7.5.10 总结"></a>7.5.10 总结</h4><p>协议</p>
<table>
<thead>
<tr>
<th>版本</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>http0.9</td>
<td>只允许客户端发送 GET 这一种请求;且不支持请求头,协议只支持纯文本;无状态性,每个访问独立处理,完成断开;无状态码</td>
</tr>
<tr>
<td>http1.0</td>
<td>解决 0.9 的缺点,增加 If-modify-since(last-modify)和 expires 缓存属性</td>
</tr>
<tr>
<td>http1.x</td>
<td>增加 cache-control 和 If-none-match(etag)缓存属性</td>
</tr>
<tr>
<td>http2.0</td>
<td>采用二进制格式传输;多路复用;报头压缩;服务器推送</td>
</tr>
<tr>
<td>http3.0</td>
<td>采用 QUIC 协议,自定义连接机制;自定义重传机制;无阻塞的多路复用</td>
</tr>
</tbody></table>
<p>缓存</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>特性</th>
</tr>
</thead>
<tbody><tr>
<td>强缓存</td>
<td>通过 If-modify-since(last-modify)、expires 和 cache-control 设置，属性值是时间，所以在时间内不用请求</td>
</tr>
<tr>
<td>协商缓存</td>
<td>通过 If-none-match(etag)设置，etag 属性是哈希值，所以要请求和服务器值对比</td>
</tr>
</tbody></table>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/26/post-1-5万字概括ES6全部特性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/26/post-1-5万字概括ES6全部特性/" class="post-title-link" itemprop="url">post-1.5万字概括ES6全部特性</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-26 21:46:36 / 修改时间：22:55:54" itemprop="dateCreated datePublished" datetime="2019-11-26T21:46:36+08:00">2019-11-26</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a><font color="#35b378">前言</font></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以下提到的《ECMAScript 6 入门》统一使用《ES6》这个名称来代替，而最新的ES6版本也是截止到当前的ES2019.</span><br></pre></td></tr></table></figure>

<p>本文的知识点完全是参考或摘录《ES6》里的语句，有部分语句为了方便理解和记忆，进行了相同意思的转义，同时对知识点进行归类划分。为了让大家能集中精力来记住这些特性，全文一句废话和题外话都没有，全部模块以笔记的形式进行书写，如果看得不是很惯建议对照《ES6》的内容来学习。</p>
<p>本文整理出来的笔记都是书中的精华内容，囊括了整个<font color="#35b378"><code>ES6体系</code></font>的所有特性，非常方便大家重新认识<font color="#35b378"><code>全部ES6特性</code></font>。半小时的阅读就可以对<font color="#35b378"><code>ES6</code></font>有一个全面的了解，可以认为是一本<font color="#35b378"><code>ES6特性小字典</code></font>，收藏后可随时查阅。</p>
<p><img src="https://raw.githubusercontent.com/niuxinyu/typoraimg/master/img/ES6%E6%A6%82%E6%8B%AC.webp" alt="ES6缩略"></p>
<h1 id="修正"><a href="#修正" class="headerlink" title="修正"></a><font color="#35b378">修正</font></h1><p><strong>ES6</strong>是<code>ECMA</code> 为 <code>JavaScript</code>制定的第6个标准版本，相关历史可查看此章节《ES6-ECMAScript6简介》。</p>
<p>标准委员会最终决定，标准在每年6月正式发布并作为当年的正式版本，接下来的时间里就在此版本的基础上进行改动，直到下一年6月草案就自然变成新一年的版本，这样一来就无需以前的版本号，只要用年份标记即可。<code>ECMAscript 2015</code>是在<code>2015年6月</code>发布ES6的第一个版本。以此类推，<code>ECMAscript 2016</code>是ES6的第二个版本、 <code>ECMAscript 2017</code>是ES6的第三个版本。<strong>ES6</strong>既是一个历史名词也是一个泛指，含义是<code>5.1版本</code>以后的<code>JavaScript下一代标准</code>，目前涵盖了<code>ES2015</code>、<code>ES2016</code>、<code>ES2017</code>、<code>ES2018</code>、<code>ES2019</code>。</p>
<p>所以有些文章上提到的<code>ES7</code>(实质上是<code>ES2016</code>)、<code>ES8</code>(实质上是<code>ES2017</code>)、<code>ES9</code>(实质上是<code>ES2018</code>)、<code>ES10</code>(实质上是<code>ES2019</code>)，实质上都是一些不规范的概念。从ES1到ES6，每个标准都是花了好几年甚至十多年才制定下来，你一个ES6到ES7，ES7到ES8，才用了一年，按照这样的定义下去，那不是很快就ES20了。用正确的概念来说ES6目前涵盖了<strong>ES2015</strong>(ES6.0)、<strong>ES2016</strong>(ES6.1)、<strong>ES2017</strong>(ES6.2)、<strong>ES2018</strong>(ES6.3)、<strong>ES2019</strong>(ES6.4)。</p>
<p>另外，ES6更新的内容主要分为以下几点</p>
<ul>
<li><strong>表达式</strong>：声明、解构赋值</li>
<li><strong>内置对象</strong>：字符串扩展、数值扩展、对象扩展、数组扩展、函数扩展、正则扩展、Symbol、Set、Map、Proxy、Reflect</li>
<li><strong>语句与运算</strong>：Class、Module、Iterator</li>
<li><strong>异步编程</strong>：Promise、Generator、Async</li>
</ul>
<h1 id="ES2015"><a href="#ES2015" class="headerlink" title="ES2015"></a><strong><font color="#35b378">ES2015</font></strong></h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a><code>声明</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>const命令</strong>：声明常量</li>
<li><input checked disabled type="checkbox"> <strong>let命令</strong>：声明变量</li>
</ul>
<blockquote>
<p>作用</p>
</blockquote>
<ul>
<li><p>作用域</p>
</li>
<li><ul>
<li><strong>全局作用域</strong></li>
<li><strong>函数作用域</strong>：<code>function() {}</code></li>
<li><strong>块级作用域</strong>：<code>{}</code></li>
</ul>
</li>
<li><p>作用范围</p>
</li>
<li><ul>
<li><code>var</code>在全局代码中执行</li>
<li><code>const</code>和<code>let</code>只能在代码块中执行</li>
</ul>
</li>
<li><p>赋值使用</p>
</li>
<li><ul>
<li><code>const</code>声明常量后必须立马赋值</li>
<li><code>let</code>声明变量后可立马赋值或使用时赋值</li>
</ul>
</li>
<li><p>声明方法：<code>var</code>、<code>const</code>、<code>let</code>、<code>function</code>、<code>class</code>、<code>import</code></p>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>不允许重复声明</li>
<li>未定义就使用会报错：<code>const</code>和<code>let</code>不存在变量提升</li>
<li>暂时性死区：只要块级作用域内存在<code>const</code>和<code>let</code>，所声明常量和变量就绑定此区域，不再受外部影响</li>
</ul>
<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a><code>解构赋值</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>字符串解构</strong>：<code>const [a, b, c, d, e] = &quot;hello&quot;</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>数值解构</strong>：<code>const { toString: s } = 123</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>布尔值解构</strong>：<code>const { toString: b } = true</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>对象解构</strong></p>
</li>
<li><ul>
<li>形式：<code>const { x, y } = { x: 1, y: 2 }</code></li>
<li>默认：<code>const { x, y = 2 } = { x: 1 }</code></li>
<li>改名：<code>const { x, y: z } = { x: 1, y: 2 }</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>数组解构</strong></p>
</li>
<li><ul>
<li>规则：数据结构具有<code>Iterator接口</code>可采用数组形式的解构赋值</li>
<li>形式：<code>const [x, y] = [1, 2]</code></li>
<li>默认：<code>const [x, y = 2] = [1]</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>函数参数解构</strong></p>
</li>
<li><ul>
<li>数组解构：<code>function Func([x = 0, y = 1]) {}</code></li>
<li>对象解构：<code>function Func({ x = 0, y = 1 } = {}) {}</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>交换变量值：<code>[x, y] = [y, x]</code></li>
<li>返回函数多个值：<code>const [x, y, z] = Func()</code></li>
<li>定义函数参数：<code>Func([1, 2])</code></li>
<li>提取JSON数据：<code>const { name, version } = packageJson</code></li>
<li>定义函数参数默认值：<code>function Func({ x = 1, y = 2 } = {}) {}</code></li>
<li>遍历Map结构：<code>for (let [k, v] of Map) {}</code></li>
<li>输入模块指定属性和方法：<code>const { readFile, writeFile } = require(&quot;fs&quot;)</code></li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>匹配模式：只要等号两边的模式相同，左边的变量就会被赋予对应的值</li>
<li>解构赋值规则：只要等号右边的值不是对象或数组，就先将其转为对象</li>
<li>解构默认值生效条件：属性值严格等于<code>undefined</code></li>
<li>解构遵循匹配模式</li>
<li>解构不成功时变量的值等于<code>undefined</code></li>
<li><code>undefined</code>和<code>null</code>无法转为对象，因此无法进行解构</li>
</ul>
<h2 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a><code>字符串扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>Unicode表示法</strong>：<code>大括号包含</code>表示Unicode字符(<code>\u{0xXX}</code>或<code>\u{0XXX}</code>)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>字符串遍历</strong>：可通过<code>for-of</code>遍历字符串</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>字符串模板</strong>：可单行可多行可插入变量的增强版字符串</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>标签模板</strong>：函数参数的特殊调用</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>String.raw()</strong>：返回把字符串所有变量替换且对斜杠进行转义的结果</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>String.fromCodePoint()</strong>：返回码点对应字符</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>codePointAt()</strong>：返回字符对应码点(<code>String.fromCodePoint()</code>的逆操作)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>normalize()</strong>：把字符的不同表示方法统一为同样形式，返回<code>新字符串</code>(Unicode正规化)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>repeat()</strong>：把字符串重复n次，返回<code>新字符串</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>matchAll()</strong>：返回正则表达式在字符串的所有匹配</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>includes()</strong>：是否存在指定字符串</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>startsWith()</strong>：是否存在字符串头部指定字符串</p>
<p>[x]<strong>endsWith()</strong>：是否存在字符串尾部指定字符串</p>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<p>以上扩展方法均可作用于由<code>4个字节储存</code>的<code>Unicode字符</code>上</p>
<h2 id="数值扩展"><a href="#数值扩展" class="headerlink" title="数值扩展"></a><code>数值扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>二进制表示法</strong>：<code>0b或0B开头</code>表示二进制(<code>0bXX</code>或<code>0BXX</code>)</li>
<li><input checked disabled type="checkbox"> <strong>八进制表示法</strong>：<code>0o或0O开头</code>表示二进制(<code>0oXX</code>或<code>0OXX</code>)</li>
<li><input checked disabled type="checkbox"> <strong>Number.EPSILON</strong>：数值最小精度</li>
<li><input checked disabled type="checkbox"> <strong>Number.MIN_SAFE_INTEGER</strong>：最小安全数值(<code>-2^53</code>)</li>
<li><input checked disabled type="checkbox"> <strong>Number.MAX_SAFE_INTEGER</strong>：最大安全数值(<code>2^53</code>)</li>
<li><input checked disabled type="checkbox"> <strong>Number.parseInt()</strong>：返回转换值的整数部分</li>
<li><input checked disabled type="checkbox"> <strong>Number.parseFloat()</strong>：返回转换值的浮点数部分</li>
<li><input checked disabled type="checkbox"> <strong>Number.isFinite()</strong>：是否为有限数值</li>
<li><input checked disabled type="checkbox"> <strong>Number.isNaN()</strong>：是否为NaN</li>
<li><input checked disabled type="checkbox"> <strong>Number.isInteger()</strong>：是否为整数</li>
<li><input checked disabled type="checkbox"> <strong>Number.isSafeInteger()</strong>：是否在数值安全范围内</li>
<li><input checked disabled type="checkbox"> <strong>Math.trunc()</strong>：返回数值整数部分</li>
<li><input checked disabled type="checkbox"> <strong>Math.sign()</strong>：返回数值类型(<code>正数1</code>、<code>负数-1</code>、<code>零0</code>)</li>
<li><input checked disabled type="checkbox"> <strong>Math.cbrt()</strong>：返回数值立方根</li>
<li><input checked disabled type="checkbox"> <strong>Math.clz32()</strong>：返回数值的32位无符号整数形式</li>
<li><input checked disabled type="checkbox"> <strong>Math.imul()</strong>：返回两个数值相乘</li>
<li><input checked disabled type="checkbox"> <strong>Math.fround()</strong>：返回数值的32位单精度浮点数形式</li>
<li><input checked disabled type="checkbox"> <strong>Math.hypot()</strong>：返回所有数值平方和的平方根</li>
<li><input checked disabled type="checkbox"> <strong>Math.expm1()</strong>：返回<code>e^n - 1</code></li>
<li><input checked disabled type="checkbox"> <strong>Math.log1p()</strong>：返回<code>1 + n</code>的自然对数(<code>Math.log(1 + n)</code>)</li>
<li><input checked disabled type="checkbox"> <strong>Math.log10()</strong>：返回以10为底的n的对数</li>
<li><input checked disabled type="checkbox"> <strong>Math.log2()</strong>：返回以2为底的n的对数</li>
<li><input checked disabled type="checkbox"> <strong>Math.sinh()</strong>：返回n的双曲正弦</li>
<li><input checked disabled type="checkbox"> <strong>Math.cosh()</strong>：返回n的双曲余弦</li>
<li><input checked disabled type="checkbox"> <strong>Math.tanh()</strong>：返回n的双曲正切</li>
<li><input checked disabled type="checkbox"> <strong>Math.asinh()</strong>：返回n的反双曲正弦</li>
<li><input checked disabled type="checkbox"> <strong>Math.acosh()</strong>：返回n的反双曲余弦</li>
<li><input checked disabled type="checkbox"> <strong>Math.atanh()</strong>：返回n的反双曲正切</li>
</ul>
<h2 id="对象扩展"><a href="#对象扩展" class="headerlink" title="对象扩展"></a><code>对象扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>简洁表示法</strong>：直接写入变量和函数作为对象的属性和方法(<code>{ prop, method() {} }</code>)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>属性名表达式</strong>：字面量定义对象时使用<code>[]</code>定义键(<code>[prop]</code>，不能与上同时使用)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>方法的name属性</strong>：返回方法函数名</p>
</li>
<li><ul>
<li>取值函数(getter)和存值函数(setter)：<code>get/set 函数名</code>(属性的描述对象在<code>get</code>和<code>set</code>上)</li>
<li>bind返回的函数：<code>bound 函数名</code></li>
<li>Function构造函数返回的函数实例：<code>anonymous</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>属性的可枚举性和遍历</strong>：描述对象的<code>enumerable</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>super关键字</strong>：指向当前对象的原型对象(只能用在对象的简写方法中<code>method() {}</code>)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.is()</strong>：对比两值是否相等</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.assign()</strong>：合并对象(浅拷贝)，返回原对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.getPrototypeOf()</strong>：返回对象的原型对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.setPrototypeOf()</strong>：设置对象的原型对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong><strong>proto</strong></strong>：返回或设置对象的原型对象</p>
</li>
</ul>
<blockquote>
<p>属性遍历</p>
</blockquote>
<ul>
<li><p>描述：<code>自身</code>、<code>可继承</code>、<code>可枚举</code>、<code>非枚举</code>、<code>Symbol</code></p>
</li>
<li><p>遍历</p>
</li>
<li><ul>
<li><code>for-in</code>：遍历对象<code>自身可继承可枚举</code>属性</li>
<li><code>Object.keys()</code>：返回对象<code>自身可枚举</code>属性的键组成的数组</li>
<li><code>Object.getOwnPropertyNames()</code>：返回对象<code>自身可继承可枚举非枚举</code>属性的键组成的数组</li>
<li><code>Object.getOwnPropertySymbols()</code>：返回对象<code>Symbol</code>属性的键组成的数组</li>
<li><code>Reflect.ownKeys()</code>：返回对象<code>自身可继承可枚举非枚举Symbol</code>属性的键组成的数组</li>
</ul>
</li>
<li><p>规则</p>
</li>
<li><ul>
<li>首先遍历所有数值键，按照数值升序排列</li>
<li>其次遍历所有字符串键，按照加入时间升序排列</li>
<li>最后遍历所有Symbol键，按照加入时间升序排列</li>
</ul>
</li>
</ul>
<h2 id="数组扩展"><a href="#数组扩展" class="headerlink" title="数组扩展"></a><code>数组扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>扩展运算符(…)</strong>：转换数组为用逗号分隔的参数序列(<code>[...arr]</code>，相当于<code>rest/spread参数</code>的逆运算)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Array.from()</strong>：转换具有<code>Iterator接口</code>的数据结构为真正数组，返回新数组</p>
</li>
<li><ul>
<li>类数组对象：<code>包含length的对象</code>、<code>Arguments对象</code>、<code>NodeList对象</code></li>
<li>可遍历对象：<code>String</code>、<code>Set结构</code>、<code>Map结构</code>、<code>Generator函数</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Array.of()</strong>：转换一组值为真正数组，返回新数组</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>copyWithin()</strong>：把指定位置的成员复制到其他位置，返回原数组</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>find()</strong>：返回第一个符合条件的成员</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>findIndex()</strong>：返回第一个符合条件的成员索引值</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>fill()</strong>：根据指定值填充整个数组，返回原数组</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>keys()</strong>：返回以索引值为遍历器的对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>values()</strong>：返回以属性值为遍历器的对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>entries()</strong>：返回以索引值和属性值为遍历器的对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>数组空位</strong>：ES6明确将数组空位转为<code>undefined</code>(空位处理规不一，建议避免出现</p>
</li>
</ul>
<blockquote>
<p>扩展应用</p>
</blockquote>
<ul>
<li>克隆数组：<code>const arr = [...arr1]</code></li>
<li>合并数组：<code>const arr = [...arr1, ...arr2]</code></li>
<li>拼接数组：<code>arr.push(...arr1)</code></li>
<li>代替apply：<code>Math.max.apply(null, [x, y])</code> =&gt; <code>Math.max(...[x, y])</code></li>
<li>转换字符串为数组：<code>[...&quot;hello&quot;]</code></li>
<li>转换类数组对象为数组：<code>[...Arguments, ...NodeList]</code></li>
<li>转换可遍历对象为数组：<code>[...String, ...Set, ...Map, ...Generator]</code></li>
<li>与数组解构赋值结合：<code>const [x, ...rest/spread] = [1, 2, 3]</code></li>
<li>计算Unicode字符长度：<code>Array.from(&quot;hello&quot;).length</code> =&gt; <code>[...&quot;hello&quot;].length</code></li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<p>使用<code>keys()</code>、<code>values()</code>、<code>entries()</code>返回的遍历器对象，可用<code>for-of</code>自动遍历或<code>next()</code>手动遍历</p>
<h2 id="函数扩展"><a href="#函数扩展" class="headerlink" title="函数扩展"></a><code>函数扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>参数默认值</strong>：为函数参数指定默认值</p>
</li>
<li><ul>
<li>指定某个参数不得省略，省略即抛出错误：<code>function Func(x = throwMissing()) {}</code></li>
<li>将参数默认值设为<code>undefined</code>，表明此参数可省略：<code>Func(undefined, 1)</code></li>
<li>形式：<code>function Func(x = 1, y = 2) {}</code></li>
<li>参数赋值：惰性求值(函数调用后才求值)</li>
<li>参数位置：尾参数</li>
<li>参数作用域：函数作用域</li>
<li>声明方式：默认声明，不能用<code>const</code>或<code>let</code>再次声明</li>
<li>length：返回没有指定默认值的参数个数</li>
<li>与解构赋值默认值结合：<code>function Func({ x = 1, y = 2 } = {}) {}</code></li>
<li>应用</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>rest/spread参数(…)</strong>：返回函数多余参数</p>
</li>
<li><ul>
<li>形式：以数组的形式存在，之后不能再有其他参数</li>
<li>作用：代替<code>Arguments对象</code></li>
<li>length：返回没有指定默认值的参数个数但不包括<code>rest/spread参数</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>严格模式</strong>：在严格条件下运行JS</p>
</li>
<li><ul>
<li>应用：只要函数参数使用默认值、解构赋值、扩展运算符，那么函数内部就不能显式设定为严格模式</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>name属性</strong>：返回函数的函数名</p>
</li>
<li><ul>
<li>将匿名函数赋值给变量：<code>空字符串</code>(<strong>ES5</strong>)、<code>变量名</code>(<strong>ES6</strong>)</li>
<li>将具名函数赋值给变量：<code>函数名</code>(<strong>ES5和ES6</strong>)</li>
<li>bind返回的函数：<code>bound 函数名</code>(<strong>ES5和ES6</strong>)</li>
<li>Function构造函数返回的函数实例：<code>anonymous</code>(<strong>ES5和ES6</strong>)</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>箭头函数(=&gt;)</strong>：函数简写</p>
</li>
<li><ul>
<li>并非因为内部有绑定<code>this</code>的机制，而是根本没有自己的<code>this</code>，导致内部的<code>this</code>就是外层代码块的<code>this</code></li>
<li>因为没有<code>this</code>，因此不能用作构造函数</li>
<li>无参数：<code>() =&gt; {}</code></li>
<li>单个参数：<code>x =&gt; {}</code></li>
<li>多个参数：<code>(x, y) =&gt; {}</code></li>
<li>解构参数：<code>({x, y}) =&gt; {}</code></li>
<li>嵌套使用：部署管道机制</li>
<li>this指向固定化</li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>尾调用优化</strong>：只保留内层函数的调用帧</p>
</li>
<li><ul>
<li>定义：函数尾调用自身</li>
<li>作用：只要使用尾递归就不会发生栈溢出，相对节省内存</li>
<li>实现：把所有用到的内部变量改写成函数的参数并使用参数默认值</li>
<li>定义：某个函数的最后一步是调用另一个函数</li>
<li>形式：<code>function f(x) { return g(x); }</code></li>
<li>尾调用</li>
<li>尾递归</li>
</ul>
</li>
</ul>
<blockquote>
<p>箭头函数误区</p>
</blockquote>
<ul>
<li>函数体内的<code>this</code>是<code>定义时所在的对象</code>而不是<code>使用时所在的对象</code></li>
<li>可让<code>this</code>指向固定化，这种特性很有利于封装回调函数</li>
<li>不可当作<code>构造函数</code>，因此箭头函数不可使用<code>new命令</code></li>
<li>不可使用<code>yield命令</code>，因此箭头函数不能用作<code>Generator函数</code></li>
<li>不可使用<code>Arguments对象</code>，此对象在函数体内不存在(可用<code>rest/spread参数</code>代替)</li>
<li>返回对象时必须在对象外面加上括号</li>
</ul>
<p>##　<code>正则扩展</code></p>
<ul>
<li><input checked disabled type="checkbox"> <p><strong>变更RegExp构造函数入参</strong>：允许首参数为<code>正则对象</code>，尾参数为<code>正则修饰符</code>(返回的正则表达式会忽略原正则表达式的修饰符)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>正则方法调用变更</strong>：字符串对象的<code>match()</code>、<code>replace()</code>、<code>search()</code>、<code>split()</code>内部调用转为调用<code>RegExp</code>实例对应的<code>RegExp.prototype[Symbol.方法]</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>u修饰符</strong>：Unicode模式修饰符，正确处理大于<code>\uFFFF</code>的<code>Unicode字符</code></p>
</li>
<li><ul>
<li><code>点字符</code>(.)</li>
<li><code>Unicode表示法</code></li>
<li><code>量词</code></li>
<li><code>预定义模式</code></li>
<li><code>i修饰符</code></li>
<li><code>转义</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>y修饰符</strong>：粘连修饰符，确保匹配必须从剩余的第一个位置开始全局匹配(与<code>g修饰符</code>作用类似)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>unicode</strong>：是否设置<code>u修饰符</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>sticky</strong>：是否设置<code>y修饰符</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>flags</strong>：正则表达式的修饰符</p>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li><code>y修饰符</code>隐含头部匹配标志<code>^</code></li>
<li>单单一个<code>y修饰符</code>对<code>match()</code>只能返回第一个匹配，必须与<code>g修饰符</code>联用才能返回所有匹配</li>
</ul>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a><code>Symbol</code></h2><ul>
<li><p>定义：独一无二的值</p>
</li>
<li><p>声明：<code>const set = Symbol(str)</code></p>
</li>
<li><p>入参：字符串(可选)</p>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>Symbol()</strong>：创建以参数作为描述的<code>Symbol值</code>(不登记在全局环境)</li>
<li><strong>Symbol.for()</strong>：创建以参数作为描述的<code>Symbol值</code>，如存在此参数则返回原有的<code>Symbol值</code>(先搜索后创建，登记在全局环境)</li>
<li><strong>Symbol.keyFor()</strong>：返回已登记的<code>Symbol值</code>的描述(只能返回<code>Symbol.for()</code>的<code>key</code>)</li>
<li><strong>Object.getOwnPropertySymbols()</strong>：返回对象中所有用作属性名的<code>Symbol值</code>的数组</li>
</ul>
</li>
<li><p>内置</p>
</li>
<li><ul>
<li><strong>Symbol.hasInstance</strong>：指向一个内部方法，当其他对象使用<code>instanceof运算符</code>判断是否为此对象的实例时会调用此方法</li>
<li><strong>Symbol.isConcatSpreadable</strong>：指向一个布尔值，定义对象用于<code>Array.prototype.concat()</code>时是否可展开</li>
<li><strong>Symbol.species</strong>：指向一个构造函数，当实例对象使用自身构造函数时会调用指定的构造函数</li>
<li><strong>Symbol.match</strong>：指向一个函数，当实例对象被<code>String.prototype.match()</code>调用时会重新定义<code>match()</code>的行为</li>
<li><strong>Symbol.replace</strong>：指向一个函数，当实例对象被<code>String.prototype.replace()</code>调用时会重新定义<code>replace()</code>的行为</li>
<li><strong>Symbol.search</strong>：指向一个函数，当实例对象被<code>String.prototype.search()</code>调用时会重新定义<code>search()</code>的行为</li>
<li><strong>Symbol.split</strong>：指向一个函数，当实例对象被<code>String.prototype.split()</code>调用时会重新定义<code>split()</code>的行为</li>
<li><strong>Symbol.iterator</strong>：指向一个默认遍历器方法，当实例对象执行<code>for-of</code>时会调用指定的默认遍历器</li>
<li><strong>Symbol.toPrimitive</strong>：指向一个函数，当实例对象被转为原始类型的值时会返回此对象对应的原始类型值</li>
<li><strong>Symbol.toStringTag</strong>：指向一个函数，当实例对象被<code>Object.prototype.toString()</code>调用时其返回值会出现在<code>toString()</code>返回的字符串之中表示对象的类型</li>
<li><strong>Symbol.unscopables</strong>：指向一个对象，指定使用<code>with</code>时哪些属性会被<code>with环境</code>排除</li>
</ul>
</li>
</ul>
<blockquote>
<p>数据类型</p>
</blockquote>
<ul>
<li><strong>Undefined</strong></li>
<li><strong>Null</strong></li>
<li><strong>String</strong></li>
<li><strong>Number</strong></li>
<li><strong>Boolean</strong></li>
<li><strong>Object</strong>(包含<code>Array</code>、<code>Function</code>、<code>Date</code>、<code>RegExp</code>、<code>Error</code>)</li>
<li><strong>Symbol</strong></li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>唯一化对象属性名：属性名属于Symbol类型，就都是独一无二的，可保证不会与其他属性名产生冲突</li>
<li>消除魔术字符串：在代码中多次出现且与代码形成强耦合的某一个具体的字符串或数值</li>
<li>遍历属性名：无法通过<code>for-in</code>、<code>for-of</code>、<code>Object.keys()</code>、<code>Object.getOwnPropertyNames()</code>、<code>JSON.stringify()</code>返回，只能通过<code>Object.getOwnPropertySymbols</code>返回</li>
<li>启用模块的Singleton模式：调用一个类在任何时候返回同一个实例(<code>window</code>和<code>global</code>)，使用<code>Symbol.for()</code>来模拟全局的<code>Singleton模式</code></li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li><code>Symbol()</code>生成一个原始类型的值不是对象，因此<code>Symbol()</code>前不能使用<code>new命令</code></li>
<li><code>Symbol()</code>参数表示对当前<code>Symbol值</code>的描述，相同参数的<code>Symbol()</code>返回值不相等</li>
<li><code>Symbol值</code>不能与其他类型的值进行运算</li>
<li><code>Symbol值</code>可通过<code>String()</code>或<code>toString()</code>显式转为字符串</li>
<li><code>Symbol值</code>作为对象属性名时，此属性是公开属性，但不是私有属性</li>
<li><code>Symbol值</code>作为对象属性名时，只能用方括号运算符(<code>[]</code>)读取，不能用点运算符(<code>.</code>)读取</li>
<li><code>Symbol值</code>作为对象属性名时，不会被常规方法遍历得到，可利用此特性为对象定义<code>非私有但又只用于内部的方法</code></li>
</ul>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a><code>Set</code></h2><h5 id="set"><a href="#set" class="headerlink" title="set"></a>set</h5><ul>
<li><p>定义：类似于数组的数据结构，成员值都是唯一且没有重复的值</p>
</li>
<li><p>声明：<code>const set = new Set(arr)</code></p>
</li>
<li><p>入参：具有<code>Iterator接口</code>的数据结构</p>
</li>
<li><p>属性</p>
</li>
<li><ul>
<li><strong>constructor</strong>：构造函数，返回Set</li>
<li><strong>size</strong>：返回实例成员总数</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>add()</strong>：添加值，返回实例</li>
<li><strong>delete()</strong>：删除值，返回布尔值</li>
<li><strong>has()</strong>：检查值，返回布尔值</li>
<li><strong>clear()</strong>：清除所有成员</li>
<li><strong>keys()</strong>：返回以属性值为遍历器的对象</li>
<li><strong>values()</strong>：返回以属性值为遍历器的对象</li>
<li><strong>entries()</strong>：返回以属性值和属性值为遍历器的对象</li>
<li><strong>forEach()</strong>：使用回调函数遍历每个成员</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li><p>去重字符串：<code>[...new Set(str)].join(&quot;&quot;)</code></p>
</li>
<li><p>去重数组：<code>[...new Set(arr)]</code>或<code>Array.from(new Set(arr))</code></p>
</li>
<li><p>集合数组</p>
</li>
<li><ul>
<li>声明：<code>const a = new Set(arr1)</code>、<code>const b = new Set(arr2)</code></li>
<li>并集：<code>new Set([...a, ...b])</code></li>
<li>交集：<code>new Set([...a].filter(v =&gt; b.has(v)))</code></li>
<li>差集：<code>new Set([...a].filter(v =&gt; !b.has(v)))</code></li>
</ul>
</li>
<li><p>映射集合</p>
</li>
<li><ul>
<li>声明：<code>let set = new Set(arr)</code></li>
<li>映射：<code>set = new Set([...set].map(v =&gt; v * 2))</code>或<code>set = new Set(Array.from(set, v =&gt; v * 2))</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>遍历顺序：插入顺序</li>
<li>没有键只有值，可认为键和值两值相等</li>
<li>添加多个<code>NaN</code>时，只会存在一个<code>NaN</code></li>
<li>添加相同的对象时，会认为是不同的对象</li>
<li>添加值时不会发生类型转换(<code>5 !== &quot;5&quot;</code>)</li>
<li><code>keys()</code>和<code>values()</code>的行为完全一致，<code>entries()</code>返回的遍历器同时包括键和值且两值相等</li>
</ul>
<h5 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h5><ul>
<li><p>定义：和Set结构类似，成员值只能是对象</p>
</li>
<li><p>声明：<code>const set = new WeakSet(arr)</code></p>
</li>
<li><p>入参：具有<code>Iterator接口</code>的数据结构</p>
</li>
<li><p>属性</p>
</li>
<li><ul>
<li><strong>constructor</strong>：构造函数，返回WeakSet</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>add()</strong>：添加值，返回实例</li>
<li><strong>delete()</strong>：删除值，返回布尔值</li>
<li><strong>has()</strong>：检查值，返回布尔值</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>储存DOM节点：DOM节点被移除时自动释放此成员，不用担心这些节点从文档移除时会引发内存泄漏</li>
<li>临时存放一组对象或存放跟对象绑定的信息：只要这些对象在外部消失，它在<code>WeakSet结构</code>中的引用就会自动消</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>成员都是<code>弱引用</code>，垃圾回收机制不考虑<code>WeakSet结构</code>对此成员的引用</li>
<li>成员不适合引用，它会随时消失，因此ES6规定<code>WeakSet结构不可遍历</code></li>
<li>其他对象不再引用成员时，垃圾回收机制会自动回收此成员所占用的内存，不考虑此成员是否还存在于<code>WeakSet结构</code>中</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a><code>Map</code></h2><h5 id="Map-1"><a href="#Map-1" class="headerlink" title="Map"></a>Map</h5><ul>
<li><p>定义：类似于对象的数据结构，成员键可以是任何类型的值</p>
</li>
<li><p>声明：<code>const set = new Map(arr)</code></p>
</li>
<li><p>入参：具有<code>Iterator接口</code>且每个成员都是一个双元素数组的数据结构</p>
</li>
<li><p>属性</p>
</li>
<li><ul>
<li><strong>constructor</strong>：构造函数，返回Map</li>
<li><strong>size</strong>：返回实例成员总数</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>get()</strong>：返回键值对</li>
<li><strong>set()</strong>：添加键值对，返回实例</li>
<li><strong>delete()</strong>：删除键值对，返回布尔值</li>
<li><strong>has()</strong>：检查键值对，返回布尔值</li>
<li><strong>clear()</strong>：清除所有成员</li>
<li><strong>keys()</strong>：返回以键为遍历器的对象</li>
<li><strong>values()</strong>：返回以值为遍历器的对象</li>
<li><strong>entries()</strong>：返回以键和值为遍历器的对象</li>
<li><strong>forEach()</strong>：使用回调函数遍历每个成员</li>
</ul>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>遍历顺序：插入顺序</li>
<li>对同一个键多次赋值，后面的值将覆盖前面的值</li>
<li>对同一个对象的引用，被视为一个键</li>
<li>对同样值的两个实例，被视为两个键</li>
<li>键跟内存地址绑定，只要内存地址不一样就视为两个键</li>
<li>添加多个以<code>NaN</code>作为键时，只会存在一个以<code>NaN</code>作为键的值</li>
<li><code>Object结构</code>提供<code>字符串—值</code>的对应，<code>Map结构</code>提供<code>值—值</code>的对应</li>
</ul>
<h5 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h5><ul>
<li><p>定义：和Map结构类似，成员键只能是对象</p>
</li>
<li><p>声明：<code>const set = new WeakMap(arr)</code></p>
</li>
<li><p>入参：具有<code>Iterator接口</code>且每个成员都是一个双元素数组的数据结构</p>
</li>
<li><p>属性</p>
</li>
<li><ul>
<li><strong>constructor</strong>：构造函数，返回WeakMap</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>get()</strong>：返回键值对</li>
<li><strong>set()</strong>：添加键值对，返回实例</li>
<li><strong>delete()</strong>：删除键值对，返回布尔值</li>
<li><strong>has()</strong>：检查键值对，返回布尔值</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>储存DOM节点：DOM节点被移除时自动释放此成员键，不用担心这些节点从文档移除时会引发内存泄漏</li>
<li>部署私有属性：内部属性是实例的弱引用，删除实例时它们也随之消失，不会造成内存泄漏</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>成员键都是<code>弱引用</code>，垃圾回收机制不考虑<code>WeakMap结构</code>对此成员键的引用</li>
<li>成员键不适合引用，它会随时消失，因此ES6规定<code>WeakMap结构不可遍历</code></li>
<li>其他对象不再引用成员键时，垃圾回收机制会自动回收此成员所占用的内存，不考虑此成员是否还存在于<code>WeakMap结构</code>中</li>
<li>一旦不再需要，成员会自动消失，不用手动删除引用</li>
<li>弱引用的<code>只是键而不是值</code>，值依然是正常引用</li>
<li>即使在外部消除了成员键的引用，内部的成员值依然存在</li>
</ul>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a><code>Proxy</code></h2><ul>
<li><p>定义：修改某些操作的默认行为</p>
</li>
<li><p>声明：<code>const proxy = new Proxy(target, handler)</code></p>
</li>
<li><p>入参</p>
</li>
<li><ul>
<li><strong>target</strong>：拦截的目标对象</li>
<li><strong>handler</strong>：定制拦截行为</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>Proxy.revocable()</strong>：返回可取消的Proxy实例(返回<code>{ proxy, revoke }</code>，通过revoke()取消代理)</li>
</ul>
</li>
<li><p>拦截方式</p>
</li>
<li><ul>
<li><strong>get()</strong>：拦截对象属性读取</li>
<li><strong>set()</strong>：拦截对象属性设置，返回布尔值</li>
<li><strong>has()</strong>：拦截对象属性检查<code>k in obj</code>，返回布尔值</li>
<li><strong>deleteProperty()</strong>：拦截对象属性删除<code>delete obj[k]</code>，返回布尔值</li>
<li><strong>defineProperty()</strong>：拦截对象属性定义<code>Object.defineProperty()</code>、<code>Object.defineProperties()</code>，返回布尔值</li>
<li><strong>ownKeys()</strong>：拦截对象属性遍历<code>for-in</code>、<code>Object.keys()</code>、<code>Object.getOwnPropertyNames()</code>、<code>Object.getOwnPropertySymbols()</code>，返回数组</li>
<li><strong>getOwnPropertyDescriptor()</strong>：拦截对象属性描述读取<code>Object.getOwnPropertyDescriptor()</code>，返回对象</li>
<li><strong>getPrototypeOf()</strong>：拦截对象原型读取<code>instanceof</code>、<code>Object.getPrototypeOf()</code>、<code>Object.prototype.__proto__</code>、<code>Object.prototype.isPrototypeOf()</code>、<code>Reflect.getPrototypeOf()</code>，返回对象</li>
<li><strong>setPrototypeOf()</strong>：拦截对象原型设置<code>Object.setPrototypeOf()</code>，返回布尔值</li>
<li><strong>isExtensible()</strong>：拦截对象是否可扩展读取<code>Object.isExtensible()</code>，返回布尔值</li>
<li><strong>preventExtensions()</strong>：拦截对象不可扩展设置<code>Object.preventExtensions()</code>，返回布尔值</li>
<li><strong>apply()</strong>：拦截Proxy实例作为函数调用<code>proxy()</code>、<code>proxy.apply()</code>、<code>proxy.call()</code></li>
<li><strong>construct()</strong>：拦截Proxy实例作为构造函数调用<code>new proxy()</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li><code>Proxy.revocable()</code>：不允许直接访问对象，必须通过代理访问，一旦访问结束就收回代理权不允许再次访问</li>
<li><code>get()</code>：读取未知属性报错、读取数组负数索引的值、封装链式操作、生成DOM嵌套节点</li>
<li><code>set()</code>：数据绑定(Vue数据绑定实现原理)、确保属性值设置符合要求、防止内部属性被外部读写</li>
<li><code>has()</code>：隐藏内部属性不被发现、排除不符合属性条件的对象</li>
<li><code>deleteProperty()</code>：保护内部属性不被删除</li>
<li><code>defineProperty()</code>：阻止属性被外部定义</li>
<li><code>ownKeys()</code>：保护内部属性不被遍历</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>要使<code>Proxy</code>起作用，必须针对<code>实例</code>进行操作，而不是针对<code>目标对象</code>进行操作</li>
<li>没有设置任何拦截时，等同于<code>直接通向原对象</code></li>
<li>属性被定义为<code>不可读写/扩展/配置/枚举</code>时，使用拦截方法会报错</li>
<li>代理下的目标对象，内部<code>this</code>指向<code>Proxy代理</code></li>
</ul>
<h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a><code>Reflect</code></h2><ul>
<li><p>定义：保持<code>Object方法</code>的默认行为</p>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>get()</strong>：返回对象属性</li>
<li><strong>set()</strong>：设置对象属性，返回布尔值</li>
<li><strong>has()</strong>：检查对象属性，返回布尔值</li>
<li><strong>deleteProperty()</strong>：删除对象属性，返回布尔值</li>
<li><strong>defineProperty()</strong>：定义对象属性，返回布尔值</li>
<li><strong>ownKeys()</strong>：遍历对象属性，返回数组(<code>Object.getOwnPropertyNames()</code>+<code>Object.getOwnPropertySymbols()</code>)</li>
<li><strong>getOwnPropertyDescriptor()</strong>：返回对象属性描述，返回对象</li>
<li><strong>getPrototypeOf()</strong>：返回对象原型，返回对象</li>
<li><strong>setPrototypeOf()</strong>：设置对象原型，返回布尔值</li>
<li><strong>isExtensible()</strong>：返回对象是否可扩展，返回布尔值</li>
<li><strong>preventExtensions()</strong>：设置对象不可扩展，返回布尔值</li>
<li><strong>apply()</strong>：绑定this后执行指定函数</li>
<li><strong>construct()</strong>：调用构造函数创建实例</li>
</ul>
</li>
</ul>
<blockquote>
<p>设计目的</p>
</blockquote>
<ul>
<li>将<code>Object</code>属于<code>语言内部的方法</code>放到<code>Reflect</code>上</li>
<li>将某些Object方法报错情况改成返回<code>false</code></li>
<li>让<code>Object操作</code>变成<code>函数行为</code></li>
<li><code>Proxy</code>与<code>Reflect</code>相辅相成</li>
</ul>
<blockquote>
<p>废弃方法</p>
</blockquote>
<ul>
<li><code>Object.defineProperty()</code> =&gt; <code>Reflect.defineProperty()</code></li>
<li><code>Object.getOwnPropertyDescriptor()</code> =&gt; <code>Reflect.getOwnPropertyDescriptor()</code></li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li><code>Proxy方法</code>和<code>Reflect方法</code>一一对应</li>
<li><code>Proxy</code>和<code>Reflect</code>联合使用，前者负责<code>拦截赋值操作</code>，后者负责<code>完成赋值操作</code></li>
</ul>
<blockquote>
<p>数据绑定：观察者模式</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observerQueue = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"><span class="keyword">const</span> observe = <span class="function"><span class="params">fn</span> =&gt;</span> observerQueue.add(fn);</span><br><span class="line"><span class="keyword">const</span> observable = <span class="function"><span class="params">obj</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="keyword">set</span>(tgt, key, val, receiver) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="built_in">Reflect</span>.set(tgt, key, val, receiver);</span><br><span class="line">        observerQueue.forEach(<span class="function"><span class="params">v</span> =&gt;</span> v());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = observable(&#123; <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">name</span>: <span class="string">"Yajun"</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> print = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;person.name&#125;</span> is <span class="subst">$&#123;person.age&#125;</span> years old`</span>);</span><br><span class="line">observe(print);</span><br><span class="line">person.name = <span class="string">"Joway"</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a><code>Class</code></h2><ul>
<li><p>定义：对一类具有共同特征的事物的抽象(构造函数语法糖)</p>
</li>
<li><p>原理：类本身指向构造函数，所有方法定义在<code>prototype</code>上，可看作构造函数的另一种写法(<code>Class === Class.prototype.constructor</code>)</p>
</li>
<li><p>方法和关键字</p>
</li>
<li><ul>
<li><strong>constructor()</strong>：构造函数，<code>new命令</code>生成实例时自动调用</li>
<li><strong>extends</strong>：继承父类</li>
<li><strong>super</strong>：新建父类的<code>this</code></li>
<li><strong>static</strong>：定义静态属性方法</li>
<li><strong>get</strong>：取值函数，拦截属性的取值行为</li>
<li><strong>set</strong>：存值函数，拦截属性的存值行为</li>
</ul>
</li>
<li><p>属性</p>
</li>
<li><ul>
<li><strong><strong>proto</strong></strong>：<code>构造函数的继承</code>(总是指向<code>父类</code>)</li>
<li><strong><strong>proto</strong>.<strong>proto</strong></strong>：子类的原型的原型，即父类的原型(总是指向父类的<code>__proto__</code>)</li>
<li><strong>prototype.<strong>proto</strong></strong>：<code>属性方法的继承</code>(总是指向父类的<code>prototype</code>)</li>
</ul>
</li>
<li><p>静态属性：定义类完成后赋值属性，该属性<code>不会被实例继承</code>，只能通过类来调用</p>
</li>
<li><p>静态方法：使用<code>static</code>定义方法，该方法<code>不会被实例继承</code>，只能通过类来调用(方法中的<code>this</code>指向类，而不是实例)</p>
</li>
<li><p>继承</p>
</li>
<li><ul>
<li>父类静态属性方法可被子类继承</li>
<li>子类继承父类后，可从<code>super</code>上调用父类静态属性方法</li>
<li>作为函数调用：只能在构造函数中调用<code>super()</code>，内部<code>this</code>指向继承的<code>当前子类</code>(<code>super()</code>调用后才可在构造函数中使用<code>this</code>)</li>
<li>作为对象调用：在<code>普通方法</code>中指向<code>父类的原型对象</code>，在<code>静态方法</code>中指向<code>父类</code></li>
<li>ES5实质：先创造子类实例的<code>this</code>，再将父类的属性方法添加到<code>this</code>上(<code>Parent.apply(this)</code>)</li>
<li>ES6实质：先将父类实例的属性方法加到<code>this</code>上(调用<code>super()</code>)，再用子类构造函数修改<code>this</code></li>
<li>实质</li>
<li>super</li>
<li>显示定义：使用<code>constructor() { super(); }</code>定义继承父类，没有书写则<code>显示定义</code></li>
<li>子类继承父类：子类使用父类的属性方法时，必须在构造函数中调用<code>super()</code>，否则得不到父类的<code>this</code></li>
</ul>
</li>
<li><p>实例：类相当于<code>实例的原型</code>，所有在类中定义的属性方法都会被实例继承</p>
</li>
<li><ul>
<li>显式指定属性方法：使用<code>this</code>指定到自身上(使用<code>Class.hasOwnProperty()</code>可检测到)</li>
<li>隐式指定属性方法：直接声明定义在对象原型上(使用<code>Class.__proto__.hasOwnProperty()</code>可检测到)</li>
</ul>
</li>
<li><p>表达式</p>
</li>
<li><ul>
<li>类表达式：<code>const Class = class {}</code></li>
<li>name属性：返回紧跟<code>class</code>后的类名</li>
<li>属性表达式：<code>[prop]</code></li>
<li>Generator方法：<code>* mothod() {}</code></li>
<li>Async方法：<code>async mothod() {}</code></li>
</ul>
</li>
<li><p>this指向：解构实例属性或方法时会报错</p>
</li>
<li><ul>
<li>绑定this：<code>this.mothod = this.mothod.bind(this)</code></li>
<li>箭头函数：<code>this.mothod = () =&gt; this.mothod()</code></li>
</ul>
</li>
<li><p>属性定义位置</p>
</li>
<li><ul>
<li>定义在构造函数中并使用<code>this</code>指向</li>
<li>定义在<code>类最顶层</code></li>
</ul>
</li>
<li><p><strong>new.target</strong>：确定构造函数是如何调用</p>
</li>
</ul>
<blockquote>
<p>原生构造函数</p>
</blockquote>
<ul>
<li><strong>String()</strong></li>
<li><strong>Number()</strong></li>
<li><strong>Boolean()</strong></li>
<li><strong>Array()</strong></li>
<li><strong>Object()</strong></li>
<li><strong>Function()</strong></li>
<li><strong>Date()</strong></li>
<li><strong>RegExp()</strong></li>
<li><strong>Error()</strong></li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>在实例上调用方法，实质是调用原型上的方法</li>
<li><code>Object.assign()</code>可方便地一次向类添加多个方法(<code>Object.assign(Class.prototype, { ... })</code>)</li>
<li>类内部所有定义的方法是不可枚举的(<code>non-enumerable</code>)</li>
<li>构造函数默认返回实例对象(<code>this</code>)，可指定返回另一个对象</li>
<li>取值函数和存值函数设置在属性的<code>Descriptor对象</code>上</li>
<li>类不存在变量提升</li>
<li>利用<code>new.target === Class</code>写出不能独立使用必须继承后才能使用的类</li>
<li>子类继承父类后，<code>this</code>指向子类实例，通过<code>super</code>对某个属性赋值，赋值的属性会变成子类实例的属性</li>
<li>使用<code>super</code>时，必须显式指定是作为函数还是作为对象使用</li>
<li><code>extends</code>不仅可继承类还可继承原生的构造函数</li>
</ul>
<blockquote>
<p>私有属性方法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="built_in">Symbol</span>(<span class="string">"name"</span>);</span><br><span class="line"><span class="keyword">const</span> print = <span class="built_in">Symbol</span>(<span class="string">"print"</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">        <span class="keyword">this</span>[name] = <span class="string">"Bruce"</span>;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    [print]() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>[name]&#125;</span> is <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>继承混合类</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CopyProperties</span>(<span class="params">target, source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> <span class="built_in">Reflect</span>.ownKeys(source)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key !== <span class="string">"constructor"</span> &amp;&amp; key !== <span class="string">"prototype"</span> &amp;&amp; key !== <span class="string">"name"</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(source, key);</span><br><span class="line">            <span class="built_in">Object</span>.defineProperty(target, key, desc);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MixClass</span>(<span class="params">...mixins</span>) </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Mix</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>() &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> mixin <span class="keyword">of</span> mixins) &#123;</span><br><span class="line">                CopyProperties(<span class="keyword">this</span>, <span class="keyword">new</span> mixin());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> mixin <span class="keyword">of</span> mixins) &#123;</span><br><span class="line">        CopyProperties(Mix, mixin);</span><br><span class="line">        CopyProperties(Mix.prototype, mixin.prototype);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Mix;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">MixClass</span>(<span class="title">Person</span>, <span class="title">Kid</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a><code>Module</code></h2><ul>
<li><p>命令</p>
</li>
<li><ul>
<li><strong>默认导入导出</strong>：<code>export { default } from &quot;person&quot;</code></li>
<li><strong>整体导入导出</strong>：<code>export * from &quot;person&quot;</code></li>
<li><strong>按需导入导出</strong>：<code>export { age, name, sex } from &quot;person&quot;</code></li>
<li><strong>改名导入导出</strong>：<code>export { name as newName } from &quot;person&quot;</code></li>
<li><strong>具名改默认导入导出</strong>：<code>export { name as default } from &quot;person&quot;</code></li>
<li><strong>默认改具名导入导出</strong>：<code>export { default as name } from &quot;person&quot;</code></li>
<li><strong>默认导入</strong>：<code>import Person from &quot;person&quot;</code></li>
<li><strong>整体导入</strong>：<code>import * as Person from &quot;person&quot;</code></li>
<li><strong>按需导入</strong>：<code>import { age, name, sex } from &quot;person&quot;</code></li>
<li><strong>改名导入</strong>：<code>import { name as newName } from &quot;person&quot;</code></li>
<li><strong>自执导入</strong>：<code>import &quot;person&quot;</code></li>
<li><strong>复合导入</strong>：<code>import Person, { name } from &quot;person&quot;</code></li>
<li><strong>默认导出</strong>：<code>export default Person</code>(导入时可指定模块任意名称，无需知晓内部真实名称)</li>
<li><strong>单独导出</strong>：<code>export const name = &quot;Bruce&quot;</code></li>
<li><strong>按需导出</strong>：<code>export { age, name, sex }</code>(推荐)</li>
<li><strong>改名导出</strong>：<code>export { name as newName }</code></li>
<li><strong>export</strong>：规定模块对外接口</li>
<li><strong>import</strong>：导入模块内部功能</li>
<li><strong>复合模式</strong>：<code>export命令</code>和<code>import命令</code>结合在一起写成一行，变量实质没有被导入当前模块，相当于对外转发接口，导致当前模块无法直接使用其导入变量</li>
</ul>
</li>
<li><p>继承：<code>默认导出</code>和<code>改名导出</code>结合使用可使模块具备继承性</p>
</li>
<li><p>设计思想：尽量地静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量</p>
</li>
<li><p>严格模式：ES6模块自动采用严格模式(不管模块头部是否添加<code>use strict</code>)</p>
</li>
</ul>
<blockquote>
<p>模块方案</p>
</blockquote>
<ul>
<li><strong>CommonJS</strong>：用于服务器(动态化依赖)</li>
<li><strong>AMD</strong>：用于浏览器(动态化依赖)</li>
<li><strong>CMD</strong>：用于浏览器(动态化依赖)</li>
<li><strong>UMD</strong>：用于浏览器和服务器(动态化依赖)</li>
<li><strong>ESM</strong>：用于浏览器和服务器(静态化依赖)</li>
</ul>
<blockquote>
<p>加载方式</p>
</blockquote>
<ul>
<li><p><strong>运行时加载</strong></p>
</li>
<li><ul>
<li>定义：整体加载模块生成一个对象，再从对象上获取需要的属性和方法进行加载(全部加载)</li>
<li>影响：只有运行时才能得到这个对象，导致无法在编译时做静态优化</li>
</ul>
</li>
<li><p><strong>编译时加载</strong></p>
</li>
<li><ul>
<li>定义：直接从模块中获取需要的属性和方法进行加载(按需加载)</li>
<li>影响：在编译时就完成模块加载，效率比其他方案高，但无法引用模块本身(<strong>本身不是对象</strong>)，可拓展JS高级语法(<strong>宏和类型校验</strong>)</li>
</ul>
</li>
</ul>
<blockquote>
<p>加载实现</p>
</blockquote>
<ul>
<li><p><strong>传统加载</strong>：通过<code>&lt;script&gt;</code>进行同步或异步加载脚本</p>
</li>
<li><ul>
<li>同步加载：<code>&lt;script src=&quot;&quot;&gt;&lt;/script&gt;</code></li>
<li>Defer异步加载：<code>&lt;script src=&quot;&quot; defer&gt;&lt;/script&gt;</code>(顺序加载，渲染完再执行)</li>
<li>Async异步加载：<code>&lt;script src=&quot;&quot; async&gt;&lt;/script&gt;</code>(乱序加载，下载完就执行)</li>
</ul>
</li>
<li><p><strong>模块加载</strong>：<code>&lt;script type=&quot;module&quot; src=&quot;&quot;&gt;&lt;/script&gt;</code>(默认是Defer异步加载)</p>
</li>
</ul>
<blockquote>
<p>CommonJS和ESM的区别</p>
</blockquote>
<ul>
<li><p><code>CommonJS</code>输出<code>值的拷贝</code>，<code>ESM</code>输出<code>值的引用</code></p>
</li>
<li><ul>
<li><code>CommonJS</code>一旦输出一个值，模块内部的变化就影响不到这个值</li>
<li><code>ESM</code>是动态引用且不会缓存值，模块里的变量绑定其所在的模块，等到脚本真正执行时，再根据这个只读引用到被加载的那个模块里去取值</li>
</ul>
</li>
<li><p><code>CommonJS</code>是运行时加载，<code>ESM</code>是编译时加载</p>
</li>
<li><ul>
<li><code>CommonJS</code>加载模块是对象(即<code>module.exports</code>)，该对象只有在脚本运行完才会生成</li>
<li><code>ESM</code>加载模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成</li>
</ul>
</li>
</ul>
<blockquote>
<p>Node加载</p>
</blockquote>
<ul>
<li><p>背景：<code>CommonJS</code>和<code>ESM</code>互不兼容，目前解决方案是将两者分开，采用各自的加载方案</p>
</li>
<li><p>区分：要求<code>ESM</code>采用<code>.mjs</code>后缀文件名</p>
</li>
<li><ul>
<li><code>require()</code>不能加载<code>.mjs文件</code>，只有<code>import命令</code>才可加载<code>.mjs文件</code></li>
<li><code>.mjs文件</code>里不能使用<code>require()</code>，必须使用<code>import命令</code>加载文件</li>
</ul>
</li>
<li><p>驱动：<code>node --experimental-modules file.mjs</code></p>
</li>
<li><p>限制：Node的<code>import命令</code>目前只支持加载本地模块(<code>file:协议</code>)，不支持加载远程模块</p>
</li>
<li><p>加载优先级</p>
</li>
<li><ul>
<li>脚本文件省略后缀名：依次尝试加载四个后缀名文件(<code>.mjs</code>、<code>.js</code>、<code>.json</code>、<code>node</code>)</li>
<li>以上不存在：尝试加载<code>package.json</code>的<code>main字段</code>指定的脚本</li>
<li>以上不存在：依次尝试加载名称为<code>index</code>四个后缀名文件(<code>.mjs</code>、<code>.js</code>、<code>.json</code>、<code>node</code>)</li>
<li>以上不存在：报错</li>
</ul>
</li>
<li><p>不存在的内部变量：<code>arguments</code>、<code>exports</code>、<code>module</code>、<code>require</code>、<code>this</code>、<code>__dirname</code>、<code>__filename</code></p>
</li>
<li><p>CommonJS加载ESM</p>
</li>
<li><ul>
<li>不能使用<code>require()</code>，只能使用<code>import()</code></li>
</ul>
</li>
<li><p>ESM加载CommonJS</p>
</li>
<li><ul>
<li>自动将<code>module.exports</code>转化成<code>export default</code></li>
<li><code>CommonJS</code>输出缓存机制在<code>ESM</code>加载方式下依然有效</li>
<li>采用<code>import命令</code>加载<code>CommonJS模块</code>时，不允许采用<code>按需导入</code>，应使用<code>默认导入</code>或<code>整体导入</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>循环加载</p>
</blockquote>
<ul>
<li><p>定义：<code>脚本A</code>的执行依赖<code>脚本B</code>，而<code>脚本A</code>的执行又依赖<code>脚本B</code></p>
</li>
<li><p>加载原理</p>
</li>
<li><ul>
<li>CommonJS：<code>require()</code>首次加载脚本就会执行整个脚本，在内存里生成一个对象缓存下来，二次加载脚本时直接从缓存中获取</li>
<li>ESM：<code>import命令</code>加载变量不会被缓存，而是成为一个指向被加载模块的引用</li>
</ul>
</li>
<li><p>循环加载</p>
</li>
<li><ul>
<li>CommonJS：只输出已经执行的部分，还未执行的部分不会输出</li>
<li>ESM：需开发者自己保证真正取值时能够取到值(可把变量写成函数形式，函数具有提升作用)</li>
</ul>
</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>ES6模块中，顶层<code>this</code>指向<code>undefined</code>，不应该在顶层代码使用<code>this</code></li>
<li>一个模块就是一个独立的文件，该文件内部的所有变量，外部无法获取</li>
<li><code>export命令</code>输出的接口与其对应的值是<code>动态绑定关系</code>，即通过该接口可获取模块内部实时的值</li>
<li><code>import命令</code>大括号里的变量名必须与被导入模块对外接口的名称相同</li>
<li><code>import命令</code>输入的变量只读(本质是输入接口)，不允许在加载模块的脚本里改写接口</li>
<li><code>import命令</code>命令具有提升效果，会提升到整个模块的头部，首先执行</li>
<li>重复执行同一句<code>import语句</code>，只会执行一次</li>
<li><code>export default</code>命令只能使用一次</li>
<li><code>export default命令</code>导出的整体模块，在执行<code>import命令</code>时其后不能跟<code>大括号</code></li>
<li><code>export default命令</code>本质是输出一个名为<code>default</code>的变量，后面不能跟<code>变量声明语句</code></li>
<li><code>export default命令</code>本质是将后面的值赋给名为<code>default</code>的变量，可直接将值写在其后</li>
<li><code>export default命令</code>和<code>export {}命令</code>可同时存在，对应<code>复合导入</code></li>
<li><code>export命令</code>和<code>import命令</code>可出现在模块任何位置，只要处于模块顶层即可，不能处于块级作用域</li>
<li><code>import()</code>加载模块成功后，此模块会作为一个对象，当作<code>then()</code>的参数，可使用<code>对象解构赋值</code>来获取输出接口</li>
<li>同时动态加载多个模块时，可使用<code>Promise.all()</code>和<code>import()</code>相结合来实现</li>
<li><code>import()</code>和结合<code>async/await</code>来书写同步操作的代码</li>
</ul>
<blockquote>
<p>单例模式：跨模块常量</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量跨文件共享</span></span><br><span class="line"><span class="comment">// person.js</span></span><br><span class="line"><span class="keyword">const</span> NAME = <span class="string">"Bruce"</span>;</span><br><span class="line"><span class="keyword">const</span> AGE = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">const</span> SEX = <span class="string">"male"</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; AGE, NAME, SEX &#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file1.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; AGE &#125; <span class="keyword">from</span> <span class="string">"person"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(AGE);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file2.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; AGE, NAME, SEX &#125; <span class="keyword">from</span> <span class="string">"person"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(AGE, NAME, SEX);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认导入互换整体导入</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Person <span class="keyword">from</span> <span class="string">"person"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(Person.AGE);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Person <span class="keyword">from</span> <span class="string">"person"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(Person.default.AGE);</span><br></pre></td></tr></table></figure>

<h2 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a><code>Iterator</code></h2><ul>
<li><p>定义：为各种不同的数据结构提供统一的访问机制</p>
</li>
<li><p>原理：创建一个指针指向首个成员，按照次序使用<code>next()</code>指向下一个成员，直接到结束位置(数据结构只要部署<code>Iterator接口</code>就可完成遍历操作)</p>
</li>
<li><p>作用</p>
</li>
<li><ul>
<li>为各种数据结构提供一个统一的简便的访问接口</li>
<li>使得数据结构成员能够按某种次序排列</li>
<li>ES6创造了新的遍历命令<code>for-of</code>，<code>Iterator接口</code>主要供<code>for-of</code>消费</li>
</ul>
</li>
<li><p>形式：<code>for-of</code>(自动去寻找Iterator接口)</p>
</li>
<li><p>数据结构</p>
</li>
<li><ul>
<li>集合：<code>Array</code>、<code>Object</code>、<code>Set</code>、<code>Map</code></li>
<li>原生具备接口的数据结构：<code>String</code>、<code>Array</code>、<code>Set</code>、<code>Map</code>、<code>TypedArray</code>、<code>Arguments</code>、<code>NodeList</code></li>
</ul>
</li>
<li><p>部署：默认部署在<code>Symbol.iterator</code>(具备此属性被认为<code>可遍历的iterable</code>)</p>
</li>
<li><p>遍历器对象</p>
</li>
<li><ul>
<li><strong>next()</strong>：下一步操作，返回<code>{ done, value }</code>(必须部署)</li>
<li><strong>return()</strong>：<code>for-of</code>提前退出调用，返回<code>{ done: true }</code></li>
<li><strong>throw()</strong>：不使用，配合<code>Generator函数</code>使用</li>
</ul>
</li>
</ul>
<blockquote>
<p>for of 循环</p>
</blockquote>
<ul>
<li><p>定义：调用<code>Iterator接口</code>产生遍历器对象(<code>for-of</code>内部调用数据结构的<code>Symbol.iterator()</code>)</p>
</li>
<li><p>遍历字符串：<code>for-in</code>获取<code>索引</code>，<code>for-of</code>获取<code>值</code>(可识别32位UTF-16字符)</p>
</li>
<li><p>遍历数组：<code>for-in</code>获取<code>索引</code>，<code>for-of</code>获取<code>值</code></p>
</li>
<li><p>遍历对象：<code>for-in</code>获取<code>键</code>，<code>for-of</code>需自行部署</p>
</li>
<li><p>遍历Set：<code>for-of</code>获取<code>值</code> =&gt; <code>for (const v of set)</code></p>
</li>
<li><p>遍历Map：<code>for-of</code>获取<code>键值对</code> =&gt;  <code>for (const [k, v] of map)</code></p>
</li>
<li><p>遍历类数组：<code>包含length的对象</code>、<code>Arguments对象</code>、<code>NodeList对象</code>(无<code>Iterator接口的类数组</code>可用<code>Array.from()</code>转换)</p>
</li>
<li><p>计算生成数据结构：<code>Array</code>、<code>Set</code>、<code>Map</code></p>
</li>
<li><ul>
<li><strong>keys()</strong>：返回遍历器对象，遍历所有的键</li>
<li><strong>values()</strong>：返回遍历器对象，遍历所有的值</li>
<li><strong>entries()</strong>：返回遍历器对象，遍历所有的键值对</li>
</ul>
</li>
<li><p>与<code>for-in</code>区别</p>
</li>
<li><ul>
<li>有着同<code>for-in</code>一样的简洁语法，但没有<code>for-in</code>那些缺点、</li>
<li>不同于<code>forEach()</code>，它可与<code>break</code>、<code>continue</code>和<code>return</code>配合使用</li>
<li>提供遍历所有数据结构的统一操作接口</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>改写具有<code>Iterator接口</code>的数据结构的<code>Symbol.iterator</code></li>
<li>解构赋值：对Set进行结构</li>
<li>扩展运算符：将部署<code>Iterator接口</code>的数据结构转为数组</li>
<li>yield<em>：`yield</em>`后跟一个可遍历的数据结构，会调用其遍历器接口</li>
<li>接受数组作为参数的函数：<code>for-of</code>、<code>Array.from()</code>、<code>new Set()</code>、<code>new WeakSet()</code>、<code>new Map()</code>、<code>new WeakMap()</code>、<code>Promise.all()</code>、<code>Promise.race()</code></li>
</ul>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a><code>Promise</code></h2><ul>
<li><p>定义：包含异步操作结果的对象</p>
</li>
<li><p>状态</p>
</li>
<li><ul>
<li><strong>进行中</strong>：<code>pending</code></li>
<li><strong>已成功</strong>：<code>resolved</code></li>
<li><strong>已失败</strong>：<code>rejected</code></li>
</ul>
</li>
<li><p>特点</p>
</li>
<li><ul>
<li>对象的状态不受外界影响</li>
<li>一旦状态改变就不会再变，任何时候都可得到这个结果</li>
</ul>
</li>
<li><p>声明：<code>new Promise((resolve, reject) =&gt; {})</code></p>
</li>
<li><p>出参</p>
</li>
<li><ul>
<li><strong>resolve</strong>：将状态从<code>未完成</code>变为<code>成功</code>，在异步操作成功时调用，并将异步操作的结果作为参数传递出去</li>
<li><strong>reject</strong>：将状态从<code>未完成</code>变为<code>失败</code>，在异步操作失败时调用，并将异步操作的错误作为参数传递出去</li>
</ul>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>Promise实例</strong>：原封不动地返回入参</li>
<li><strong>Thenable对象</strong>：将此对象转为Promise对象并返回(Thenable为包含<code>then()</code>的对象，执行<code>then()</code>相当于执行此对象的<code>then()</code>)</li>
<li><strong>不具有then()的对象</strong>：将此对象转为Promise对象并返回，状态为<code>resolved</code></li>
<li><strong>不带参数</strong>：返回Promise对象，状态为<code>resolved</code></li>
<li>入参：具有<code>Iterator接口</code>的数据结构</li>
<li>成功：只有全部实例状态变成<code>resolved</code>，最终状态才会变成<code>resolved</code></li>
<li>失败：其中一个实例状态变成<code>rejected</code>，最终状态就会变成<code>rejected</code></li>
<li><strong>第一参数</strong>：状态变为<code>resolved</code>时调用</li>
<li><strong>第二参数</strong>：状态变为<code>rejected</code>时调用(可选)</li>
<li><strong>then()</strong>：分别指定<code>resolved状态</code>和<code>rejected状态</code>的回调函数</li>
<li><strong>catch()</strong>：指定发生错误时的回调函数</li>
<li><strong>Promise.all()</strong>：将多个实例包装成一个新实例，返回全部实例状态变更后的结果数组(齐变更再返回)</li>
<li><strong>Promise.race()</strong>：将多个实例包装成一个新实例，返回全部实例状态优先变更后的结果(先变更先返回)</li>
<li><strong>Promise.resolve()</strong>：将对象转为Promise对象(等价于<code>new Promise(resolve =&gt; resolve())</code>)</li>
<li><strong>Promise.reject()</strong>：将对象转为状态为<code>rejected</code>的Promise对象(等价于<code>new Promise((resolve, reject) =&gt; reject())</code>)</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>加载图片</li>
<li>AJAX转Promise对象</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>只有异步操作的结果可决定当前状态是哪一种，其他操作都无法改变这个状态</li>
<li>状态改变只有两种可能：从<code>pending</code>变为<code>resolved</code>、从<code>pending</code>变为<code>rejected</code></li>
<li>一旦新建<code>Promise对象</code>就会立即执行，无法中途取消</li>
<li>不设置回调函数，内部抛错不会反应到外部</li>
<li>当处于<code>pending</code>时，无法得知目前进展到哪一个阶段</li>
<li>实例状态变为<code>resolved</code>或<code>rejected</code>时，会触发<code>then()</code>绑定的回调函数</li>
<li><code>resolve()</code>和<code>reject()</code>的执行总是晚于本轮循环的同步任务</li>
<li><code>then()</code>返回新实例，其后可再调用另一个<code>then()</code></li>
<li><code>then()</code>运行中抛出错误会被<code>catch()</code>捕获</li>
<li><code>reject()</code>的作用等同于抛出错误</li>
<li>实例状态已变成<code>resolved</code>时，再抛出错误是无效的，不会被捕获，等于没有抛出</li>
<li>实例状态的错误具有<code>冒泡</code>性质，会一直向后传递直到被捕获为止，错误总是会被下一个<code>catch()</code>捕获</li>
<li>不要在<code>then()</code>里定义<code>rejected</code>状态的回调函数(不使用其第二参数)</li>
<li>建议使用<code>catch()</code>捕获错误，不要使用<code>then()</code>第二个参数捕获</li>
<li>没有使用<code>catch()</code>捕获错误，实例抛错不会传递到外层代码，即<code>不会有任何反应</code></li>
<li>作为参数的实例定义了<code>catch()</code>，一旦被<code>rejected</code>并不会触发<code>Promise.all()</code>的<code>catch()</code></li>
<li><code>Promise.reject()</code>的参数会原封不动地作为<code>rejected</code>的理由，变成后续方法的参数</li>
</ul>
<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a><code>Generator</code></h2><ul>
<li><p>定义：封装多个内部状态的异步编程解决方案</p>
</li>
<li><p>形式：调用<code>Generator函数</code>(该函数不执行)返回指向内部状态的指针对象(不是运行结果)</p>
</li>
<li><p>声明：<code>function* Func() {}</code></p>
</li>
<li><p>方法</p>
</li>
<li><ul>
<li><strong>next()</strong>：使指针移向下一个状态，返回<code>{ done, value }</code>(入参会被当作上一个<code>yield命令表达式</code>的返回值)</li>
<li><strong>return()</strong>：返回指定值且终结遍历<code>Generator函数</code>，返回<code>{ done: true, value: 入参 }</code></li>
<li><strong>throw()</strong>：在<code>Generator函数</code>体外抛出错误，在<code>Generator函数</code>体内捕获错误，返回自定义的<code>new Errow()</code></li>
</ul>
</li>
<li><p>yield命令：声明内部状态的值(<code>return</code>声明结束返回的值)</p>
</li>
<li><ul>
<li>遇到<code>yield命令</code>就暂停执行后面的操作，并将其后表达式的值作为返回对象的<code>value</code></li>
<li>下次调用<code>next()</code>时，再继续往下执行直到遇到下一个<code>yield命令</code></li>
<li>没有再遇到<code>yield命令</code>就一直运行到<code>Generator函数</code>结束，直到遇到<code>return语句</code>为止并将其后表达式的值作为返回对象的<code>value</code></li>
<li><code>Generator函数</code>没有<code>return语句</code>则返回对象的<code>value</code>为<code>undefined</code></li>
</ul>
</li>
<li><p>yield*命令：在一个<code>Generator函数</code>里执行另一个<code>Generator函数</code>(后随具有<code>Iterator接口</code>的数据结构)</p>
</li>
<li><p>遍历：通过<code>for-of</code>自动调用<code>next()</code></p>
</li>
<li><p>作为对象属性</p>
</li>
<li><ul>
<li>全写：<code>const obj = { method: function*() {} }</code></li>
<li>简写：<code>const obj = { * method() {} }</code></li>
</ul>
</li>
<li><p>上下文：执行产生的<code>上下文环境</code>一旦遇到<code>yield命令</code>就会暂时退出堆栈(但并不消失)，所有变量和对象会冻结在<code>当前状态</code>，等到对它执行<code>next()</code>时，这个<code>上下文环境</code>又会重新加入调用栈，冻结的变量和对象恢复执行</p>
</li>
</ul>
<blockquote>
<p>方法异同</p>
</blockquote>
<ul>
<li><p>相同点：<code>next()</code>、<code>throw()</code>、<code>return()</code>本质上是同一件事，作用都是让函数恢复执行且使用不同的语句替换<code>yield命令</code></p>
</li>
<li><p>不同点</p>
</li>
<li><ul>
<li><strong>next()</strong>：将<code>yield命令</code>替换成一个<code>值</code></li>
<li><strong>return()</strong>：将<code>yield命令</code>替换成一个<code>return语句</code></li>
<li><strong>throw()</strong>：将<code>yield命令</code>替换成一个<code>throw语句</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<ul>
<li>异步操作同步化表达</li>
<li>控制流管理</li>
<li>为对象部署Iterator接口：把<code>Generator函数</code>赋值给对象的<code>Symbol.iterator</code>，从而使该对象具有<code>Iterator接口</code></li>
<li>作为具有Iterator接口的数据结构</li>
</ul>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li>每次调用<code>next()</code>，指针就从<code>函数头部</code>或<code>上次停下的位置</code>开始执行，直到遇到下一个<code>yield命令</code>或<code>return语句</code>为止</li>
<li>函数内部可不用<code>yield命令</code>，但会变成单纯的<code>暂缓执行函数</code>(还是需要<code>next()</code>触发)</li>
<li><code>yield命令</code>是暂停执行的标记，<code>next()</code>是恢复执行的操作</li>
<li><code>yield命令</code>用在另一个表达式中必须放在<code>圆括号</code>里</li>
<li><code>yield命令</code>用作函数参数或放在赋值表达式的右边，可不加<code>圆括号</code></li>
<li><code>yield命令</code>本身没有返回值，可认为是返回<code>undefined</code></li>
<li><code>yield命令表达式</code>为惰性求值，等<code>next()</code>执行到此才求值</li>
<li>函数调用后生成遍历器对象，此对象的<code>Symbol.iterator</code>是此对象本身</li>
<li>在函数运行的不同阶段，通过<code>next()</code>从外部向内部注入不同的值，从而调整函数行为</li>
<li>首个<code>next()</code>用来启动遍历器对象，后续才可传递参数</li>
<li>想首次调用<code>next()</code>时就能输入值，可在函数外面再包一层</li>
<li>一旦<code>next()</code>返回对象的<code>done</code>为<code>true</code>，<code>for-of</code>遍历会中止且不包含该返回对象</li>
<li>函数内部部署<code>try-finally</code>且正在执行<code>try</code>，那么<code>return()</code>会导致立刻进入<code>finally</code>，执行完<code>finally</code>以后整个函数才会结束</li>
<li>函数内部没有部署<code>try-catch</code>，<code>throw()</code>抛错将被外部<code>try-catch</code>捕获</li>
<li><code>throw()</code>抛错要被内部捕获，前提是必须<code>至少执行过一次next()</code></li>
<li><code>throw()</code>被捕获以后，会附带执行下一条<code>yield命令</code></li>
<li>函数还未开始执行，这时<code>throw()</code>抛错只可能抛出在函数外部</li>
</ul>
<blockquote>
<p>首次next可以传值</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Wrapper</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> generator = func(...args);</span><br><span class="line">        generator.next();</span><br><span class="line">        <span class="keyword">return</span> generator;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> print = Wrapper(<span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`First Input: <span class="subst">$&#123;<span class="keyword">yield</span>&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"done"</span>;</span><br><span class="line">&#125;);</span><br><span class="line">print().next(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure>

<h1 id="ES2016"><a href="#ES2016" class="headerlink" title="ES2016"></a>ES2016</h1><h2 id="数值扩展-1"><a href="#数值扩展-1" class="headerlink" title="数值扩展"></a><code>数值扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>指数运算符(\</strong>)**：数值求幂(相当于<code>Math.pow()</code>)</li>
</ul>
<p>##　<code>数组扩展</code></p>
<ul>
<li><input checked disabled type="checkbox"> <strong>includes()</strong>：是否存在指定成员</li>
</ul>
<h1 id="ES2017"><a href="#ES2017" class="headerlink" title="ES2017"></a>ES2017</h1><h2 id="声明-1"><a href="#声明-1" class="headerlink" title="声明"></a><code>声明</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>共享内存和原子操作</strong>：由全局对象<code>SharedArrayBuffer</code>和<code>Atomics</code>实现，将数据存储在一块共享内存空间中，这些数据可在<code>JS主线程</code>和<code>web-worker线程</code>之间共享</li>
</ul>
<h2 id="字符串扩展-1"><a href="#字符串扩展-1" class="headerlink" title="字符串扩展"></a><code>字符串扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>padStart()</strong>：把指定字符串填充到字符串头部，返回新字符串</li>
<li><input checked disabled type="checkbox"> <strong>padEnd()</strong>：把指定字符串填充到字符串尾部，返回新字符串</li>
</ul>
<h2 id="对象扩展-1"><a href="#对象扩展-1" class="headerlink" title="对象扩展"></a><code>对象扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>Object.getOwnPropertyDescriptors()</strong>：返回对象所有自身属性(非继承属性)的描述对象</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.values()</strong>：返回以值组成的数组</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Object.entries()</strong>：返回以键和值组成的数组</p>
</li>
</ul>
<h2 id="函数扩展-1"><a href="#函数扩展-1" class="headerlink" title="函数扩展"></a><code>函数扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>函数参数尾逗号</strong>：允许函数最后一个参数有尾逗号</li>
</ul>
<h2 id="Async"><a href="#Async" class="headerlink" title="Async"></a><code>Async</code></h2><ul>
<li><p>定义：使异步函数以同步函数的形式书写(Generator函数语法糖)</p>
</li>
<li><p>原理：将<code>Generator函数</code>和自动执行器<code>spawn</code>包装在一个函数里</p>
</li>
<li><p>形式：将<code>Generator函数</code>的<code>*</code>替换成<code>async</code>，将<code>yield</code>替换成<code>await</code></p>
</li>
<li><p>声明</p>
</li>
<li><ul>
<li>具名函数：<code>async function Func() {}</code></li>
<li>函数表达式：<code>const func = async function() {}</code></li>
<li>箭头函数：<code>const func = async() =&gt; {}</code></li>
<li>对象方法：<code>const obj = { async func() {} }</code></li>
<li>类方法：<code>class Cla { async Func() {} }</code></li>
</ul>
</li>
<li><p>await命令：等待当前Promise对象状态变更完毕</p>
</li>
<li><ul>
<li>正常情况：后面是Promise对象则返回其结果，否则返回对应的值</li>
<li>后随<code>Thenable对象</code>：将其等同于Promise对象返回其结果</li>
</ul>
</li>
<li><p>错误处理：将<code>await命令Promise对象</code>放到<code>try-catch</code>中(可放多个)</p>
</li>
</ul>
<blockquote>
<p>Async对Generator改进</p>
</blockquote>
<ul>
<li>内置执行器</li>
<li>更好的语义</li>
<li>更广的适用性</li>
<li>返回值是Promise对象</li>
</ul>
<blockquote>
<p>应用场景</p>
</blockquote>
<p>按顺序完成异步操作</p>
<blockquote>
<p>重点难点</p>
</blockquote>
<ul>
<li><p><code>Async函数</code>返回<code>Promise对象</code>，可使用<code>then()</code>添加回调函数</p>
</li>
<li><p>内部<code>return返回值</code>会成为后续<code>then()</code>的出参</p>
</li>
<li><p>内部抛出错误会导致返回的Promise对象变为<code>rejected状态</code>，被<code>catch()</code>接收到</p>
</li>
<li><p>返回的Promise对象必须等到内部所有<code>await命令Promise对象</code>执行完才会发生状态改变，除非遇到<code>return语句</code>或<code>抛出错误</code></p>
</li>
<li><p>任何一个<code>await命令Promise对象</code>变为<code>rejected状态</code>，整个<code>Async函数</code>都会中断执行</p>
</li>
<li><p>希望即使前一个异步操作失败也不要中断后面的异步操作</p>
</li>
<li><ul>
<li>将<code>await命令Promise对象</code>放到<code>try-catch</code>中</li>
<li><code>await命令Promise对象</code>跟一个<code>catch()</code></li>
</ul>
</li>
<li><p><code>await命令Promise对象</code>可能变为<code>rejected状态</code>，最好把其放到<code>try-catch</code>中</p>
</li>
<li><p>多个<code>await命令Promise对象</code>若不存在继发关系，最好让它们同时触发</p>
</li>
<li><p><code>await命令</code>只能用在<code>Async函数</code>之中，否则会报错</p>
</li>
<li><p>数组使用<code>forEach()</code>执行<code>async/await</code>会失效，可使用<code>for-of</code>和<code>Promise.all()</code>代替</p>
</li>
</ul>
<h1 id="ES2018"><a href="#ES2018" class="headerlink" title="ES2018"></a>ES2018</h1><h2 id="字符串扩展-2"><a href="#字符串扩展-2" class="headerlink" title="字符串扩展"></a><code>字符串扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>放松对标签模板里字符串转义的限制</strong>：遇到不合法的字符串转义返回<code>undefined</code>，并且从<code>raw</code>上可获取原字符串</li>
</ul>
<h2 id="对象扩展-2"><a href="#对象扩展-2" class="headerlink" title="对象扩展"></a><code>对象扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>扩展运算符(…)</strong>：转换对象为用逗号分隔的参数序列(<code>{ ...obj }</code>，相当于<code>rest/spread参数</code>的逆运算)</li>
</ul>
<blockquote>
<p>扩展应用</p>
</blockquote>
<ul>
<li>克隆对象：<code>const obj = { __proto__: Object.getPrototypeOf(obj1), ...obj1 }</code></li>
<li>合并对象：<code>const obj = { ...obj1, ...obj2 }</code></li>
<li>转换字符串为对象：<code>{ ...&quot;hello&quot; }</code></li>
<li>转换数组为对象：<code>{ ...[1, 2] }</code></li>
<li>与对象解构赋值结合：<code>const { x, ...rest/spread } = { x: 1, y: 2, z: 3 }</code>(不能复制继承自原型对象的属性)</li>
<li>修改现有对象部分属性：<code>const obj = { x: 1, ...{ x: 2 } }</code></li>
</ul>
<h2 id="正则扩展"><a href="#正则扩展" class="headerlink" title="正则扩展"></a><code>正则扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>s修饰符</strong>：dotAll模式修饰符，使<code>.</code>匹配任意单个字符(<code>dotAll模式</code>)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>dotAll</strong>：是否设置<code>s修饰符</code></p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>后行断言</strong>：<code>x</code>只有在<code>y</code>后才匹配</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>后行否定断言</strong>：<code>x</code>只有不在<code>y</code>后才匹配</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>Unicode属性转义</strong>：匹配符合<code>Unicode某种属性</code>的所有字符</p>
</li>
<li><ul>
<li>正向匹配：<code>\p{PropRule}</code></li>
<li>反向匹配：<code>\P{PropRule}</code></li>
<li>限制：<code>\p{...}</code>和<code>\P{...}</code>只对<code>Unicode字符</code>有效，使用时需加上<code>u修饰符</code></li>
</ul>
</li>
<li><input checked disabled type="checkbox"> <p><strong>具名组匹配</strong>：为每组匹配指定名字(<code>?&lt;GroupName&gt;</code>)</p>
</li>
<li><ul>
<li>声明：<code>const time = &quot;2017-09-11&quot;</code>、<code>const regexp = /(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/u</code></li>
<li>匹配：<code>time.replace(regexp, &quot;$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;&quot;)</code></li>
<li>形式：<code>str.exec().groups.GroupName</code></li>
<li>解构赋值替换</li>
</ul>
</li>
</ul>
<h2 id="Promise-1"><a href="#Promise-1" class="headerlink" title="Promise"></a><code>Promise</code></h2><ul>
<li><strong>finally()</strong>：指定不管最后状态如何都会执行的回调函数</li>
</ul>
<h2 id="Async-1"><a href="#Async-1" class="headerlink" title="Async"></a><code>Async</code></h2><p><strong>异步迭代器(for-wait-of)</strong>：，循环等待每个<code>Promise对象</code>变为<code>resolved状态</code>才进入下一步</p>
<h1 id="ES2019"><a href="#ES2019" class="headerlink" title="ES2019"></a>ES2019</h1><h2 id="字符串扩展-3"><a href="#字符串扩展-3" class="headerlink" title="字符串扩展"></a><code>字符串扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>直接输入U+2028和U+2029</strong>：字符串可直接输入<code>行分隔符</code>和<code>段分隔符</code></li>
<li><input checked disabled type="checkbox"> <strong>JSON.stringify()改造</strong>：可返回不符合UTF-8标准的字符串</li>
<li><input checked disabled type="checkbox"> <strong>trimStart()</strong>：消除字符串头部空格，返回新字符串</li>
<li><input checked disabled type="checkbox"> <strong>trimEnd()</strong>：消除字符串尾部空格，返回新字符串</li>
</ul>
<h2 id="对象扩展-3"><a href="#对象扩展-3" class="headerlink" title="对象扩展"></a><code>对象扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>Object.fromEntries()</strong>：返回以键和值组成的对象(<code>Object.entries()</code>的逆操作)</li>
</ul>
<h2 id="数组扩展-1"><a href="#数组扩展-1" class="headerlink" title="数组扩展"></a><code>数组扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>flat()</strong>：扁平化数组，返回新数组</li>
<li><input checked disabled type="checkbox"> <strong>flatMap()</strong>：映射且扁平化数组，返回新数组(只能展开一层数组)</li>
</ul>
<h2 id="函数扩展-2"><a href="#函数扩展-2" class="headerlink" title="函数扩展"></a><code>函数扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>toString()改造</strong>：返回函数原始代码(与编码一致)</li>
<li><input checked disabled type="checkbox"> <strong>catch()参数可省略</strong>：<code>catch()</code>中的参数可省略</li>
</ul>
<h2 id="Symbol-1"><a href="#Symbol-1" class="headerlink" title="Symbol"></a><code>Symbol</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>description</strong>：返回<code>Symbol值</code>的描述</p>
<h1 id="ES提案"><a href="#ES提案" class="headerlink" title="ES提案"></a><strong>ES提案</strong></h1></li>
</ul>
<h2 id="声明-2"><a href="#声明-2" class="headerlink" title="声明"></a><code>声明</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>globalThis对象</strong>：作为顶层对象，指向全局环境下的<code>this</code></li>
<li><input checked disabled type="checkbox"> <strong>do表达式</strong>：封装块级作用域的操作，返回内部最后执行表达式的值(<code>do{}</code>)</li>
<li><input checked disabled type="checkbox"> <strong>throw表达式</strong>：直接使用<code>throw new Error()</code>，无需<code>()</code>或<code>{}</code>包括</li>
<li><input checked disabled type="checkbox"> <strong>!#命令</strong>：指定脚本执行器(写在文件首行)</li>
</ul>
<h2 id="数值扩展-2"><a href="#数值扩展-2" class="headerlink" title="数值扩展"></a><code>数值扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>数值分隔符(_)</strong>：使用<code>_</code>作为千分位分隔符(增加数值的可读性)</li>
<li><input checked disabled type="checkbox"> <strong>BigInt()</strong>：创建任何位数的整数(新增的数据类型，使用<code>n</code>结尾)</li>
</ul>
<h2 id="对象扩展-4"><a href="#对象扩展-4" class="headerlink" title="对象扩展"></a><code>对象扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>链判断操作符(?.)</strong>：是否存在对象属性(不存在返回<code>undefined</code>且不再往下执行)</li>
<li><input checked disabled type="checkbox"> <strong>空判断操作符(??)</strong>：是否值为<code>undefined</code>或<code>null</code>，是则使用默认值</li>
</ul>
<h2 id="函数扩展-3"><a href="#函数扩展-3" class="headerlink" title="函数扩展"></a><code>函数扩展</code></h2><ul>
<li><input checked disabled type="checkbox"> <p><strong>函数部分执行</strong>：复用函数功能(<code>?</code>表示单个参数占位符，<code>...</code>表示多个参数占位符)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>管道操作符(|&gt;)</strong>：把左边表达式的值传入右边的函数进行求值(<code>f(x)</code> =&gt; <code>x |&gt; f</code>)</p>
</li>
<li><input checked disabled type="checkbox"> <p><strong>绑定运算符(::)</strong>：函数绑定(左边是对象右边是函数，取代<code>bind</code>、<code>apply</code>、<code>call</code>调用)</p>
</li>
<li><ul>
<li>bind：<code>bar.bind(foo)</code> =&gt; <code>foo::bar</code></li>
<li>apply：<code>bar.apply(foo, arguments)</code> =&gt; <code>foo::bar(...arguments)</code></li>
</ul>
</li>
</ul>
<h2 id="Proxy-1"><a href="#Proxy-1" class="headerlink" title="Proxy"></a><code>Proxy</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>Promise.try()</strong>：不想区分是否同步异步函数，包装函数为实例，使用<code>then()</code>指定下一步流程，使用<code>catch()</code>捕获错误</li>
</ul>
<h2 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a><code>Realm</code></h2><ul>
<li>定义：提供<code>沙箱功能</code>，允许隔离代码，防止被隔离的代码拿到全局对象</li>
<li>声明：<code>new Realm().global</code></li>
</ul>
<h2 id="Class-1"><a href="#Class-1" class="headerlink" title="Class"></a><code>Class</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>静态属性</strong>：使用<code>static</code>定义属性，该属性<code>不会被实例继承</code>，只能通过类来调用</li>
<li><input checked disabled type="checkbox"> <strong>私有属性</strong>：使用<code>#</code>定义属性，该属性只能在类内部访问</li>
<li><input checked disabled type="checkbox"> <strong>私有方法</strong>：使用<code>#</code>定义方法，该方法只能在类内部访问</li>
<li><input checked disabled type="checkbox"> <strong>装饰器</strong>：使用<code>@</code>注释或修改类和类方法</li>
</ul>
<h2 id="Module-1"><a href="#Module-1" class="headerlink" title="Module"></a><code>Module</code></h2><ul>
<li><p><strong>import()</strong>：动态导入(返回<code>Primise</code>)</p>
</li>
<li><ul>
<li>背景：<code>import命令</code>被JS引擎静态分析，先于模块内的其他语句执行，无法取代<code>require()</code>的动态加载功能，提案建议引入<code>import()</code>来代替<code>require()</code></li>
<li>位置：可在任何地方使用</li>
<li>区别：<code>require()</code>是<strong>同步加载</strong>，<code>import()</code>是<strong>异步加载</strong></li>
<li>场景：按需加载、条件加载、模块路径动态化</li>
</ul>
</li>
<li><p><strong>import.meta</strong>：返回脚本元信息</p>
</li>
</ul>
<h2 id="Async-2"><a href="#Async-2" class="headerlink" title="Async"></a><code>Async</code></h2><ul>
<li><input checked disabled type="checkbox"> <strong>顶层Await</strong>：允许在模块的顶层独立使用<code>await命令</code>(借用<code>await</code>解决模块异步加载的问题)</li>
</ul>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/26/应该知道的一些ES6基础知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/26/应该知道的一些ES6基础知识/" class="post-title-link" itemprop="url">应该知道的一些ES6基础知识</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-26 21:41:34 / 修改时间：21:45:18" itemprop="dateCreated datePublished" datetime="2019-11-26T21:41:34+08:00">2019-11-26</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在 freeCodeCamp 社区阅读<a href="https://link.zhihu.com/?target=https%3A//chinese.freecodecamp.org/forum/t/topic/557" target="_blank" rel="noopener">原文</a>。</p>
<p>ES6 为 JavaScript 这门语言带来了很多特性。一些新的语法可以让你写出更具表现力的代码；一些特性完善了函数式编程的工具箱；而也有一些特性颇具争议。</p>
<h2 id="let-和-const"><a href="#let-和-const" class="headerlink" title="let 和 const"></a>let 和 const</h2><p>现在有两种新的声明变量的方式（let 和 const），再加上过去使用的方式（var）。</p>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p><code>let</code> 在当前作用域中声明并可以选择初始化变量。当前作用域可以是任意一个模块，一个函数，或者一个代码块。未被初始化的变量的值是 <code>undefined</code>。</p>
<p>作用域定义了一个变量的生命周期和访问权限。我们无法在变量声明的作用域之外访问它们。</p>
<p>下面这段代码强调了 <code>let</code> 的块级作用域：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">&#123; </span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<p>相反，使用 <code>var</code> 声明的变量则不具备块及作用域：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line">&#123; </span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p>在 <code>for</code> 循环语句中，使用 <code>let</code> 声明变量将会为每一次迭代创建一个当前块级作用域的本地新变量。以下这个循环在五个不同的 <code>i</code> 变量上创建了五个闭包。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i); <span class="comment">//0 1 2 3 4</span></span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>同样的代码如果换成 <code>var</code> 声明将会创建五个使用同一个变量的闭包，所以所有的闭包函数都会输出 i 变量最终的值。</p>
<p><code>log()</code> 函数是一个闭包。更多关于闭包的内容，可以参看 <a href="https://link.zhihu.com/?target=https%3A//www.freecodecamp.org/news/discover-the-power-of-closures-in-javascript-5c472a7765d7/" target="_blank" rel="noopener">Discover the power of closures in JavaScript</a>。</p>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p><code>const</code> 声明的变量不能再重新赋值。只有当赋值是不可变的时，它才会变成常量。</p>
<p>不可变的值是指那些一旦创建，就不能再改变的值。原始值是不可变的，对象是可变的。</p>
<p><code>const</code> 冻结变量，而 <code>Object.freeze()</code> 冻结对象。</p>
<p>使用 <code>const</code> 声明变量必须强制进行初始化操作。</p>
<p><strong>译注：</strong> <code>const</code> 初始化对象时，不可变的是对象的内存引用地址，仍然可以对对象进行属性操作。当初始化原始值（字符串，数字，布尔值）时，这些值由于不可变更，所以成为常量。</p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>在有模块之前，在任何函数外部声明的变量都是全局变量。</p>
<p>在模块里，在任何函数外部声明的变量会隐藏起来，除非显式地导出，否则其他模块无法访问。</p>
<p>导出操作让其他模块可以访问模块内的函数或者对象。在下面例子中，我从不同的模块导出了不同的函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//module "./TodoStore.js"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoStore</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//module "./UserStore.js"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">UserStore</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>导入操作让当前模块可以访问其他模块内的函数或者对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TodoStore <span class="keyword">from</span> <span class="string">"./TodoStore"</span>;</span><br><span class="line"><span class="keyword">import</span> UserStore <span class="keyword">from</span> <span class="string">"./UserStore"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoStore = TodoStore();</span><br><span class="line"><span class="keyword">const</span> userStore = UserStore();</span><br></pre></td></tr></table></figure>

<h2 id="展开语法-Spread-剩余参数-Rest"><a href="#展开语法-Spread-剩余参数-Rest" class="headerlink" title="展开语法(Spread)/剩余参数(Rest)"></a>展开语法(Spread)/剩余参数(Rest)</h2><p>根据使用的场景，<code>...</code> 操作符可以是展开操作符或者剩余参数。请看下面这个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, ...numbers];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>这是展开操作符。现在看另一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">x,y, ...arr</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr)</span><br><span class="line">&#125;</span><br><span class="line">process(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"><span class="comment">//[3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processArray</span>(<span class="params">...arr</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr)</span><br><span class="line">&#125;</span><br><span class="line">processArray(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"><span class="comment">//[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>这是剩余参数。</p>
<h3 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h3><p>使用剩余参数，我们可以替换掉 <code>arguments</code> 这个虚拟参数。剩余参数是一个数组，而 <code>arguments</code> 不是。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addNumber</span>(<span class="params">total, value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> total + value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> args.reduce(addNumber, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<h3 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h3><p>展开操作符让对象和数组的克隆变得更简单和更具表现力。</p>
<p>对象属性的展开操作符是 ES2018 的一部分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> book = &#123; <span class="attr">title</span>: <span class="string">"JavaScript: The Good Parts"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//clone with Object.assign()</span></span><br><span class="line"><span class="keyword">const</span> clone = <span class="built_in">Object</span>.assign(&#123;&#125;, book);</span><br><span class="line"></span><br><span class="line"><span class="comment">//clone with spread operator</span></span><br><span class="line"><span class="keyword">const</span> clone = &#123; ...book &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span> ,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//clone with slice</span></span><br><span class="line"><span class="keyword">const</span> cloneArr = arr.slice();</span><br><span class="line"></span><br><span class="line"><span class="comment">//clone with spread operator</span></span><br><span class="line"><span class="keyword">const</span> cloneArr = [ ...arr ];</span><br></pre></td></tr></table></figure>

<p><strong>译注：</strong> spread 进行引用类型的拷贝只是浅拷贝。</p>
<h3 id="连结"><a href="#连结" class="headerlink" title="连结"></a>连结</h3><p>在下面的例子中，展开操作符用来连结数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> part1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> part2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = part1.concat(part2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [...part1, ...part2];</span><br></pre></td></tr></table></figure>

<h3 id="合并对象"><a href="#合并对象" class="headerlink" title="合并对象"></a>合并对象</h3><p>展开操作符，以及像 <code>Object.assign()</code> 方法，可以用来从至少一个对象复制属性到一个空对象上，然后合并它们的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> authorGateway = &#123; </span><br><span class="line">  getAuthors : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  editAuthor: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bookGateway = &#123; </span><br><span class="line">  getBooks : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  editBook: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//copy with Object.assign()</span></span><br><span class="line"><span class="keyword">const</span> gateway = <span class="built_in">Object</span>.assign(&#123;&#125;,</span><br><span class="line">      authorGateway, </span><br><span class="line">      bookGateway);</span><br><span class="line">      </span><br><span class="line"><span class="comment">//copy with spread operator</span></span><br><span class="line"><span class="keyword">const</span> gateway = &#123;</span><br><span class="line">   ...authorGateway,</span><br><span class="line">   ...bookGateway</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="属性简写"><a href="#属性简写" class="headerlink" title="属性简写"></a>属性简写</h2><p>考虑下面的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BookGateway</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getBooks</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">editBook</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getBooks: getBooks,</span><br><span class="line">    editBook: editBook</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有了属性简写，当属性名称和将作为属性值的变量的名称一样时，我们就可以只写一次属性键值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BookGateway</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getBooks</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">editBook</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getBooks,</span><br><span class="line">    editBook</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是另一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todoStore = TodoStore();</span><br><span class="line"><span class="keyword">const</span> userStore = UserStore();</span><br><span class="line">    </span><br><span class="line"><span class="keyword">const</span> stores = &#123;</span><br><span class="line">  todoStore,</span><br><span class="line">  userStore</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><p>看下面的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoStore</span>(<span class="params">args</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> helper = args.helper;</span><br><span class="line">  <span class="keyword">const</span> dataAccess = args.dataAccess;</span><br><span class="line">  <span class="keyword">const</span> userStore = args.userStore;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以使用解构赋值写成像这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoStore</span>(<span class="params">args</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; </span><br><span class="line">      helper, </span><br><span class="line">      dataAccess, </span><br><span class="line">      userStore &#125; = args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>甚至可以直接在参数列表中使用解构语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoStore</span>(<span class="params">&#123; helper, dataAccess, userStore &#125;</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>函数将这样调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TodoStore(&#123; </span><br><span class="line">  helper: &#123;&#125;, </span><br><span class="line">  dataAccess: &#123;&#125;, </span><br><span class="line">  userStore: &#123;&#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h2><p>函数现在可以设置参数默认值。看下面的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">message, mode = <span class="string">"Info"</span></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(mode + <span class="string">": "</span> + message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log(<span class="string">"An info"</span>);</span><br><span class="line"><span class="comment">//Info: An info</span></span><br><span class="line"></span><br><span class="line">log(<span class="string">"An error"</span>, <span class="string">"Error"</span>);</span><br><span class="line"><span class="comment">//Error: An error</span></span><br></pre></td></tr></table></figure>

<h2 id="模版字符串"><a href="#模版字符串" class="headerlink" title="模版字符串"></a>模版字符串</h2><p>模板字符串使用 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```js</span><br><span class="line">function log(message, mode= &quot;Info&quot;)&#123;</span><br><span class="line">  console.log(`$&#123;mode&#125;: $&#123;message&#125;`);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>模板字符串可以支持多行字符串定义。不过，更好的选择是将长文本信息作为资源保留在数据库中。</p>
<p>下面是一个生成跨越多行的 HTML 代码的函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createTodoItemHtml</span>(<span class="params">todo</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;li&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;<span class="subst">$&#123;todo.title&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;<span class="subst">$&#123;todo.userName&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;/li&gt;`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="更好的尾调用"><a href="#更好的尾调用" class="headerlink" title="更好的尾调用"></a>更好的尾调用</h2><blockquote>
<p>当递归调用是函数执行的最后一项操作时，递归函数是尾递归的。</p>
</blockquote>
<p>尾递归函数比非尾递归函数表现更好。尾递归调用优化不会为每次函数调用创建新的堆栈帧，而是使用一个单一的堆栈帧。（<strong>译注：</strong> 即尾递归只会使用最初函数创建的堆栈帧）</p>
<p>ES6 在严格模式下开启了尾调用优化。</p>
<p><a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/4t2j3uho/" target="_blank" rel="noopener">下面的函数</a>会从尾调用优化中受益。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params">from, to</span>) </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">const</span> n = <span class="keyword">from</span>;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; to)  <span class="keyword">return</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(n);</span><br><span class="line">  <span class="comment">//the last statement is the recursive call </span></span><br><span class="line">  print(n + <span class="number">1</span>, to); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(<span class="number">1</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<p>注： 尾调用优化现在还没有被主流浏览器支持。</p>
<p><strong>译注：</strong></p>
<p>按照阮一峰老师 <a href="https://link.zhihu.com/?target=http%3A//es6.ruanyifeng.com/%23docs/function%23%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96" target="_blank" rel="noopener">ES6 标准入门中提到的尾调用优化</a>，上面的代码其实并不会产生尾调用优化。因为 JS 中函数除非显式地指定 <code>return</code> 语句，否则函数将默认返回 <code>undefined</code>。上面示例的代码只是调用了自己，其实函数还有下一步操作，是返回 <code>undefined</code>。正确的代码应该是 <code>return print(n + 1, to)</code>。</p>
<h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p><strong>译注：</strong> Promise 的 resolve 状态这里译为解决， reject 状态译为拒绝。</p>
<blockquote>
<p>Promise 是对一次异步调用的引用。它将来可能会在某处解决或者失败。</p>
</blockquote>
<p>多个 Promise 能够更好地被组合在一起执行。正如<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/eqyhq2e3/" target="_blank" rel="noopener">下面代码</a>所示，可以很容易地在所有 Promise 都解决后调用一个函数，或者只要有一个 Promise 被解决就调用一个函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTodos</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> fetch(<span class="string">"/todos"</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUsers</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> fetch(<span class="string">"/users"</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAlbums</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> fetch(<span class="string">"/albums"</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPromises = [</span><br><span class="line">  getTodos(), </span><br><span class="line">  getUsers(), </span><br><span class="line">  getAlbums()</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all(getPromises).then(doSomethingWhenAll);</span><br><span class="line"><span class="built_in">Promise</span>.race(getPromises).then(doSomethingWhenOne);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingWhenAll</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingWhenOne</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>fetch()</code> 函数是 Fetch API 的一部分，它会返回一个 Promise。</p>
<p><code>Promise.all()</code> 返回一个 Promise，它会在所有传入的 Promise 都解决后进入解决状态。 <code>Promise.race()</code> 返回一个 Promise，一旦传入的 Promise 中有任意一个被解决或者拒绝，它就会进入解决或者拒绝状态。</p>
<p>promise 有三种状态：pending、resolved 或者 rejected。在 promise 没有返回 resolved 或者 rejected 时是 pending 状态。</p>
<p>Promise 支持链式调用，允许你通过一组函数传递数据。在<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/kgxnay46/" target="_blank" rel="noopener">下面的例子中</a>，<code>getTodos()</code> 的结果传递给 <code>toJson()</code> 作为参数传入，然后它的结果又传递给 <code>getTopPriority()</code> 作为参数传入，最后它的结果又作为参数传递给 <code>renderTodos()</code> 函数。当有错误抛出或者任一 Promise 被拒绝，<code>handleError</code> 函数会被调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getTodos()</span><br><span class="line">  .then(toJson)</span><br><span class="line">  .then(getTopPriority)</span><br><span class="line">  .then(renderTodos)</span><br><span class="line">  .catch(handleError);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toJson</span>(<span class="params">response</span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTopPriority</span>(<span class="params">todos</span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderTodos</span>(<span class="params">todos</span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleError</span>(<span class="params">error</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>在前面的示例中，<code>.then()</code> 处理了成功的场景，<code>.catch()</code> 处理了发生错误的场景。任意一步有错误抛出，调用链将跳转到链中最近的拒绝状态处理方法。</p>
<p><code>Promise.resolve()</code> 返回一个被解决的 Promise。 <code>Promise.reject()</code> 返回一个被拒绝的 Promise。</p>
<h2 id="类（Class）"><a href="#类（Class）" class="headerlink" title="类（Class）"></a>类（Class）</h2><p>ES6 中的类是使用自定义原型创建对象的语法糖。它有着比之前的构造函数更好的语法。<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/aLg8t632/" target="_blank" rel="noopener">参考下面的例子</a>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">  doSomething()&#123; <span class="built_in">console</span>.log(<span class="string">"doSomething"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> service = <span class="keyword">new</span> Service();</span><br><span class="line"><span class="built_in">console</span>.log(service.__proto__ === Service.prototype);</span><br></pre></td></tr></table></figure>

<p>所有定义在 Service 类上的方法会被添加到 <code>Service.prototype</code> 原型对象上。<code>Service</code>类的实例都有相同的原型（<code>Service.prototype</code>）。所有实例都会将方法调用代理到 <code>Service.prototype</code> 原型对象上。所有的实例都会继承定义在 <code>Service.prototype</code> 上的方法。</p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>“类可以继承自其他类”。下面是一个<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/1xo96yt8/" target="_blank" rel="noopener">继承的例子</a>，<code>SpecialService</code> 类继承自 <code>Service</code> 类：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">  doSomething()&#123; <span class="built_in">console</span>.log(<span class="string">"doSomething"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpecialService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">  doSomethingElse()&#123; <span class="built_in">console</span>.log(<span class="string">"doSomethingElse"</span>); &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> specialService = <span class="keyword">new</span> SpecialService();</span><br><span class="line">specialService.doSomething();</span><br><span class="line">specialService.doSomethingElse();</span><br></pre></td></tr></table></figure>

<p>所有定义在 <code>SpecialService</code> 类上的方法会被添加到 <code>SpecialService.prototype</code> 原型对象上。所有实例都会将方法调用会被代理到 <code>SpecialService.prototype</code> 原型对象上。如果方法在 <code>SpecialService.prototype</code> 上找不到，会继续在 <code>Service.prototype</code> 上查找，如果还找不到，则继续在 <code>Object.prototype</code> 上查找。</p>
<h3 id="类可能是一个不好的特性"><a href="#类可能是一个不好的特性" class="headerlink" title="类可能是一个不好的特性"></a>类可能是一个不好的特性</h3><p>尽管它们看上去封装好了，类的所有成员仍然是公有的。你仍然需要处理各种 <code>this</code> 这个缺失的上下文产生的问题。类暴露出去的公有 API 都是可变的。</p>
<p><code>class</code> 可能是一个不好的特性，如果你忽略 JavaScript 的函数特性的话。<code>class</code> 可能会让人觉得 JavaScript 是一门基于类的语言然而实际上它既是一门函数式编程语言，又是基于原型的语言。</p>
<p>可以使用工厂函数来创建封装的对象。看下面的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Service</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"doSomething"</span>); &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.freeze(&#123;</span><br><span class="line">     doSomething</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里所有的成员变量都默认是私有的。暴露的公有的 API 是不可变的。无需管理 <code>this</code> 产生的问题。</p>
<p>在使用框架和组件时，<code>class</code> 可以用作异常。React 就是这种情况，但在 <a href="https://link.zhihu.com/?target=https%3A//reactjs.org/docs/hooks-overview.html" target="_blank" rel="noopener">React Hooks</a> 中就不是了。</p>
<p>为什么工厂函数更好，可以参看 <a href="https://link.zhihu.com/?target=https%3A//www.freecodecamp.org/news/class-vs-factory-function-exploring-the-way-forward-73258b6a8d15/" target="_blank" rel="noopener">Class vs Factory function: exploring the way forward</a>。</p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>箭头函数快速地创建匿名函数，可以用来以更精简地语法创建较小地回调函数。</p>
<p>让我们来看一个 todo 应用的例子。一个 todo 对象有一个 <code>id</code>，一个 <code>title</code>，以及一个 <code>complete</code> 的布尔属性。现在来看下面这段只从对象中选择 <code>title</code> 属性的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> titles = todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> todo.title);</span><br></pre></td></tr></table></figure>

<p>或者下面这段只选择还未完成的待办事项的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filteredTodos = todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed);</span><br></pre></td></tr></table></figure>

<h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>箭头函数没有自己的 <code>this</code> 和 <code>arguments</code>。因此，你也许会看见箭头函数被用来解决 <code>this</code> 产生的一些问题。我认为避免这些问题的最佳方式是根本不使用 <code>this</code>。（<strong>译注：</strong> 不用妖魔化 this）</p>
<h3 id="箭头函数也可能是一个不好的特性"><a href="#箭头函数也可能是一个不好的特性" class="headerlink" title="箭头函数也可能是一个不好的特性"></a>箭头函数也可能是一个不好的特性</h3><p>在需要用到具名函数的场景时，箭头函数可能是一个不好的特性。使用箭头函数会影响代码的可读性和可维护性。看下面这段全部使用匿名箭头函数的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newTodos = todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> </span><br><span class="line">       !todo.completed &amp;&amp; todo.type === <span class="string">"RE"</span>)</span><br><span class="line">    .map(<span class="function"><span class="params">todo</span> =&gt;</span> (&#123;</span><br><span class="line">       title : todo.title,</span><br><span class="line">       userName : users[todo.userId].name</span><br><span class="line">    &#125;))</span><br><span class="line">    .sort(<span class="function">(<span class="params">todo1, todo2</span>) =&gt;</span>  </span><br><span class="line">      todo1.userName.localeCompare(todo2.userName));</span><br></pre></td></tr></table></figure>

<p>现在来看<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/pm7n2ab5/" target="_blank" rel="noopener">另一段同样逻辑的代码</a>，这段代码使用命名的纯函数进行了重构，函数的命名能帮助我们更好地理解它们：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newTodos = todos.filter(isTopPriority)</span><br><span class="line">  .map(partial(toTodoView, users))</span><br><span class="line">  .sort(ascByUserName);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTopPriority</span>(<span class="params">todo</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !todo.completed &amp;&amp; todo.type === <span class="string">"RE"</span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toTodoView</span>(<span class="params">users, todo</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    title : todo.title,</span><br><span class="line">    userName : users[todo.userId].name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ascByUserName</span>(<span class="params">todo1, todo2</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> todo1.userName.localeCompare(todo2.userName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更重要的是，匿名箭头函数将匿名显示在调用堆栈中。</p>
<p>可以参看 <a href="https://link.zhihu.com/?target=https%3A//www.freecodecamp.org/news/how-to-make-your-code-better-with-intention-revealing-function-names-6c8b5271693e/" target="_blank" rel="noopener">How to make your code better with intention-revealing function names</a>了解为什么具名函数更好。</p>
<p>更少的代码并不意味着更具可读性。通过<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/wc8be2gn/" target="_blank" rel="noopener">下面这个例子</a>看看哪一个对你更易理解：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//with arrow function</span></span><br><span class="line"><span class="keyword">const</span> prop = <span class="function"><span class="params">key</span> =&gt;</span> <span class="function"><span class="params">obj</span> =&gt;</span> obj[key];</span><br><span class="line"></span><br><span class="line"><span class="comment">//with function keyword</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prop</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> obj[key];</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意返回对象的情况。下面的代码中，<code>getSampleTodo()</code> 函数返回了 <code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getSampleTodo = <span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="attr">title</span> : <span class="string">"A sample todo"</span> &#125;;</span><br><span class="line"></span><br><span class="line">getSampleTodo();</span><br><span class="line"><span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><p>我认为 ES6 的生成器是一个让代码更复杂的无必要的特性。（<strong>译注：</strong> 这一点不认可作者，只能说对上层应用开发和新手来说没有必要使用。）</p>
<p>ES6 的生成器创建了一个包含 <code>next()</code> 方法的对象。<code>next()</code> 方法又创建了一个包含 <code>value</code> 属性的对象。ES6 的生成器改善了循环的使用。看<a href="https://link.zhihu.com/?target=https%3A//jsfiddle.net/cristi_salcescu/edq7vfwm/" target="_blank" rel="noopener">下面的代码</a>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">sequence</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> generator = sequence();</span><br><span class="line">generator.next().value;<span class="comment">//1</span></span><br><span class="line">generator.next().value;<span class="comment">//2</span></span><br><span class="line">generator.next().value;<span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<p>同样的生成器可以用一个闭包来简单实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sequence</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> generator = sequence();</span><br><span class="line">generator();<span class="comment">//1</span></span><br><span class="line">generator();<span class="comment">//2</span></span><br><span class="line">generator();<span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<p>更多关于函数生成器的例子可以参看 <a href="https://link.zhihu.com/?target=https%3A//www.freecodecamp.org/news/lets-experiment-with-functional-generators-and-the-pipeline-operator-in-javascript-520364f97448/" target="_blank" rel="noopener">Let’s experiment with functional generators and the pipeline operator in JavaScript</a>。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p><code>let</code> 和 <code>const</code> 用来声明和初始化变量。</p>
<p>模块封装功能并仅仅暴露一小部分。</p>
<p>展开操作符和剩余参数，以及属性简写让代码更具表现力。</p>
<p>Promise 和尾递归完善了函数式编程的工具箱。</p>
<p>[原文地址](那些你应该知道的 ES6 特性 - freeCodeCamp的文章 - 知乎<br><a href="https://zhuanlan.zhihu.com/p/87285383" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/87285383</a>)</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/11/26/js数据类型之增删改查/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/11/26/js数据类型之增删改查/" class="post-title-link" itemprop="url">js数据类型之增删改查</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-26 21:37:12 / 修改时间：21:40:10" itemprop="dateCreated datePublished" datetime="2019-11-26T21:37:12+08:00">2019-11-26</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JS数据类型复杂类型学习之增删改查"><a href="#JS数据类型复杂类型学习之增删改查" class="headerlink" title="JS数据类型复杂类型学习之增删改查"></a>JS数据类型复杂类型学习之增删改查</h1><h2 id="七种数据类型"><a href="#七种数据类型" class="headerlink" title="七种数据类型"></a>七种数据类型</h2><p>number、string、bool、symbol、undefined、null、Object</p>
<p>总结四基两空一对象</p>
<h2 id="五个-falsy值"><a href="#五个-falsy值" class="headerlink" title="五个 falsy值"></a>五个 falsy值</h2><p>undefined、null、0、NaN、’ ‘(空字符串)</p>
<p>falsy 相当于是 false 但是不是false的值</p>
<h2 id="对象-Object-（第七种数据类型，唯一一个复杂数据类型）"><a href="#对象-Object-（第七种数据类型，唯一一个复杂数据类型）" class="headerlink" title="对象 Object （第七种数据类型，唯一一个复杂数据类型）"></a>对象 Object （第七种数据类型，唯一一个复杂数据类型）</h2><p>定义：</p>
<ul>
<li>无序的数据集合</li>
<li>键值对的集合</li>
</ul>
<p>写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="string">'name'</span>: <span class="string">'rose'</span> , <span class="string">'age'</span>: <span class="string">'18'</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> object ( &#123; <span class="string">'name'</span>: <span class="string">'rose'</span>  &#125; )  <span class="comment">//这是正规写法，第一种是简单写法</span></span><br><span class="line"><span class="built_in">console</span>.log = ( &#123; <span class="string">'name'</span>: <span class="string">'rose'</span> , <span class="string">'age'</span>: <span class="string">'18'</span> &#125; )  <span class="comment">//未命名对象，</span></span><br></pre></td></tr></table></figure>

<p>细节：</p>
<ul>
<li>键名是字符串，不是标识符，可以包含任意字符</li>
<li>引号可以省略，省略之后就只能写标识符</li>
<li>就算引号省略了，键名也还是字符串（重点）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">属性名：每个 key 都是对象的属性名</span><br><span class="line">属性值：每个 value 都是对象的属性值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实践1</span><br><span class="line"></span><br><span class="line">Object.key(obj);</span><br><span class="line">可以得到 obj 的key</span><br><span class="line"></span><br><span class="line">所有的属性名会自动变成字符串</span><br><span class="line"></span><br><span class="line">Object.keys(obj);</span><br><span class="line">可以得到 obj 所有的key</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实践2</span><br><span class="line"></span><br><span class="line">变量做属性名</span><br><span class="line"></span><br><span class="line">语法</span><br><span class="line">let p1 = &apos;name&apos;</span><br><span class="line">let obj = &#123; p1:&apos;rose&apos; &#125;这样写，属性名为字符串&apos;p1&apos;</span><br><span class="line">let obj = &#123; [p1]:&apos;rose&apos; &#125;这样写，属性名为字符串&apos;name&apos;</span><br><span class="line"></span><br><span class="line">对比</span><br><span class="line">不加 [] 的属性名会自动变成字符串</span><br><span class="line">加了 [] 的属性名会当做变量求值</span><br><span class="line">值如果不是字符串，会自动变成字符串</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">超纲知识</span><br><span class="line">以后学习“迭代”用的还上</span><br></pre></td></tr></table></figure>

<p>原型</p>
<ul>
<li>所有的对象都有原型<ul>
<li>原型中存储着对象的共有属性</li>
<li>比如 obj 的原型就是一个对象；</li>
<li><code>obj.__proto__</code> 存着这个对象的地址</li>
<li>这个对象里有 toString / valueOf / constructor 等属性</li>
</ul>
</li>
<li>对象的原型也是对象<ul>
<li>所以对象的原型也是原型</li>
<li>obj = {} 的原型即为所有对象的原型</li>
<li>这个原型包含所有对象的共有属性，是对象的根</li>
<li>这个原型也有原型，是 null</li>
</ul>
</li>
</ul>
<h2 id="对象的-增、删、改、查"><a href="#对象的-增、删、改、查" class="headerlink" title="对象的 增、删、改、查"></a>对象的 增、删、改、查</h2><p><strong>删除属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> obj.xxx 或 <span class="keyword">delete</span> obj[<span class="string">'xxx'</span>]</span><br><span class="line"><span class="number">1</span>、即可删除 obj 的 xxx 属性</span><br><span class="line"><span class="number">2</span>、请区分“属性值为<span class="literal">undefined</span>”和 “不含属性名”</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">不含属性名</span><br><span class="line"><span class="string">'xxx'</span> <span class="keyword">in</span> obj === <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">含有属性名，但是值为<span class="literal">undefined</span></span><br><span class="line"><span class="string">'xxx'</span> <span class="keyword">in</span> obj &amp;&amp; obj.xxx === <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意 obj.xxx === <span class="literal">undefined</span> ,不能判定 <span class="string">'xxx'</span> 是否为 obj 的属性</span><br><span class="line">示例</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">x</span>: <span class="literal">undefined</span> &#125;</span><br><span class="line">obj x === <span class="literal">undefined</span> <span class="comment">//得到 true</span></span><br><span class="line">obj2 x  === <span class="literal">undefined</span> <span class="comment">//得到 true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">实践<span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">'rose'</span>,<span class="attr">age</span>:<span class="string">'18'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、obj.name = <span class="literal">undefined</span></span><br><span class="line"><span class="number">2</span>、<span class="keyword">delete</span> obj.name <span class="comment">//也可以这样 delete obj['name']</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>和<span class="number">2</span>的区别</span><br><span class="line">一号只删除属性值，属性名还在，属性值为<span class="literal">undefined</span>；</span><br><span class="line">二号完全删除属性值和属性名。</span><br></pre></td></tr></table></figure>

<p><strong>查看属性（也是读属性）</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">查看自身所有属性</span><br><span class="line"><span class="built_in">Object</span>.keys(obj);</span><br><span class="line">可以得到 obj 所有的key</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.values(obj);</span><br><span class="line">可以得到 obj 所有的值</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.entries(obj);</span><br><span class="line">可以得到 obj 所有的 key 和值</span><br><span class="line"></span><br><span class="line">查看自身加共有属性</span><br><span class="line"><span class="built_in">console</span>.dir(obj)</span><br><span class="line">或者自己依次使用 <span class="built_in">Object</span>.keys 打印出 obj.__proto__</span><br><span class="line"></span><br><span class="line">判断一个属性是自身的还是共有的</span><br><span class="line">obj.hasOwnProperty(<span class="string">'toString'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">查看一个属性</span><br><span class="line"></span><br><span class="line">两种方法查看属性</span><br><span class="line"><span class="number">1</span>、中括号语法： obj[<span class="string">'key'</span>]</span><br><span class="line"><span class="number">2</span>、点语法： obj.key</span><br><span class="line"><span class="number">3</span>、坑新人语法： obj[key] <span class="comment">//变量 key 值一般不为 'key'</span></span><br><span class="line"></span><br><span class="line">重点：</span><br><span class="line"><span class="number">1</span>、新手优先使用中括号语法，点语法容易误导你，让你以为 key 不是字符串</span><br></pre></td></tr></table></figure>

<p><strong>修改或增加属性（写属性）</strong></p>
<ul>
<li>直接赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">'rose'</span>&#125; <span class="comment">// name 是字符串</span></span><br><span class="line">obj.name = <span class="string">'rose'</span> <span class="comment">// name 是字符串</span></span><br><span class="line">obj[<span class="string">'name'</span>] = <span class="string">'rose'</span></span><br><span class="line">&lt;&lt;obj[name] = <span class="string">'rose'</span> <span class="comment">//错误的，因为 name 的值是不确定的&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">obj [<span class="string">'na'</span> + <span class="string">'me'</span>] = <span class="string">'rose'</span></span><br><span class="line"><span class="keyword">let</span> key = <span class="string">'name'</span>;obj[key] = <span class="string">'rose'</span></span><br><span class="line">&lt;&lt;<span class="keyword">let</span> key = <span class="string">'name'</span>;obj.key = <span class="string">'rose'</span> <span class="comment">//错，因为obj.key 等价 obj['key']&gt;&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>批量赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(obj,&#123;<span class="attr">age</span>:<span class="string">'18'</span>, <span class="attr">gender</span>: <span class="string">'man'</span> &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>修改或者增加共有属性</strong></p>
<ul>
<li>无法通过自身修改或者增加共有属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;；obj2 = &#123;&#125; <span class="comment">// 共有 toString</span></span><br><span class="line">obj.toString = <span class="string">'xxx'</span> <span class="comment">//只会改 obj 的自身属性</span></span><br><span class="line">obj2.toString <span class="comment">//还在原型上</span></span><br></pre></td></tr></table></figure>

<ul>
<li>强制修改或者增加原型上的属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、obj.__proto__.toString = <span class="string">'xxx'</span> <span class="comment">//不推荐使用__proto__</span></span><br><span class="line"><span class="number">2</span>、<span class="built_in">Object</span>.protoye.toString = <span class="string">'xxx'</span></span><br><span class="line"><span class="number">3</span>、一般来说，不要修改原型，会引发很多问题</span><br></pre></td></tr></table></figure>

<p><strong>修改隐藏属性</strong></p>
<ul>
<li>不推荐使用 <code>__proto__</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>: <span class="string">'rose'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">name</span>: <span class="string">'jack'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> common = &#123;<span class="attr">kind</span>: <span class="string">'human'</span>&#125;</span><br><span class="line">obj.__proto__ = common</span><br><span class="line">obj2.__proto__ = common</span><br></pre></td></tr></table></figure>

<ul>
<li>推荐使用<code>Object.create</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(common)</span><br><span class="line">obj.name = <span class="string">'rose'</span></span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="built_in">Object</span>.create(common)</span><br><span class="line">obj2.name = <span class="string">'jack'</span></span><br><span class="line"></span><br><span class="line">规范</span><br><span class="line">要改的话一开始就改，别后来再改</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>删</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">delete</span> obj[<span class="string">'xxx'</span>]</span><br><span class="line"><span class="number">2</span>、<span class="string">'name'</span> <span class="keyword">in</span> obj <span class="comment">// false</span></span><br><span class="line"><span class="number">3</span>、obj.hasOwnporperty(<span class="string">'name'</span>) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>和<span class="number">3</span>的区别：</span><br><span class="line">查看 <span class="string">'xxx'</span> 这个属性是自身的还是原型的；</span><br><span class="line">第二种可以证明 <span class="string">'name'</span> 是否在 obj 中，在返回 <span class="literal">true</span> 、不在返回 <span class="literal">false</span>；</span><br><span class="line">但是无法证明实在自身属性还是原型属性里面的；</span><br><span class="line">第三种直接证明是否是自身拥有，只有一种 <span class="literal">false</span> ，自身不存在。</span><br></pre></td></tr></table></figure>

<p><strong>查</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj)</span><br><span class="line"><span class="built_in">console</span>.dir(obj)</span><br><span class="line">obj[<span class="string">'name'</span>]</span><br><span class="line">obj.name <span class="comment">//这里的 name 是字符串</span></span><br><span class="line">obj[name] <span class="comment">//这里的 name 是变量</span></span><br></pre></td></tr></table></figure>

<p><strong>改</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">改自身 obj[<span class="string">'name'</span>] = <span class="string">'jack'</span></span><br><span class="line">批量改自身 <span class="built_in">Object</span>.assign(obj,&#123;<span class="attr">age</span>:<span class="string">'18'</span>,...&#125;)</span><br><span class="line">改共有属性 obj.__proto__[<span class="string">'toString'</span>] = <span class="string">'xxx'</span></span><br><span class="line">改共有属性 object.prototype[<span class="string">'toString'</span>] = <span class="string">'xxx'</span></span><br><span class="line">该原型 obj.__proto__ = common</span><br><span class="line">该原型 <span class="keyword">let</span> obj = object.create = common</span><br><span class="line"></span><br><span class="line">重点</span><br><span class="line">所有 __proto__ 代码都是强烈不推荐的使用的</span><br></pre></td></tr></table></figure>

<p><strong>增</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基本上和“改”一样，已有的属性就是改，没有的属性就是增加</span><br></pre></td></tr></table></figure>

<p>[原文地址](JS数据类型复杂类型学习之增删改查 - Alejandro的文章 - 知乎<br><a href="https://zhuanlan.zhihu.com/p/86563057" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/86563057</a>)</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="https://niuxinyu.github.io/niuxinyublog/niuxinyublog/2019/08/31/post-Vue组件通信的六种方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Niu">
      <meta itemprop="description" content="文章">
      <meta itemprop="image" content="/niuxinyublog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niu的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/niuxinyublog/2019/08/31/post-Vue组件通信的六种方式/" class="post-title-link" itemprop="url">post Vue组件通信的六种方式</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-31 17:04:39 / 修改时间：19:00:50" itemprop="dateCreated datePublished" datetime="2019-08-31T17:04:39+08:00">2019-08-31</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue组件通信的六种方式"><a href="#Vue组件通信的六种方式" class="headerlink" title="Vue组件通信的六种方式"></a>Vue组件通信的六种方式</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>组件是 vue.js最强大的功能之一，而组件实例的作用域是相互独立的，这就意味着不同组件之间的数据无法相互引用。一般来说，组件可以有以下几种关系：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac35bf70530315?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="组件间的关系"></p>
<p>如上图所示，A 和 B、B 和 C、B 和 D 都是父子关系，C 和 D 是兄弟关系，A 和 C 是隔代关系（可能隔多代）。</p>
<p>针对不同的使用场景，如何选择行之有效的通信方式？这是我们所要探讨的主题。本文总结了vue组件间通信的几种方式，如props、<code>$emit</code>/<code>$on</code>、vuex、<code>$parent</code> / <code>$children</code>、<code>$attrs</code>/<code>$listeners</code>和provide/inject，以通俗易懂的实例讲述这其中的差别及使用场景，希望对小伙伴有些许帮助。</p>
<p>本文的代码请猛戳<a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fljianshu%2FBlog%2Ftree%2Fmaster%2Fvue2.0%E5%AD%A6%E4%B9%A0" target="_blank" rel="noopener">github博客</a>，纸上得来终觉浅，大家动手多敲敲代码！</p>
<h2 id="方法一-props-emit"><a href="#方法一-props-emit" class="headerlink" title="方法一     props/$emit"></a>方法一     props/$emit</h2><p>父组件通过props的方式向子组件B传递，B to A通过在 B 组件中<code>$emti</code>，父组件中v-on的方式实现。</p>
<h3 id="1-父组件向子组件传值"><a href="#1-父组件向子组件传值" class="headerlink" title="1.父组件向子组件传值"></a>1.父组件向子组件传值</h3><p>接下来我们通过一个例子，说明父组件如何向子组件传递值：在子组件<code>Users.vue</code>中如何获取父组件App.vue中的数据 <code>users:[&quot;Henry&quot;,&quot;Bucky&quot;,&quot;Emily&quot;]</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//App.vue父组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;users v-bind:users=&quot;users&quot;&gt;&lt;/users&gt;//前者自定义名称便于子组件调用，后者要传递数据名</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Users from &quot;./components/Users&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      users:[&quot;Henry&quot;,&quot;Bucky&quot;,&quot;Emily&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components:&#123;</span><br><span class="line">    &quot;users&quot;:Users</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//users子组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;user in users&quot;&gt;&#123;&#123;user&#125;&#125;&lt;/li&gt;//遍历传递过来的值，然后呈现到页面</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;HelloWorld&apos;,</span><br><span class="line">  props:&#123;</span><br><span class="line">    users:&#123;           //这个就是父组件中子标签自定义名字</span><br><span class="line">      type:Array,</span><br><span class="line">      required:true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>总结：父组件通过props向下传递数据给子组件。注：组件中的数据共有三种形式：data、props、computed</strong></p>
<h3 id="2-子组件向父组件传值（通过事件形式）"><a href="#2-子组件向父组件传值（通过事件形式）" class="headerlink" title="2.子组件向父组件传值（通过事件形式）"></a>2.子组件向父组件传值（通过事件形式）</h3><p>接下来我们通过一个例子，说明子组件如何向父组件传递值：当我们点击“Vue.js Demo”后，子组件向父组件传递值，文字由原来的“传递的是一个值”变成“子向父组件传值”，实现子组件向父组件值的传递。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac35bf70ac2d51?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="demo"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;h1 @click=&quot;changeTitle&quot;&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;//绑定一个点击事件</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;app-header&apos;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title:&quot;Vue.js Demo&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    changeTitle() &#123;</span><br><span class="line">      this.$emit(&quot;titleChanged&quot;,&quot;子向父组件传值&quot;);//自定义事件  传递值“子向父组件传值”</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;app-header v-on:titleChanged=&quot;updateTitle&quot; &gt;&lt;/app-header&gt;//与子组件titleChanged自定义事件保持一致</span><br><span class="line">   // updateTitle($event)接受传递过来的文字</span><br><span class="line">    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Header from &quot;./components/Header&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      title:&quot;传递的是一个值&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    updateTitle(e)&#123;   //声明这个函数</span><br><span class="line">      this.title = e;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components:&#123;</span><br><span class="line">   &quot;app-header&quot;:Header,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>总结：子组件通过events给父组件发送消息，实际上就是子组件把自己的数据发送到父组件。</strong></p>
<h2 id="方法二、-emit-on"><a href="#方法二、-emit-on" class="headerlink" title="方法二、$emit/$on"></a>方法二、<code>$emit</code>/<code>$on</code></h2><p><strong>这种方法通过一个空的Vue实例作为中央事件总线（事件中心），用它来触发事件和监听事件,巧妙而轻量地实现了任何组件间的通信，包括父子、兄弟、跨级</strong>。当我们的项目比较大时，可以选择更好的状态管理解决方案vuex。</p>
<p>实现方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bus.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue()</span><br></pre></td></tr></table></figure>

<p>在需要通信的组件中都引入<code>bus.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">"emit"</span>&gt;</span><br><span class="line">    &lt;button @click=<span class="string">"bus"</span>&gt;按钮&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt; </span><br><span class="line">&lt;<span class="regexp">/template &gt; </span></span><br><span class="line"><span class="regexp">import Bus from './</span>bus.js<span class="string">'</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">  data() &#123;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">      message: '</span><span class="string">'</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  methods: &#123;</span></span><br><span class="line"><span class="string">    bus() &#123;</span></span><br><span class="line"><span class="string">      Bus.$emit('</span>msg<span class="string">', '</span>我要传给兄弟组件们，你收到没有<span class="string">')</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>在钩子函数中监听 msg 事件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=<span class="string">"on"</span>&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">import Bus from './</span>bus.js<span class="string">'</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">    data() &#123;</span></span><br><span class="line"><span class="string">      return &#123;</span></span><br><span class="line"><span class="string">        message:  '</span><span class="string">'</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    mounted() &#123;　　　</span></span><br><span class="line"><span class="string">       let self = this</span></span><br><span class="line"><span class="string">       Bus.$on('</span>msg<span class="string">', (e) =&gt; &#123;</span></span><br><span class="line"><span class="string">         self.message = e</span></span><br><span class="line"><span class="string">         console.log(`传来的数据是：$&#123;e&#125;`)</span></span><br><span class="line"><span class="string">       &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"> &#125;</span></span><br></pre></td></tr></table></figure>

<p>最后 p 会显示来自 $emit 传来的信息。</p>
<p>另外一个使用<code>Bus.js</code>来实现的非父子组件间的传值：地址：<a href="https://github.com/chenyinkai/blog/issues/28" target="_blank" rel="noopener">https://github.com/chenyinkai/blog/issues/28</a></p>
<p>首先新建一个<code>bus.js</code>，使用一个空的Vue实例作为事件总线。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bus.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue()</span><br></pre></td></tr></table></figure>

<p>再创建两个组件，兄弟关系：</p>
<p><code>a</code> 组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">a.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;aa&quot;&gt;</span><br><span class="line">	&#123;&#123;msg&#125;&#125;</span><br><span class="line">	&lt;button @click=&quot;toBus&quot;&gt;子组件传给兄弟组件&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Bus from &quot;../bus&quot;;// 引入bus.js</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;aa&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;this is aa component&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    toBus() &#123;</span><br><span class="line">      Bus.$emit(&quot;on&quot;, &quot;data from aa component&quot;);// 发送 `on` 事件</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>b</code> 组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">b.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;bb&quot;&gt;</span><br><span class="line">      &#123;&#123;msg&#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Bus from &quot;../bus&quot;;// 引入bus.js</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;bb&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;this is bb component&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    Bus.$on(&quot;on&quot;, msg =&gt; &#123; // 监听 `on` 事件</span><br><span class="line">      this.msg = msg;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>最后将 <code>a</code> , <code>b</code> 组件展示出来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;A&gt;&lt;/A&gt;</span><br><span class="line">    &lt;B&gt;&lt;/B&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import A from &apos;./a.vue&apos;</span><br><span class="line">import B from &apos;./b.vue&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;HelloWorld&apos;,</span><br><span class="line">  components:&#123;</span><br><span class="line">    A,</span><br><span class="line">    B</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>此时点击 <code>a</code> 组件中的按钮，就会发现 <code>b</code> 中的 <code>msg</code> 变成了 <code>data from aa component</code></p>
<h2 id="方法三：vuex"><a href="#方法三：vuex" class="headerlink" title="方法三：vuex"></a>方法三：vuex</h2><p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac35bf70ef8eb1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p>
<h3 id="1-简要介绍Vuex原理"><a href="#1-简要介绍Vuex原理" class="headerlink" title="1.简要介绍Vuex原理"></a>1.简要介绍Vuex原理</h3><p>Vuex实现了一个单向数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过Mutation进行，Mutation同时提供了订阅者模式供外部插件调用获取State数据的更新。而当所有异步操作(常见于调用后端接口异步获取更新数据)或批量的同步操作需要走Action，但Action也是无法直接修改State的，还是需要通过Mutation来修改State的数据。最后，根据State的变化，渲染到视图上。</p>
<h3 id="2-简要介绍各模块在流程中的功能："><a href="#2-简要介绍各模块在流程中的功能：" class="headerlink" title="2.简要介绍各模块在流程中的功能："></a>2.简要介绍各模块在流程中的功能：</h3><ul>
<li>Vue Components：Vue组件。HTML页面上，负责接收用户操作等交互行为，执行dispatch方法触发对应action进行回应。</li>
<li>dispatch：操作行为触发方法，是唯一能执行action的方法。</li>
<li>actions：<strong>操作行为处理模块,由组件中的$store.dispatch(‘action 名称’, data1)来触发。然后由commit()来触发mutation的调用 , 间接更新 state</strong>。负责处理Vue Components接收到的所有交互行为。包含同步/异步操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action以及提交mutation的操作。该模块提供了Promise的封装，以支持action的链式触发。</li>
<li>commit：状态改变提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。</li>
<li>mutations：<strong>状态改变操作方法，由actions中的commit(‘mutation 名称’)来触发</strong>。是Vuex修改state的唯一推荐方法。该方法只能进行同步操作，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等。</li>
<li>state：页面状态管理容器对象。集中存储Vue components中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新。</li>
<li>getters：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，Vue Components通过该方法读取全局state对象。</li>
</ul>
<h3 id="3-Vuex与localStorage"><a href="#3-Vuex与localStorage" class="headerlink" title="3.Vuex与localStorage"></a>3.Vuex与localStorage</h3><p>vuex 是 vue 的状态管理器，存储的数据是响应式的。但是并不会保存起来，刷新之后就回到了初始状态，<strong>具体做法应该在vuex里数据改变的时候把数据拷贝一份保存到localStorage里面，刷新之后，如果localStorage里有保存的数据，取出来再替换store里的state。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultCity = <span class="string">"上海"</span></span><br><span class="line"><span class="keyword">try</span> &#123;   <span class="comment">// 用户关闭了本地存储功能，此时在外层加个try...catch</span></span><br><span class="line">  <span class="keyword">if</span> (!defaultCity)&#123;</span><br><span class="line">    defaultCity = <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">'defaultCity'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>(e)&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: defaultCity</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    changeCity(state, city) &#123;</span><br><span class="line">      state.city = city</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.localStorage.setItem(<span class="string">'defaultCity'</span>, <span class="built_in">JSON</span>.stringify(state.city));</span><br><span class="line">      <span class="comment">// 数据改变的时候把数据拷贝一份保存到localStorage里面</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这里需要注意的是：由于vuex里，我们保存的状态，都是数组，而localStorage只支持字符串，所以需要用JSON转换：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(state.subscribeList);   <span class="comment">// array -&gt; string</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">"subscribeList"</span>));    <span class="comment">// string -&gt; array</span></span><br></pre></td></tr></table></figure>

<h2 id="方法四、-attrs-listeners"><a href="#方法四、-attrs-listeners" class="headerlink" title="方法四、$attrs/$listeners"></a>方法四、<code>$attrs</code>/<code>$listeners</code></h2><h4 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h4><p>多级组件嵌套需要传递数据时，通常使用的方法是通过vuex。但如果仅仅是传递数据，而不做中间处理，使用 vuex 处理，未免有点大材小用。为此Vue2.4 版本提供了另一种方法—-<code>$attrs</code>/<code>$listeners</code></p>
<ul>
<li><code>$attrs</code>：包含了父作用域中不被 prop 所识别 (且获取) 的特性绑定 (class 和 style 除外)。当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定 (class 和 style 除外)，并且可以通过 v-bind=”$attrs” 传入内部组件。通常配合 inheritAttrs 选项一起使用。</li>
<li><code>$listeners</code>：包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。它可以通过 v-on=”$listeners” 传入内部组件</li>
</ul>
<p>接下来我们看个跨级通信的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// index.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;浪里行舟&lt;/h2&gt;</span><br><span class="line">    &lt;child-com1</span><br><span class="line">      :foo=&quot;foo&quot;</span><br><span class="line">      :boo=&quot;boo&quot;</span><br><span class="line">      :coo=&quot;coo&quot;</span><br><span class="line">      :doo=&quot;doo&quot;</span><br><span class="line">      title=&quot;前端工匠&quot;</span><br><span class="line">    &gt;&lt;/child-com1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const childCom1 = () =&gt; import(&quot;./childCom1.vue&quot;);</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; childCom1 &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      foo: &quot;Javascript&quot;,</span><br><span class="line">      boo: &quot;Html&quot;,</span><br><span class="line">      coo: &quot;CSS&quot;,</span><br><span class="line">      doo: &quot;Vue&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// childCom1.vue</span><br><span class="line">&lt;template class=&quot;border&quot;&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;foo: &#123;&#123; foo &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;childCom1的$attrs: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;child-com2 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const childCom2 = () =&gt; import(&quot;./childCom2.vue&quot;);</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    childCom2</span><br><span class="line">  &#125;,</span><br><span class="line">  inheritAttrs: false, // 可以关闭自动挂载到组件根元素上的没有在props声明的属性</span><br><span class="line">  props: &#123;</span><br><span class="line">    foo: String // foo作为props属性绑定</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(this.$attrs); // &#123; &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;前端工匠&quot; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// childCom2.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;border&quot;&gt;</span><br><span class="line">    &lt;p&gt;boo: &#123;&#123; boo &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;childCom2: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;child-com3 v-bind=&quot;$attrs&quot;&gt;&lt;/child-com3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const childCom3 = () =&gt; import(&quot;./childCom3.vue&quot;);</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    childCom3</span><br><span class="line">  &#125;,</span><br><span class="line">  inheritAttrs: false,</span><br><span class="line">  props: &#123;</span><br><span class="line">    boo: String</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(this.$attrs); // &#123; &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;前端工匠&quot; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// childCom3.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;border&quot;&gt;</span><br><span class="line">    &lt;p&gt;childCom3: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    coo: String,</span><br><span class="line">    title: String</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac35bf77e44744?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p>
<p>如上图所示<code>$attrs``$attrs``$listeners</code></p>
<p>简单来说：<code>$attrs</code>与<code>$listeners</code> 是两个对象，<code>$attrs</code> 里存放的是父组件中绑定的非 Props 属性，<code>$listeners</code>里存放的是父组件中绑定的非原生事件。</p>
<h2 id="方法五、provide-inject"><a href="#方法五、provide-inject" class="headerlink" title="方法五、provide/inject"></a>方法五、provide/inject</h2><h4 id="1-简介-1"><a href="#1-简介-1" class="headerlink" title="1.简介"></a>1.简介</h4><p>Vue2.2.0新增API,这对选项需要一起使用，<strong>以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效</strong>。一言而蔽之：祖先组件中通过provider来提供变量，然后在子孙组件中通过inject来注入变量。 <strong>provide / inject API 主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系</strong>。</p>
<h4 id="2-举个例子"><a href="#2-举个例子" class="headerlink" title="2.举个例子"></a>2.举个例子</h4><p>假设有两个组件： A.vue 和 B.vue，B 是 A 的子组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A.vue</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  provide: &#123;</span><br><span class="line">    name: <span class="string">'浪里行舟'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B.vue</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  inject: [<span class="string">'name'</span>],</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);  <span class="comment">// 浪里行舟</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，在 A.vue 里，我们设置了一个 <strong>provide: name</strong>，值为 浪里行舟，它的作用就是将 <strong>name</strong> 这个变量提供给它的所有子组件。而在 B.vue 中，通过 <code>inject</code> 注入了从 A 组件中提供的 <strong>name</strong> 变量，那么在组件 B 中，就可以直接通过 <strong>this.name</strong> 访问这个变量了，它的值也是 浪里行舟。这就是 provide / inject API 最核心的用法。</p>
<p>需要注意的是：<strong>provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的</strong>—-vue官方文档 所以，上面 A.vue 的 name 如果改变了，B.vue 的 this.name 是不会改变的，仍然是 浪里行舟。</p>
<h4 id="3-provide与inject-怎么实现数据响应式"><a href="#3-provide与inject-怎么实现数据响应式" class="headerlink" title="3.provide与inject 怎么实现数据响应式"></a>3.provide与inject 怎么实现数据响应式</h4><p>一般来说，有两种办法：</p>
<ul>
<li>provide祖先组件的实例，然后在子孙组件中注入依赖，这样就可以在子孙组件中直接修改祖先组件的实例的属性，不过这种方法有个缺点就是这个实例上挂载很多没有必要的东西比如props，methods</li>
<li>使用2.6最新API Vue.observable 优化响应式 provide(推荐)</li>
</ul>
<p>我们来看个例子：孙组件D、E和F获取A组件传递过来的color值，并能实现数据响应式变化，即A组件的color变化后，组件D、E、F会跟着变（核心代码如下：）</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac35bf7131f3db?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A 组件 </span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">      &lt;h1&gt;A 组件&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button @click="() =&gt; changeColor()"&gt;改变color&lt;/</span>button&gt;</span><br><span class="line">      &lt;ChildrenB /&gt;</span><br><span class="line">      &lt;ChildrenC /&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">......</span></span><br><span class="line"><span class="regexp">  data() &#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">      color: "blue"</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ provide() &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   return &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     theme: &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/       color: this.color /</span><span class="regexp">/这种方式绑定的数据并不是可响应的</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     &#125; /</span><span class="regexp">/ 即A组件的color变化后，组件D、E、F不会跟着变</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   &#125;;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ &#125;,</span></span><br><span class="line"><span class="regexp">  provide() &#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">      theme: this/</span><span class="regexp">/方法一：提供祖先组件的实例</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  methods: &#123;</span></span><br><span class="line"><span class="regexp">    changeColor(color) &#123;</span></span><br><span class="line"><span class="regexp">      if (color) &#123;</span></span><br><span class="line"><span class="regexp">        this.color = color;</span></span><br><span class="line"><span class="regexp">      &#125; else &#123;</span></span><br><span class="line"><span class="regexp">        this.color = this.color === "blue" ? "red" : "blue";</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 方法二:使用2.6最新API Vue.observable 优化响应式 provide</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ provide() &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   this.theme = Vue.observable(&#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     color: "blue"</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   &#125;);</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   return &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     theme: this.theme</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   &#125;;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ &#125;,</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ methods: &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   changeColor(color) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     if (color) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/       this.theme.color = color;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     &#125; else &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/       this.theme.color = this.theme.color === "blue" ? "red" : "blue";</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/     &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/   &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// F 组件 </span></span><br><span class="line">&lt;template functional&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"border2"</span>&gt;</span><br><span class="line">    &lt;h3 :style=<span class="string">"&#123; color: injections.theme.color &#125;"</span>&gt;F 组件&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  inject: &#123;</span></span><br><span class="line"><span class="regexp">    theme: &#123;</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/函数式组件取值不一样</span></span><br><span class="line"><span class="regexp">      default: () =&gt; (&#123;&#125;)</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<p>虽说provide 和 inject 主要为高阶插件/组件库提供用例，但如果你能在业务中熟练运用，可以达到事半功倍的效果！</p>
<h2 id="方法六、-parent-children与-ref"><a href="#方法六、-parent-children与-ref" class="headerlink" title="方法六、$parent / $children与 ref"></a>方法六、<code>$parent</code> / <code>$children</code>与 <code>ref</code></h2><ul>
<li><code>ref</code>：如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例</li>
<li><code>$parent</code> / <code>$children</code>：访问父 / 子实例</li>
</ul>
<p>需要注意的是：这两种都是直接得到组件实例，使用后可以直接调用组件的方法或访问数据。我们先来看个用 <code>ref</code>来访问组件的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// component-a 子组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="string">'Vue.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    sayHello () &#123;</span><br><span class="line">      <span class="built_in">window</span>.alert(<span class="string">'Hello'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;component-a ref=<span class="string">"comA"</span>&gt;&lt;<span class="regexp">/component-a&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      <span class="keyword">const</span> comA = <span class="keyword">this</span>.$refs.comA;</span><br><span class="line">      <span class="built_in">console</span>.log(comA.title);  <span class="comment">// Vue.js</span></span><br><span class="line">      comA.sayHello();  <span class="comment">// 弹窗</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>不过，<strong>这两种方法的弊端是，无法在跨级或兄弟间通信</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// parent.vue</span><br><span class="line">&lt;component-a&gt;&lt;/component-a&gt;</span><br><span class="line">&lt;component-b&gt;&lt;/component-b&gt;</span><br><span class="line">&lt;component-b&gt;&lt;/component-b&gt;</span><br></pre></td></tr></table></figure>

<p>我们想在 component-a 中，访问到引用它的页面中（这里就是 parent.vue）的两个 component-b 组件，那这种情况下，就得配置额外的插件或工具了，比如 Vuex 和 Bus 的解决方案。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>常见使用场景可以分为三类：</p>
<ul>
<li>父子通信： 父向子传递数据是通过 props，子向父是通过 events（<code>$emit</code>）；通过父链 / 子链也可以通信（<code>$parent</code> / <code>$children</code>）；ref 也可以访问组件实例；provide / inject API；<code>$attrs/$listeners</code></li>
<li>兄弟通信： Bus；Vuex</li>
<li>跨级通信： Bus；Vuex；provide / inject API、<code>$attrs/$listeners</code></li>
</ul>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/niuxinyublog/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/niuxinyublog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/niuxinyublog/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/niuxinyublog/page/5/">5</a><a class="page-number" href="/niuxinyublog/page/6/">6</a><a class="extend next" rel="next" href="/niuxinyublog/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Niu</p>
  <div class="site-description" itemprop="description">文章</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/niuxinyublog/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span>
        
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Niu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/niuxinyublog/lib/anime.min.js?v=3.1.0"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/niuxinyublog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/niuxinyublog/js/utils.js?v=7.4.0"></script><script src="/niuxinyublog/js/motion.js?v=7.4.0"></script>
<script src="/niuxinyublog/js/schemes/muse.js?v=7.4.0"></script>
<script src="/niuxinyublog/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
